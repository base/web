---
title: MiniKit Alpha 
description: Easiest way to build Mini Apps on Base
---

import { MiniKitProvider } from '@coinbase/onchainkit/minikit';
import { useMiniKit, useTBADeepLink, useAddFrame, useNotification, useOpenUrl, useClose, usePrimaryButton, useViewProfile, useAuthenticate } from '@coinbase/onchainkit/minikit/hooks';

# MiniKit

MiniKit helps you build Mini Apps on Base without needing to know the SDK implementation details. It integrates with OnchainKit components and provides Coinbase Wallet-specific hooks that degrade gracefully on other clients like Warpcast.

## Why MiniKit?

- **Simplified Development:** Build with minimal Frames SDK knowledge
- **Coinbase Wallet Integration:** Access specialized hooks with fallbacks on other clients
- **Component Compatibility:** Use [OnchainKit](https://onchainkit.xyz/) components out of the box
- **Automatic Setup:** CLI for project scaffolding with webhooks and notifications
- **Account Association:** Simplified generation of account associations

## Use Cases

- Gaming mini apps
- Social mini apps
- Payment mini apps
- And more

## Quick Start

Bootstrap a new project using the CLI:

```bash
npx create-onchain@alpha --mini
```

This sets up:
- Frontend and backend components
- Webhooks and notifications
- Account association generation
- A demo app showcasing OnchainKit capabilities

:::info
We recommend [Vercel](https://vercel.com) for deployment as it works well with the upstash/redis backend required for frames, webhooks, and notifications.
:::

## Initial Setup

:::steps

## Create a new MiniKit project using the CLI:

```bash
npx create-onchain@alpha --mini
```

## Enter your CDP Client API key when prompted.

Get a CDP API key from the [CDP Portal](https://portal.cdp.coinbase.com) under API Keys -> Client API Key.

If skipped, add it manually in `.env.local`:

```bash
NEXT_PUBLIC_CDP_CLIENT_API_KEY=your-api-key-here
```

## Navigate to your project directory and install dependencies:

```bash
cd your-project-name
npm install
```

:::

## Deploying to Vercel

:::steps

## Install Vercel CLI

```bash
npm install -g vercel
```

## Deploy your project

```bash
vercel
```

Follow the prompts to log in, link your project, and accept defaults.

## Set environment variables

Add these in your Vercel project settings:

| Variable | Description |
| --- | --- |
| NEXT_PUBLIC_CDP_CLIENT_API_KEY | Your CDP Client API Key |
| NEXT_PUBLIC_URL | Deployed app URL |
| NEXT_PUBLIC_IMAGE_URL | Frame image URL (optional) |
| NEXT_PUBLIC_SPLASH_IMAGE_URL | Splash image URL (optional) |
| NEXT_PUBLIC_SPLASH_BACKGROUND_COLOR | Hex color for splash background |

:::

## Testing Your Frame in Warpcast

1. Copy your deployed URL
2. Visit [Warpcast Frames Developer Tools](https://warpcast.com/~/developers/frames) on mobile
3. Paste URL into "Preview Frames"
4. Tap Launch

::::info
Vercel URLs are persistent. Ngrok URLs change each session unless using a paid account.
::::

## Creating the Frame Manifest

Generate the manifest (required for sending notifications):

```bash [Terminal]
npx create-onchain@alpha --generate
```

Connect your Farcaster custody wallet, input your deployed URL, and sign the manifest.

:::warning[Development Pitfall]
With ngrok, you'll need to recreate the manifest each time you restart ngrok.
:::

## CLI Features

The CLI creates an application with:

1. **Frontend and Backend Integration**
   - Setup for frames, webhooks, and notifications
   - Uses upstash/redis for data storage
   - Requires upstash/redis account credentials in .env

2. **Account Association Generation**
   - Generates valid account associations
   - Configures necessary environment variables

3. **.well-known/farcaster.json Configuration**
   - Sets up the required configuration file:

   ```json
   {
     "accountAssociation": {
       "header": "eyJmaWQiOjgxODAyNiwidHlwZSI6ImN1c3RvZHkiLCJrZXkiOiIweDU4YjU1MTNjMzk5OTYzMjU0MjMzMmU0ZTJlRDAyOThFQzFmRjE4MzEifQ",
       "payload": "eyJkb21haW4iOiI4MGI2LTI2MDAtMWYxOC0yNGM5LTYxMDUtNS0wLTQtNzA2Lm5ncm9rLWZyZWUuYXBwIn0",
       "signature": "MHhmOGQ1YzQyMmU3ZTZlMWNhMzU1ZmNmN2ZjYzFmYjMyZWRhZmEyNWU1NjJiMzlhYzE4OWNlMmM5ODU3Y2JjZWViNzlkZTk2ZjhiNTc5NzZjMDM2NzM4Y2UwYjhhOGQxZmMyZDFhYzA2NTdiZTU5N2VhZjFhZDE1ODBmMGQyYjJhODFi"
     },
     "frame": {
       "version": "next",
       "name": "MiniKit",
       "iconUrl": "https://onchainkit.xyz/favicon/48x48.png?v4-19-24",
       "splashImageUrl": "https://onchainkit.xyz/favicon/48x48.png?v4-19-24",
       "splashBackgroundColor": "#000000",
       "homeUrl": "https://your-domain.app/minikit"
     }
   }
   ```

4. **Notification Proxy**
   - Sets up proxy route at `/api/notification`
   - Used by the `useNotification` hook

5. **Webhooks**
   - Implements webhooks with Farcaster key registry verification
   - Handles events like `FRAME_ADDED`

### Demo Application

The CLI creates a demo snake game showcasing:
- Frame adding and wallet connection
- High score tracking with attestations using `<Transaction/>`
- Score display using `<Identity/>` for ENS name resolution
- Notifications for high scores

## Core Components and Hooks

### MiniKitProvider

Set up in `providers.tsx`, this wraps your application to handle initialization and events:

```tsx [app/providers.tsx]
import { MiniKitProvider } from '@coinbase/onchainkit/minikit';

export function Providers(props: { children: ReactNode }) {
  return (
    <MiniKitProvider
      apiKey={process.env.NEXT_PUBLIC_ONCHAINKIT_API_KEY}
      chain={base}
      config={{
        appearance: {
          mode: 'auto',
          theme: 'snake',
          name: process.env.NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME,
          logo: process.env.NEXT_PUBLIC_ICON_URL,
        },
      }}
    >
      {props.children}
    </MiniKitProvider>
  );
}
```

It also sets up wagmi and react-query providers automatically.

#### Provider Props

```tsx
export type MiniKitProviderReact = {
  children: React.ReactNode;
  notificationProxyUrl?: string;
  ...OnchainKitProviderProps
};
```

### useMiniKit

Handles initialization and provides SDK context access:

```tsx [app/page.tsx]
const { setFrameReady, isFrameReady, context } = useMiniKit();

useEffect(() => {
  if (!isFrameReady) {
    setFrameReady();
  }
}, [setFrameReady, isFrameReady]);
```

**Returns:**

```tsx
{
  ready: () => Promise<MiniKitContextType>; // Shows the application
  isReady: boolean; // Ready state
  context: FrameContext | null; // Frame context
  updateClientContext: (params: UpdateClientContextParams) => void;
  notificationProxyUrl: string;
}
```

### Available Hooks

#### useTBADeepLink

Links to Coinbase Wallet TBA features:

```tsx
const openBuyLink = useTBADeepLink('buy');
const openSwapLink = useTBADeepLink('swap');

<button onClick={() => openBuyLink()}>Buy Tokens</button>
```

#### useAddFrame

Adds frame to user's list and returns notification details:

```tsx [app/page.tsx]
const addFrame = useAddFrame()

const handleAddFrame = async () => {
  const result = await addFrame()
  if (result) {
    console.log('Frame added:', result.url, result.token)
  }
}
```

:::warning[Not for Production]
In production, save these tokens in a database for sending notifications.
:::

#### useNotification

Sends notifications to users who added your frame:

```tsx [app/page.tsx]
import {..., useNotification } from '@coinbase/onchainkit/minikit'

const sendNotification = useNotification()

const handleSendNotification = async () => {
  try {
    await sendNotification({
      title: 'New High Score! ðŸŽ‰',
      body: 'Congratulations on achieving a new high score!'
    })
    setTimeout(() => setNotificationSent(false), 30000)
  } catch (error) {
    console.error('Failed to send notification:', error)
  }
}

// Only display for users who added the frame
{context?.client.added && (
  <button
    type="button"
    onClick={handleSendNotification}
    className="cursor-pointer bg-transparent font-semibold text-sm disabled:opacity-50"
  >
    SEND NOTIFICATION
  </button>
)}
```

:::info
Notifications use the `/api/notification` proxy to avoid CORS restrictions.
:::

#### useOpenUrl

Opens external URLs:

```tsx [app/page.tsx]
const openUrl = useOpenUrl()

<button onClick={() => openUrl('https://example.com')}>
  Visit Website
</button>

<footer className="absolute bottom-4 flex items-center w-screen max-w-[520px] justify-center">
  <button
    type="button"
    className="mt-4 px-2 py-1 flex justify-start rounded-2xl font-semibold opacity-40 border border-black text-xs"
    onClick={() => openUrl('https://base.org/builders/minikit')}
    >
    BUILT ON BASE WITH MINIKIT
  </button>
</footer>
```

#### useClose

Closes the frame:

```tsx [app/page.tsx]
import { useMinikit, useAddFrame, useOpenUrl, useClose } from '@coinbase/onchainkit/minikit'

const close = useClose()

<div className="pr-1 justify-end">
  {saveFrameButton}
  <button
    type="button"
    className="cursor-pointer bg-transparent font-semibold text-sm pl-2"
    onClick={close}
    >
    CLOSE
  </button>
</div>
```

#### usePrimaryButton

Adds a button at the bottom of the frame:

```tsx [/app/components/snake.tsx]
import {usePrimaryButton } from '@coinbase/onchainkit/minikit'

usePrimaryButton(
  {text: gameState == GameState.RUNNING ? 'PAUSE GAME' : 'START GAME'},
  () => {
    setGameState(gameState == GameState.RUNNING ? GameState.PAUSED : GameState.RUNNING);
  }
)
```

Note: This takes up space at the bottom of the frame; adjust layout accordingly.

#### useViewProfile

Views user profiles by FID:

```tsx [app/page.tsx]
import { useViewProfile } from '@coinbase/onchainkit/minikit'

const viewProfile = useViewProfile()

const handleViewProfile = () => {
  viewProfile()
}

<button
  type="button"
  onClick={handleViewProfile}
  className="cursor-pointer bg-transparent font-semibold text-sm pl-2"
>
  PROFILE
</button>
```

#### useAuthenticate

Enables Farcaster sign-in:

```tsx
const authenticate = useAuthenticate();

const handleSignIn = async () => {
  const result = await authenticate({
    domain: 'your-domain.com',
    siweUri: 'https://your-domain.com/login'
  });

  if (result) {
    console.log('Authenticated:', result);
  }
};
```

:::warning
Temporarily use [AuthKit](https://docs.farcaster.xyz/auth-kit/) for authentication until our solution resolves current Coinbase Wallet limitations.
:::

## Next Steps

1. Customize the UI and functionality
2. Add features using other MiniKit hooks
3. Deploy to Vercel

## Resources

- [MiniKit Documentation](https://base.org/builderkits/minikit)
- [Farcaster Frames Playground](https://warpcast.com/~/developers/frames)
- [CDP Portal](https://portal.cdp.coinbase.com)
