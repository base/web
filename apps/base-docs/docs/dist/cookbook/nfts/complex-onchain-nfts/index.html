<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script>
    
    <title data-react-helmet="true">Complex Onchain NFTs – Base Docs</title>
    <meta data-react-helmet="true" name="description" content="A tutorial that teaches how to make complex nfts that are procedurally generated and have onchain metadata and images."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Complex Onchain NFTs"/><meta data-react-helmet="true" property="og:url" content="https://docs.base.org"/><meta data-react-helmet="true" property="og:description" content="A tutorial that teaches how to make complex nfts that are procedurally generated and have onchain metadata and images."/><meta data-react-helmet="true" property="og:image" content="/images/base-docs-og.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="twitter:image" content="/images/base-docs-og.png"/>
    <link data-react-helmet="true" rel="icon" href="/favicon.ico" type="image/x-icon"/>
    
    
    <meta property="twitter:title" content="Base | Docs"/><meta property="twitter:image" content="https://docs.base.org/images/base-docs-og.png"/><meta property="twitter:description" content="Explore the documentation for Base, a secure, low-cost, builder-friendly Ethereum L2"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:domain" content="base.org"/><script src="https://www.googletagmanager.com/gtag/js?id=G-TKCM02YFWN" async="" defer=""></script><script id="gtag-init">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TKCM02YFWN');
    </script>
  
    <script type="module" crossorigin src="/assets/index-Dlxm52NL.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-BheZ9r0M.css">
  </head>
  <body>
    <div id="app"><div class="vocs-layout antialiased" style="font-family:CoinbaseSans !important"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/cookbook/nfts/complex-onchain-nfts#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/logo.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/">Overview</a><a data-active="false" class="vocs_Sidebar_item" href="/quickstart">Quickstart</a><a data-active="false" class="vocs_Sidebar_item" href="/chain/bridges-mainnet">Bridges</a><a data-active="false" class="vocs_Sidebar_item" href="/base-services-hub">Service Hub</a><a data-active="false" class="vocs_Sidebar_item" href="https://status.base.org/">Status ↗</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Builder Kits</div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">OnchainKit</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">MiniKit</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item" href="https://docs.cdp.coinbase.com/agentkit/docs/welcome">AgentKit (CDP) ↗</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Blockspace Tools</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="https://docs.cdp.coinbase.com/paymaster/docs/welcome">Paymaster (CDP) ↗</a><a data-active="false" class="vocs_Sidebar_item" href="https://docs.cdp.coinbase.com/appchains/docs/welcome">Appchains ↗</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Identity</div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Smart Wallet</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Basenames</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item" href="https://docs.cdp.coinbase.com/verifications/docs/welcome">Verifications (CDP)↗</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Wallet App</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/wallet-app/mini-apps">Mini Apps</a><a data-active="false" class="vocs_Sidebar_item" href="/wallet-app/getting-started">Getting Started with Mini Apps</a><a data-active="false" class="vocs_Sidebar_item" href="/wallet-app/beta-faq">Coinbase Wallet Beta FAQ</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Chain</div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Flashblocks</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Misc.</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Network Information</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Node Operators</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item" href="/chain/security-council">Security Council</a><a data-active="false" class="vocs_Sidebar_item" href="/chain/block-building">Block Building</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Tools</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Use Cases</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/onboard-any-user">Onboard any user</a><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/accept-crypto-payments">Accept crypto payments</a><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/launch-ai-agents">Launch AI Agents</a><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/onchain-social">Onchain Social</a><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/defi-your-app">DeFi your app</a><a data-active="false" class="vocs_Sidebar_item" href="/use-cases/go-gasless">Go gasless</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Cookbook</div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">By use case</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div><div class="vocs_Sidebar_items vocs_Sidebar_levelInset"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Payments &amp; Commerce</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">NFTs &amp; Digital Assets</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div><div class="vocs_Sidebar_items vocs_Sidebar_levelInset"><a data-active="false" class="vocs_Sidebar_item" href="/cookbook/use-case-guides/creator/nft-minting-with-zora">NFT Minting with Zora</a><a data-active="false" class="vocs_Sidebar_item" href="/cookbook/nfts/simple-onchain-nfts">Simple Onchain NFTs</a><a data-active="false" class="vocs_Sidebar_item" href="/cookbook/nfts/dynamic-nfts">Dynamic NFTs</a><a data-active="true" class="vocs_Sidebar_item" href="/cookbook/nfts/complex-onchain-nfts">Complex Onchain NFTs</a><a data-active="false" class="vocs_Sidebar_item" href="/cookbook/nfts/signature-mint">Signature Mint</a><a data-active="false" class="vocs_Sidebar_item" href="/cookbook/nfts/thirdweb-unreal-nft-items">ThirdWeb Unreal NFT Items</a></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Social</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">DeFi &amp; Financial Tools</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Growth &amp; Distribution</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">By tool</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level vocs_Sidebar_levelCollapsed"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Learn</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level vocs_Sidebar_levelCollapsed"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Buildathons</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Feedback</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="https://discord.com/invite/buildonbase">Get help ↗</a><a data-active="false" class="vocs_Sidebar_item" href="https://hackerone.com/coinbase">Bug bounty ↗</a></div></section></div></nav></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2m7:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/logo.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://discord.com/invite/buildonbase?utm_source=dotorg&amp;utm_medium=nav" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">Get help</a><a class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://base.org" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">base.org</a></ul></div></nav></div><div class="vocs_DesktopTopNav_divider"></div><div class="vocs_DesktopTopNav_group" style="margin-left:-8px;margin-right:-8px"><div class="vocs_DesktopTopNav_item"><a class="vocs_DesktopTopNav_button" href="https://github.com/base" target="_blank" rel="noopener noreferrer"><div aria-label="GitHub" class="vocs_Icon vocs_DesktopTopNav_icon" role="img" style="--vocs_Icon_size:20px"><svg width="100%" height="100%" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></div></a></div><div class="vocs_DesktopTopNav_item"><a class="vocs_DesktopTopNav_button" href="http://x.com/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="X (Twitter)" class="vocs_Icon vocs_DesktopTopNav_icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z" fill="currentColor"></path></svg></div></a></div><div class="vocs_DesktopTopNav_item"><a class="vocs_DesktopTopNav_button" href="https://warpcast.com/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="Warpcast" class="vocs_Icon vocs_DesktopTopNav_icon" role="img" style="--vocs_Icon_size:20px"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Warpcast</title><path fill-rule="evenodd" clip-rule="evenodd" d="M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z" fill="currentColor"></path></svg></div></a></div><div class="vocs_DesktopTopNav_item"><a class="vocs_DesktopTopNav_button" href="https://discord.com/invite/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="Discord" class="vocs_Icon vocs_DesktopTopNav_icon" role="img" style="--vocs_Icon_size:23px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.14 96.36"><title>Discord</title><g id="图层_2" data-name="图层 2"><g id="Discord_Logos" data-name="Discord Logos"><g id="Discord_Logo_-_Large_-_White" data-name="Discord Logo - Large - White"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z" fill="currentColor"></path></g></g></g></svg></div></a></div></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/logo.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://discord.com/invite/buildonbase?utm_source=dotorg&amp;utm_medium=nav" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">Get help</a><a class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://base.org" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">base.org</a></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><a class="vocs_MobileTopNav_navigationItem vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://discord.com/invite/buildonbase?utm_source=dotorg&amp;utm_medium=nav" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" variant="styleless">Get help</a></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rd67:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div><div class="vocs_MobileTopNav_divider"></div><div class="vocs_MobileTopNav_group" style="margin-left:-8px"><a class="vocs_MobileTopNav_button" href="https://github.com/base" target="_blank" rel="noopener noreferrer"><div aria-label="GitHub" class="vocs_Icon vocs_MobileTopNav_icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></div></a><a class="vocs_MobileTopNav_button" href="http://x.com/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="X (Twitter)" class="vocs_Icon vocs_MobileTopNav_icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z" fill="currentColor"></path></svg></div></a><a class="vocs_MobileTopNav_button" href="https://warpcast.com/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="Warpcast" class="vocs_Icon vocs_MobileTopNav_icon" role="img" style="--vocs_Icon_size:18px"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Warpcast</title><path fill-rule="evenodd" clip-rule="evenodd" d="M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z" fill="currentColor"></path></svg></div></a><a class="vocs_MobileTopNav_button" href="https://discord.com/invite/buildonbase" target="_blank" rel="noopener noreferrer"><div aria-label="Discord" class="vocs_Icon vocs_MobileTopNav_icon" role="img" style="--vocs_Icon_size:21px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.14 96.36"><title>Discord</title><g id="图层_2" data-name="图层 2"><g id="Discord_Logos" data-name="Discord Logos"><g id="Discord_Logo_-_Large_-_White" data-name="Discord Logo - Large - White"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z" fill="currentColor"></path></g></g></g></svg></div></a></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3a7:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Complex Onchain NFTs</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rla7:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="complex-onchain-nfts" class="vocs_Heading_slugTarget"></div>Complex Onchain NFTs<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#complex-onchain-nfts"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">Many NFTs are dependent on offchain metadata and images. Some use immutable storage locations, such as <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://ipfs.tech/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">IPFS</a>. Others use traditional web locations, and many of these allow the owner of the contract to modify the URL returned by a contract when a site or user attempts to retrieve the location of the token art and metadata. This power isn&#x27;t inherently bad, because we probably want someone to be able to fix the contract if the storage location goes down. However, it does introduce a requirement to trust the contract owner.</p>
<p class="vocs_Paragraph">Although challenging, it is possible to write a smart contract that contains all the necessary logic and data to generate json metadata and SVG images, entirely onchain. It <strong class="vocs_Strong">will</strong> be expensive to deploy, but will be as cheap as simpler contracts to mint!</p>
<p class="vocs_Paragraph">In this tutorial, we&#x27;ll show you how to do this to create your own fully-onchain art project, similar to our <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/base-org/land-sea-and-sky" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">sample project</a>.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="objectives" class="vocs_Heading_slugTarget"></div>Objectives<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#objectives"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">By the end of this tutorial you should be able to:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Programmatically generate and return json metadata for ERC-721 tokens</li>
<li class="vocs_ListItem">Deterministically construct unique SVG art in a smart contract</li>
<li class="vocs_ListItem">Generate deterministic, pseudorandom numbers</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="prerequisites" class="vocs_Heading_slugTarget"></div>Prerequisites<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#prerequisites"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<h3 class="vocs_H3 vocs_Heading"><div id="erc-721-tokens" class="vocs_Heading_slugTarget"></div>ERC-721 Tokens<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#erc-721-tokens"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">This tutorial assumes that you are able to write, test, and deploy your own ERC-721 tokens using the Solidity programming language. If you need to learn that first, check out our content in <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://base.org/learn" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Base Learn</a> or the sections specific to <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://docs.base.org/learn/erc-721-token/erc-721-standard-video" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">ERC-721 Tokens</a>!</p>
<h3 class="vocs_H3 vocs_Heading"><div id="vector-art" class="vocs_Heading_slugTarget"></div>Vector Art<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#vector-art"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">You&#x27;ll need some familiarity with the SVG art format and a basic level of ability to edit and manipulate vector art. If you don&#x27;t have this, find an artist friend and collaborate!</p>
<h2 class="vocs_H2 vocs_Heading"><div id="creating-the-art-assets" class="vocs_Heading_slugTarget"></div>Creating the Art Assets<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#creating-the-art-assets"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">To start, you&#x27;ll need to build a few vector art assets and mock up an example of what your NFT might look like. Later, you&#x27;ll cut these up and format them in a way that your smart contract will use to assemble unique NFTs for each minter.</p>
<p class="vocs_Paragraph">The mockup needs to have all of the elements you plan to have in the NFT, and you should be able to manually move things around or change colors to make it so that you can create the range of variation you want. For example:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">A gradient sky in which the colors are randomized</li>
<li class="vocs_ListItem">One of three styles of sun, always in the same spot in the upper right corner</li>
<li class="vocs_ListItem">One to five clouds placed randomly in the upper half of the canvas</li>
<li class="vocs_ListItem">A wide mountain ridge that will always be in the middle, but slide side to side to show a different part for each NFT</li>
<li class="vocs_ListItem">An ocean in the foreground that is always the same</li>
</ul>
<p class="vocs_Paragraph">If you are an artist, or are working with one, you can use the vector drawing tool of your choice to assemble your mockup. If not, you can use a number of stock art or AI tool options to assist you. If you do, make sure you understand any relevant laws or terms of service!</p>
<p class="vocs_Paragraph">You can also work from ours: <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/base-org/land-sea-and-sky/tree/master/Final_SVGs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sample Art</a></p>
<p class="vocs_Paragraph">Either way, you should end up with something similar to this:</p>
<p class="vocs_Paragraph"><img src="/images/onchain-generative-nfts/mockup.png" alt="Mockup"/></p>
<h2 class="vocs_H2 vocs_Heading"><div id="the-art-of-making-it-fit" class="vocs_Heading_slugTarget"></div>The Art of Making it Fit<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#the-art-of-making-it-fit"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">You&#x27;ll notice that the SVG is probably way too big to be placed in a smart contract. The example is 103 KB, so you&#x27;ll have to be clever to make this work.</p>
<p class="vocs_Paragraph">You&#x27;ll accomplish this task by splitting each element out of the mockup and deploying them into separate smart contracts. To do so, individually export each element, and make sure that the exported pieces are no bigger than about 15 KB. That way, you&#x27;ll have enough space to fit each piece within the 24KiB limit for compiled bytecode.</p>
<p class="vocs_Paragraph">If you&#x27;re working with the sample, you&#x27;ll end up with individual SVGs for:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Sun 1: 9 KB</li>
<li class="vocs_ListItem">Sun 2: 9 KB</li>
<li class="vocs_ListItem">Sun 3: 9 KB</li>
<li class="vocs_ListItem">Ocean: 17 KB</li>
<li class="vocs_ListItem">Mountain: 14 KB</li>
<li class="vocs_ListItem">Cloud: 6 KB</li>
<li class="vocs_ListItem">Sky: 802 bytes</li>
</ul>
<p class="vocs_Paragraph">If you don&#x27;t have the tools to do this, you can find these files here: <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/base-org/land-sea-and-sky/tree/master/Final_SVGs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sample Art</a></p>
<h2 class="vocs_H2 vocs_Heading"><div id="contract-architecture" class="vocs_Heading_slugTarget"></div>Contract Architecture<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#contract-architecture"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">You&#x27;ll need to build and deploy a number of contracts for this project. They&#x27;ll be organized in this architecture:</p>
<p class="vocs_Paragraph"><img src="/images/onchain-generative-nfts/architecture.png" alt="Architecture"/></p>
<p class="vocs_Paragraph">Deploying this many contracts will have a cost associated with it, but once they&#x27;re deployed, this contract will cost the same as any other NFT contract. Remember, <code class="vocs_Code">pure</code> and <code class="vocs_Code">view</code> functions called outside the blockchain don&#x27;t cost any gas. This means that you can use multiple contracts to assemble a relatively large graphic without additional costs!</p>
<h2 class="vocs_H2 vocs_Heading"><div id="building-the-contracts" class="vocs_Heading_slugTarget"></div>Building the Contracts<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#building-the-contracts"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Create a new project using the toolkit of your choice, and add a contract called <code class="vocs_Code">LandSeaSkyNFT</code>. Import OpenZeppelin&#x27;s ERC-721, inherit from it, and set it up with the constructor, a mint function, and a counter to keep track of the token ID:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> LandSeaSkyNFT</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> is</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ERC721</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> public</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> counter;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    constructor</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">ERC721</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(&quot;Land, Sea, and Sky&quot;, &quot;LSS&quot;) {}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> mint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        counter</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">++</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        _safeMint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">msg.sender</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, counter);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="overriding-the-_baseuri-function" class="vocs_Heading_slugTarget"></div>Overriding the <code class="vocs_Code">_baseURI()</code> Function<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#overriding-the-_baseuri-function"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Normally, you&#x27;d override <code class="vocs_Code">_baseURI()</code> with the base URL for the location you select to keep your NFT metadata. This could be a website, IPFS folder, or many other possible locations.</p>
<p class="vocs_Paragraph">Since this contract will be generating the .json file directly, instead set it to indicate this to the browser:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> _baseURI</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">internal</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> override</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;data:application/json;base64,&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="importing-the-base64-library" class="vocs_Heading_slugTarget"></div>Importing the Base64 Library<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#importing-the-base64-library"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">As indicated above, you&#x27;ll be returning the json metadata in <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://en.wikipedia.org/wiki/Base64" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Base64</a> format. OpenZeppelin has a utility contract to do this. You&#x27;ll also need the <code class="vocs_Code">Strings</code> library. Go ahead and import them:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Base64.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span></code></pre></div></div>
<aside class="vocs_Aside vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">Base64 allows the transport of binary data over the web in a reliable way. It is not a compression algorithm, and actually increased the data size by a 4/3 ratio.</p></aside>
<h3 class="vocs_H3 vocs_Heading"><div id="planning-the-override-for-the-tokenuri-function" class="vocs_Heading_slugTarget"></div>Planning the override for the <code class="vocs_Code">tokenURI()</code> Function<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#planning-the-override-for-the-tokenuri-function"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Next, set up your <code class="vocs_Code">tokenURI</code> function override. You&#x27;ll need to write some other contracts to make this work, but you can write most of the code and stub out a plan for the rest to:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Check and ensure the token ID exists</li>
<li class="vocs_ListItem">Compile the json metadata for the token, including:<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">The <code class="vocs_Code">&quot;name&quot;</code> of the NFT</li>
<li class="vocs_ListItem">A <code class="vocs_Code">&quot;description&quot;</code></li>
<li class="vocs_ListItem">The <code class="vocs_Code">&quot;image&quot;</code></li>
</ul>
</li>
<li class="vocs_ListItem">Base64 encode the above, combine it with the <code class="vocs_Code">_baseURI</code> and return it.</li>
</ul>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> tokenURI</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> override</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  if</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> counter) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    revert</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> InvalidTokenId</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId); </span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// Don&#x27;t forget to add the error above!</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">  string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> json </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> Base64.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encode</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    bytes</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">        abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">          &#x27;{&quot;name&quot;: &quot;Land, Sea, and Sky #: &#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">          Strings.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">          &#x27;&quot;, &quot;description&quot;: &quot;Land, Sea, and Sky is a collection of generative art pieces stored entirely onchain.&quot;, &quot;image&quot;: &quot;data:image/SVG+xml;base64,&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">          &quot;TODO: Build the SVG with the token ID as the seed&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">          &#x27;&quot;}&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">_baseURI</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(), json));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<div class="vocs_Div"><p class="vocs_Paragraph">Getting the quotes and commas correct when the json is broken apart like this is challenging. When debugging, look here first!</p></div>
<h3 class="vocs_H3 vocs_Heading"><div id="test-your-progress" class="vocs_Heading_slugTarget"></div>Test Your Progress<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#test-your-progress"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Test your function by writing a simple test to mint an NFT, then call and log the output of the <code class="vocs_Code">tokenURI</code> function. You should get something similar to:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">string: data:application/json;base64,eyJuYW1lIjogIkxhbmQsIFNlYSwgYW5kIFNreSAjMSIsICJkZXNjcmlwdGlvbiI6ICJMYW5kLCBTZWEsIGFuZCBTa3kgaXMgYSBjb2xsZWN0aW9uIG9mIGdlbmVyYXRpdmUgYXJ0IHBpZWNlcyBzdG9yZWQgZW50aXJlbHkgb25jaGFpbi4iLCAiaW1hZ2UiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxUT0RPOiBCdWlsZCB0aGUgU1ZHIHdpdGggdGhlIHRva2VuIElEIGFzIHRoZSBzZWVkIn0=</span></span></code></pre></div></div>
<p class="vocs_Paragraph">To see if it worked, you&#x27;ll need to use a manual method to decode the base64 data; everything after the comma:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">eyJuYW1lIjogIkxhbmQsIFNlYSwgYW5kIFNreSAjMSIsICJkZXNjcmlwdGlvbiI6ICJMYW5kLCBTZWEsIGFuZCBTa3kgaXMgYSBjb2xsZWN0aW9uIG9mIGdlbmVyYXRpdmUgYXJ0IHBpZWNlcyBzdG9yZWQgZW50aXJlbHkgb25jaGFpbi4iLCAiaW1hZ2UiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxUT0RPOiBCdWlsZCB0aGUgU1ZHIHdpdGggdGhlIHRva2VuIElEIGFzIHRoZSBzZWVkIn0=</span></span></code></pre></div></div>
<p class="vocs_Paragraph">You can use the terminal: <code class="vocs_Code">echo -n &#x27;&lt;string to decode&gt;&#x27; | base64 --decode</code></p>
<p class="vocs_Paragraph">Do so, and you&#x27;ll get:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">{&quot;name&quot;: &quot;Land, Sea, and Sky #: 1&quot;, &quot;description&quot;: &quot;Land, Sea, and Sky is a collection of generative art pieces stored entirely onchain.&quot;, &quot;image&quot;: &quot;data:image/SVG+xml;base64,TODO: Build the SVG with the token ID as the seed&quot;}</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="building-the-svg" class="vocs_Heading_slugTarget"></div>Building the SVG<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#building-the-svg"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Next, you need to build logic to compile a real, working SVG from the pieces you&#x27;ve saved. You&#x27;ll also need to add some variation based on the ID of the NFT.</p>
<h3 class="vocs_H3 vocs_Heading"><div id="svg-renderer-contract" class="vocs_Heading_slugTarget"></div>SVG Renderer Contract<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#svg-renderer-contract"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add a new file and contract called <code class="vocs_Code">SVGRenderer</code>. It doesn&#x27;t need a constructor, but it will need the <code class="vocs_Code">Strings</code> library:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SVGRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Open the exemplar SVG in a code editor, and using it as an example, build out a function that uses <code class="vocs_Code">abi.encodePacked</code> to build everything from the SVG <strong class="vocs_Strong">except</strong> the actual art. That&#x27;s much too big for one contract, so add stubs instead.</p>
<p class="vocs_Paragraph">Depending on the tool you used to make the SVG, there may be unneeded extras you can remove from these lines. You also <strong class="vocs_Strong">don&#x27;t</strong> need the items in <code class="vocs_Code">&lt;defs&gt;</code> or <code class="vocs_Code">&lt;styles&gt;</code>. You&#x27;ll take advantage of the flexibility of the format to include those in the pieces returned by the supporting contract.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;SVG xmlns=&#x27;http://www.w3.org/2000/SVG&#x27; viewBox=&#x27;0 0 1024 1024&#x27;&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the clouds,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the sun,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the land,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the sea,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the background,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;/SVG&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="rendering-the-sea" class="vocs_Heading_slugTarget"></div>Rendering the Sea<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#rendering-the-sea"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">The sea element of this NFT will be the same for all NFTs, so it makes sense to write that contract first. Create it called, <code class="vocs_Code">SeaRenderer</code>, with a function called <code class="vocs_Code">render</code>. The <code class="vocs_Code">&lt;g&gt;</code> element is the root of the different pieces of the SVG, so add that and a stub for the rest.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SeaRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Render the sea</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">The next part is tricky, and a little messy. You&#x27;ll need to combine parts of the individually exported SVG that has the sea art and all of its properties with the position data for this part of the art from the exemplar SVG. You&#x27;ll then need to flatten it to a single line, and add it as a string constant.</p>
<p class="vocs_Paragraph">Start by opening the Ocean SVG. Change the viewBox to <code class="vocs_Code">viewBox=&quot;0 0 1024 1024&quot;</code>. Move the <code class="vocs_Code">&lt;defs&gt;</code> and <code class="vocs_Code">&lt;scripts&gt;</code> tag inside of the <code class="vocs_Code">&lt;g&gt;</code> tag. Open the SVG in the browser to make sure it hasn&#x27;t broken.</p>
<p class="vocs_Paragraph">Next, delete the <code class="vocs_Code">id</code> and <code class="vocs_Code">data-name</code> from the top level <code class="vocs_Code">&lt;g&gt;</code> and experiment with the <code class="vocs_Code">transform=&quot;translate(20,2.5)&quot;</code> property to move the art back down to the bottom of the viewport.</p>
<p class="vocs_Paragraph">With the sample art, <code class="vocs_Code">&lt;g transform=&quot;translate(0,700)&quot;&gt;</code> should work.</p>
<p class="vocs_Paragraph">The last edits you need to make are <strong class="vocs_Strong">critical</strong> - do a find/replace to change all of the <code class="vocs_Code">cls-1</code> and similar classnames, to <code class="vocs_Code">cls-land-1</code>! Otherwise, the classes will override one another and nothing will be the right color. Also find all instances of <code class="vocs_Code">linear-gradient</code> and do the same.</p>
<p class="vocs_Paragraph"><strong class="vocs_Strong">Make sure</strong> you change both the definitions, and where they&#x27;re called!</p>
<p class="vocs_Paragraph">Finally, use the tool of your choice to minify <strong class="vocs_Strong">only</strong> the outermost <code class="vocs_Code">&lt;g&gt;</code> tag and its contents. This will flatten the code to a single line and remove extra empty character spaces. Doing so makes it easier to add to your contract, and makes the data smaller. Add it as a constant string to <code class="vocs_Code">SeaRenderer.sol</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> SVG </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;&lt;g transform=&quot;translate(0,700)&quot;&lt;way more code&gt;&lt;/g&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">You may need to do a find/replace and ensure you&#x27;re using only one type of quote in the SVG.</p>
<p class="vocs_Paragraph">Replace your <code class="vocs_Code">TODO</code> with the constant.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> SVG </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> &lt;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">A very long </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">!&gt;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SeaRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> SVG;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Test this function independently and make sure that if you paste the content inside a set of <code class="vocs_Code">&lt;SVG&gt;</code> tags, it renders as expected!</p>
<h3 class="vocs_H3 vocs_Heading"><div id="calling-searenderer" class="vocs_Heading_slugTarget"></div>Calling SeaRenderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#calling-searenderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Return to <code class="vocs_Code">SVGRenderer.sol</code>. Add an <code class="vocs_Code">interface</code> for the <code class="vocs_Code">SeaRenderer</code>. All of your renderer contracts will have a function called <code class="vocs_Code">render</code> that either takes a <code class="vocs_Code">uint _tokenId</code>, or no arguments, and returns a string. Because of this, you can use a single interface for all the render contracts:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">interface</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Add an instance inside the <code class="vocs_Code">SVGRenderer</code> contract for the <code class="vocs_Code">SeaRenderer</code>, and a constructor that takes an address for the <code class="vocs_Code">SeaRenderer</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">constructor</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _seaRenderer) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  seaRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_seaRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Replace <code class="vocs_Code">// TODO: Add the sea,</code> with a call to your external function.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;SVG xmlns=&#x27;http://www.w3.org/2000/SVG&#x27; viewBox=&#x27;0 0 1024 1024&#x27;&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the clouds,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the sun,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the land,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      seaRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the background,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;/SVG&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="finishing-a-first-pass" class="vocs_Heading_slugTarget"></div>Finishing a First Pass<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#finishing-a-first-pass"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Return to your <code class="vocs_Code">LandSeaSkyNFT</code> contract and add an <code class="vocs_Code">interface</code> for the <code class="vocs_Code">SVGRenderer</code>.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">interface</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Add an instance of it and update the <code class="vocs_Code">constructor</code> to set it:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">ISVGRenderer SVGRenderer;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">constructor(address _SVGRenderer) ERC721(&quot;Land, Sea, and Sky&quot;, &quot;LSS&quot;) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  SVGRenderer = ISVGRenderer(_SVGRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<aside class="vocs_Aside vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">For testing purposes, it may be easier if you add functions to allow you to change these addresses after deployment. But the whole point of all this work is to make immutable, onchain NFTs, so be sure to delete them before you do your real deployment!</p></aside>
<p class="vocs_Paragraph">Finally, swap your <code class="vocs_Code">TODO</code> with a line to <code class="vocs_Code">Base64.encode</code> a call to the renderer:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> json </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> Base64.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encode</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">  bytes</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;{&quot;name&quot;: &quot;Land, Sea, and Sky #: &#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        Strings.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&quot;, &quot;description&quot;: &quot;Land, Sea, and Sky is a collection of generative art pieces stored entirely onchain.&quot;, &quot;image&quot;: &quot;data:image/SVG+xml;base64,&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        Base64.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encode</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">bytes</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(SVGRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(tokenId))),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&quot;}&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="test-deploy" class="vocs_Heading_slugTarget"></div>Test Deploy<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#test-deploy"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Now is a good time to deploy to testnet and see if this first pass is working as expected. If you&#x27;re using <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://docs.base.org/learn/hardhat-deploy/hardhat-deploy-sbs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Hardhat and Hardhat Deploy</a>, you can use this script:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> { HardhatRuntimeEnvironment } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;hardhat/types&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> { DeployFunction } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;hardhat-deploy/types&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> func</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> DeployFunction</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> async</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> function</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70" class="vocs_Span">hre</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> HardhatRuntimeEnvironment</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">deployments</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">getNamedAccounts</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> hre;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> deployments;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">deployer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> getNamedAccounts</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> SeaRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;SeaRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> SVGRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;SVGRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    args: [SeaRenderer.address],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> LandSeaSkyNFT</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;LandSeaSkyNFT&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    args: [SVGRenderer.address],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  await</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> hre.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">run</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;verify:verify&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    address: LandSeaSkyNFT.address,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    constructorArguments: [SVGRenderer.address],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    contract: </span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;contracts/LandSeaSkyNFT.sol:LandSeaSkyNFT&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">};</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> default</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> func;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Deploy the contracts to Base Sepolia and verify them, or at least verify <code class="vocs_Code">LandSeaSkyNFT</code> (the above script will do this).</p>
<p class="vocs_Paragraph">Open the contract in <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sepolia.basescan.org/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Basescan</a>, connect with your wallet, and mint some NFTs.</p>
<p class="vocs_Paragraph"><strong class="vocs_Strong">Wait a few minutes</strong>, then open the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://testnets.opensea.io/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">testnet version of Opensea</a> and look up your contract. It may take several minutes to show up, but when it does, if everything is working you&#x27;ll see NFTs with the ocean part of the art! Neat!</p>
<p class="vocs_Paragraph"><img src="/images/onchain-generative-nfts/first_pass.png" alt="First pass NFT"/></p>
<h2 class="vocs_H2 vocs_Heading"><div id="adding-the-sky-renderer" class="vocs_Heading_slugTarget"></div>Adding the Sky Renderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#adding-the-sky-renderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Great work! Much of the hardest part is done. All you need to do now is add a renderer for each of the other elements, with the twist that you&#x27;ll be doing customization inside the SVGs themselves. You&#x27;ll have to do a little surgery!</p>
<h3 class="vocs_H3 vocs_Heading"><div id="preparing-the-svg" class="vocs_Heading_slugTarget"></div>Preparing the SVG<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#preparing-the-svg"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Open the sky SVG in both an editor, and the browser. As with for the sea, the first step is to change the viewport to 1024x1024, move the <code class="vocs_Code">&lt;defs&gt;</code> and <code class="vocs_Code">&lt;style&gt;</code> elements inside the top-level <code class="vocs_Code">&lt;g&gt;</code>, and transform/translate that group to the correct location (0,0 will work!).</p>
<p class="vocs_Paragraph">Change <code class="vocs_Code">cls-1</code> to <code class="vocs_Code">cls-sky-1</code> in both the definition and where it&#x27;s used. Add <code class="vocs_Code">sky</code> to the <code class="vocs_Code">linear-gradient</code> as well.</p>
<p class="vocs_Paragraph">Delete the data and layer information for this group as well. You&#x27;ll end up with:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">svg</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> xmlns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;http://www.w3.org/2000/SVG&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> viewBox</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;0 0 1024 1024&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">g</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> transform</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;translate(0,0)&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">defs</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">style</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        cls-sky-1 {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">          fill: url(#linear-gradient-sky);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">          stroke-width: 0px;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      &lt;/</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">style</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">linearGradient</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        id</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;linear-gradient-sky&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        x1</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;511.76&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        y1</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;10.19&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        x2</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;512.24&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        y2</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;865.99&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        gradientTransform</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;translate(63.89) scale(.88)&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        gradientUnits</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;userSpaceOnUse&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      &gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">stop</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> offset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;.12&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> stop-color</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;#c391b4&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">stop</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> offset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;.34&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> stop-color</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;#ce9f9b&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">stop</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> offset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;.68&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> stop-color</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;#dfd061&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">stop</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> offset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;.96&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> stop-color</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;#e3f9f7&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      &lt;/</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">linearGradient</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    &lt;/</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">defs</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    &lt;</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">path</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> class</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;cls-sky-1&quot;</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> d</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;M1024,0v768.9H0V0h1024Z&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  &lt;/</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">g</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&lt;/</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span">svg</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">&gt;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">You have some design choices to make here. You could use deterministically chosen, but essentially random colors to make up the gradient. However, doing so will lead to the vast majority of NFTs having truly bizarre colors that don&#x27;t look nice and don&#x27;t look like they belong with the rest of the art.</p>
<p class="vocs_Paragraph">No one wants their sky to be a mix of cyan, teal, maroon, and brown!</p>
<p class="vocs_Paragraph">It might be better to add a gentle modification to the existing gradient colors and range. Start by minifying the top level <code class="vocs_Code">&lt;g&gt;</code> group and contents, then create <strong class="vocs_Strong">two</strong> constant strings, one for everything before the first <code class="vocs_Code">&lt;stop&gt;</code> element, and one for everything after the last <code class="vocs_Code">&lt;stop&gt;</code> element.</p>
<p class="vocs_Paragraph">Neither string should have the <code class="vocs_Code">&lt;stop&gt;</code>s. You&#x27;ll make those next.</p>
<h3 class="vocs_H3 vocs_Heading"><div id="building-the-renderer-contract" class="vocs_Heading_slugTarget"></div>Building the Renderer Contract<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#building-the-renderer-contract"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add a new file and contract called <code class="vocs_Code">SkyRenderer</code>. Add your strings:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> START </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;&lt;g transform=&quot;translate(0,0)&quot;&gt; &lt;defs&gt; &lt;style&gt;.cls-sky-1{fill: url(#linear-gradient-sky); stroke-width: 0px;}&lt;/style&gt; &lt;linearGradient id=&quot;linear-gradient-sky&quot; x1=&quot;511.76&quot; y1=&quot;10.19&quot; x2=&quot;512.24&quot; y2=&quot;865.99&quot; gradientTransform=&quot;translate(63.89) scale(.88)&quot; gradientUnits=&quot;userSpaceOnUse&quot;&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> END </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;&lt;/linearGradient&gt; &lt;/defs&gt; &lt;path class=&quot;cls-sky-1&quot; d=&quot;M1024,0v768.9H0V0h1024Z&quot;/&gt; &lt;/g&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SkyRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> //</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Next, add constants for the existing <code class="vocs_Code">offset</code> and <code class="vocs_Code">stop-color</code> properties:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET1 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;.12&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET2 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;.34&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET3 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;.68&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET4 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;.96&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> COLOR1 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;#c391b4&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> COLOR2 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;#ce9f9b&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> COLOR3 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;#dfd061&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> COLOR4 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;#e3f9f7&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Now, stub out your return for the <code class="vocs_Code">render</code> function. It will use the built in method of using <code class="vocs_Code">abi.encode</code> and casting to <code class="vocs_Code">string</code> to combine all the parts and return them.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      START,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> stop 1,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> stop 2,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> stop 3,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">      // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> stop 4,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      END</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Do the same for a function to <code class="vocs_Code">buildStop</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> _buildStop</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _offset,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _color,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _stopNumber</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    ) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">internal</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&lt;stop offset=&quot;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">        // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span"> tweaked offset,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&quot; stop-color=&quot;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        _color,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&quot;/&gt;&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Now, you just need to figure out how to modify the properties based on the <code class="vocs_Code">_tokenId</code>. It needs to be &quot;random&quot; in the sense that every NFT should be different, but it has to be deterministic, so that you get the same art every time you load the image.</p>
<p class="vocs_Paragraph">First, <strong class="vocs_Strong">subtract 10</strong> from the values and convert them to <code class="vocs_Code">uints</code> <strong class="vocs_Strong">without</strong> decimals in each of your stop constants, and reduce the last to <code class="vocs_Code">80</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET1 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 2</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET2 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 24</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET3 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 58</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> OFFSET4 </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 80</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">You&#x27;ll also need to update the parameter in <code class="vocs_Code">_buildStop</code>.</p>
<p class="vocs_Paragraph">Add a function to <code class="vocs_Code">_buildOffsetValue</code>. This will pick an integer between 0 and 20 for each offset, and add it to the modified offsets you just made. The result will be a change of + or 1 10 for each value (with the last being slightly different to keep it in range):</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> _buildOffsetValue</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _offset,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _stopNumber</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  ) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">internal</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">  bytes32</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> hash</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> keccak256</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_offset, _tokenId, _stopNumber));</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">  uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> rand </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">hash</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">  uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> change </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> rand % </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">; </span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// Produces a number between 0 and 19</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  if</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(change </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">&gt;=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 10</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;.&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        Strings.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_offset </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">+</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> change)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">      return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;.&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;0&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// 9 is .09, not .9</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        Strings.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_offset </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">+</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> change)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">This function uses hashing to create a pseudo-random number with the token id and stop as seeds, guaranteeing a consistent value, unique for each token and each stop within that token. It takes advantage of the way the offset property is interpreted - in this case, <code class="vocs_Code">&quot;.12+.20&quot; == &quot;.32&quot;</code>.</p>
<p class="vocs_Paragraph">Finally, update your <code class="vocs_Code">render</code> function to call <code class="vocs_Code">_buildStop</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      START,</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">      _buildStop</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(OFFSET1, COLOR1, _tokenId, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">1</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">),</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">      _buildStop</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(OFFSET2, COLOR2, _tokenId, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">2</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">),</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">      _buildStop</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(OFFSET3, COLOR3, _tokenId, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">3</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">),</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">      _buildStop</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(OFFSET4, COLOR4, _tokenId, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">4</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      END</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="incorporating-the-sky-renderer" class="vocs_Heading_slugTarget"></div>Incorporating the Sky Renderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#incorporating-the-sky-renderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Return to <code class="vocs_Code">SVGRenderer.sol</code> and add an instance of <code class="vocs_Code">ISVGPartRenderer</code> for the skyRenderer. Add an argument to the <code class="vocs_Code">constructor</code> and initialize it, then call the <code class="vocs_Code">render</code> function in place of your <code class="vocs_Code">TODO</code> for the background.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">interface</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SVGRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  ISVGPartRenderer seaRenderer;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  ISVGPartRenderer skyRenderer;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  constructor</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _seaRenderer, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _skyRenderer) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    seaRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_seaRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    skyRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_skyRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &quot;&lt;SVG xmlns=&#x27;http://www.w3.org/2000/SVG&#x27; viewBox=&#x27;0 0 1024 1024&#x27;&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">        // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the clouds,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">        // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the sun,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">        // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">: Add the land,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        skyRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        seaRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &quot;&lt;/SVG&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Update your deploy script, then deploy and test as before.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> SkyRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;SkyRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> SVGRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;SVGRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  args: [SeaRenderer.address, SkyRenderer.address],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">});</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Test as before. Your NFTs now have the sky!</p>
<h2 class="vocs_H2 vocs_Heading"><div id="adding-the-landrenderer" class="vocs_Heading_slugTarget"></div>Adding the LandRenderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#adding-the-landrenderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Next up is the mountain part of the SVG. For this, you&#x27;ll change the horizontal translation left to right to show a different part of the mountains for each NFT.</p>
<h3 class="vocs_H3 vocs_Heading"><div id="preparing-the-svg-1" class="vocs_Heading_slugTarget"></div>Preparing the SVG<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#preparing-the-svg-1"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Open the mountain SVG in both your browser and the editor. Once again, set the <code class="vocs_Code">viewBox</code> to 1024x1024 and move the <code class="vocs_Code">&lt;defs&gt;</code> and <code class="vocs_Code">&lt;styles&gt;</code> inside the top-level group (<code class="vocs_Code">&lt;g&gt;</code>).</p>
<p class="vocs_Paragraph">Find transform/translate values that first put the mountains so that they are at the bottom, and the left-most portion is shown, then the right-most. <code class="vocs_Code">transform=&quot;translate(-150,350)&quot;</code> and <code class="vocs_Code">transform=&quot;translate(-800,350)&quot;</code> are about right.</p>
<p class="vocs_Paragraph">Don&#x27;t forget to add <code class="vocs_Code">-land</code> to the classnames!</p>
<h3 class="vocs_H3 vocs_Heading"><div id="writing-the-contract" class="vocs_Heading_slugTarget"></div>Writing the Contract<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#writing-the-contract"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add a file and stub for the <code class="vocs_Code">LandRenderer</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> LandRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&lt;g transform=&quot;translate(&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">        // </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">TODO</span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;,300)&quot;&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        END</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Minify the top-level <code class="vocs_Code">&lt;g&gt;</code> element, and add a constant with everything after the opening <code class="vocs_Code">&lt;g&gt;</code> tag. Use similar techniques as before to generate an offset based on the token id, then build the SVG. You&#x27;ll end up with something like this:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> END </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;&lt;long SVG string&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> LandRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">      abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;&lt;g transform=&quot;translate(&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">        _buildOffset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">        &#x27;,300)&quot;&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">        END</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> _buildOffset</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">internal</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    bytes32</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> hash</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> keccak256</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId));</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> rand </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">hash</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> xOffset </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (rand % </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">650</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">+</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 150</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">; </span><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// Produces a number between 150 and 799</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&quot;-&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, Strings.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(xOffset)));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="incorporating-the-landrenderer" class="vocs_Heading_slugTarget"></div>Incorporating the LandRenderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#incorporating-the-landrenderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Update <code class="vocs_Code">SVGRenderer</code>:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">ISVGPartRenderer seaRenderer;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">ISVGPartRenderer skyRenderer;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">ISVGPartRenderer landRenderer;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">constructor</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _seaRenderer, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _skyRenderer, </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _landRenderer) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  seaRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_seaRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  skyRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_skyRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  landRenderer </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_landRenderer);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;SVG xmlns=&#x27;http://www.w3.org/2000/SVG&#x27; viewBox=&#x27;0 0 1024 1024&#x27;&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      skyRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      landRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      seaRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;/SVG&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">And the deploy script:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> LandRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;LandRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> SVGRenderer</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> deploy</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">&#x27;SVGRenderer&#x27;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  from: deployer,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  args: [SeaRenderer.address, SkyRenderer.address, LandRenderer.address],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">});</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Test as before. It&#x27;s starting to look really nice!</p>
<p class="vocs_Paragraph"><img src="/images/onchain-generative-nfts/progress.png" alt="Progress"/></p>
<h2 class="vocs_H2 vocs_Heading"><div id="adding-the-sun-renderer" class="vocs_Heading_slugTarget"></div>Adding the Sun Renderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#adding-the-sun-renderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">The sun renderer will use similar techniques as those you&#x27;ve already incorporated. The sun will be in the same place for all NFTs. Variation will come from each one having only one of the three suns shown in the exemplar art file.</p>
<h3 class="vocs_H3 vocs_Heading"><div id="preparing-the-svgs" class="vocs_Heading_slugTarget"></div>Preparing the SVGs<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#preparing-the-svgs"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">For each of the three sun SVGs:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Change the <code class="vocs_Code">viewBox</code> to 1024x1024</li>
<li class="vocs_ListItem">Move the <code class="vocs_Code">&lt;defs&gt;</code> and <code class="vocs_Code">&lt;styles&gt;</code> into the first group</li>
<li class="vocs_ListItem">Find the correct translation to put the sun in the upper right<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">750, 100 should work with the sample art</li>
</ul>
</li>
<li class="vocs_ListItem">Add <code class="vocs_Code">-sun</code> to the classnames</li>
</ul>
<h3 class="vocs_H3 vocs_Heading"><div id="writing-the-contracts" class="vocs_Heading_slugTarget"></div>Writing the Contracts<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#writing-the-contracts"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">The tricky part here is that you can&#x27;t fit all the suns into one contract. They&#x27;re too big! Instead, split them into three, similar to the original ocean renderer. For example:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#6A737D" class="vocs_Span">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">pragma</span><span style="color:#22863A;--shiki-dark:#85E89D" class="vocs_Span"> solidity</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> ^0.8.20</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;hardhat/console.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &quot;@openzeppelin/contracts/utils/Strings.sol&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> SVG </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span"> &#x27;&lt;long SVG&gt;&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> SunRenderer1</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> pure</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> SVG;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="incorporating-the-sunrenderer" class="vocs_Heading_slugTarget"></div>Incorporating the SunRenderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#incorporating-the-sunrenderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add the three <code class="vocs_Code">SunRenderer</code>s as you have the other rendering contracts. You&#x27;ll have to incorporate this one a little differently. Add a function that picks which <code class="vocs_Code">SunRenderer</code> to call, based on the NFT id.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> pickSunRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">ISVGPartRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    bytes32</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> hash</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> keccak256</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId));</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> rand </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">hash</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> sun </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> rand % </span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">3</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(sun </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">==</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> sunRenderer1;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">else</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> if</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(sun </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">==</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> 1</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> sunRenderer2;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    } </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> sunRenderer3;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  }</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Make sure to put it after <code class="vocs_Code">skyRenderer</code> in the main <code class="vocs_Code">render</code> function!</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0" class="shiki shiki-themes github-light github-dark vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 66 95" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M65.3633 81.6778V24.2559C65.3633 15.9551 61.2617 11.8047 53.0586 11.8047H12.5801C4.377 11.8047 0.324219 15.9551 0.324219 24.2559V81.6778C0.324219 90.0274 4.377 94.1289 12.5801 94.1289H53.0586C61.2617 94.1289 65.3633 90.0274 65.3633 81.6778ZM7.3555 81.5801V24.3536C7.3555 20.8379 9.2598 18.8848 12.9707 18.8848H52.7168C56.3789 18.8848 58.2832 20.8379 58.2832 24.3536V81.5801C58.2832 85.0957 56.3789 87.0977 52.7168 87.0977H12.9707C9.2598 87.0977 7.3555 85.0957 7.3555 81.5801Z" fill="currentColor"></path><path d="M20.9297 21.0821H44.709C47.1016 21.0821 48.5664 19.5684 48.5664 16.9805V12.879C48.5664 10.2911 47.1016 8.77737 44.709 8.77737H41.5352C41.2422 4.28517 37.4824 0.671875 32.8438 0.671875C28.2051 0.671875 24.4453 4.28517 24.1035 8.77737H20.9297C18.5371 8.77737 17.1211 10.2911 17.1211 12.879V16.9805C17.1211 19.5684 18.5371 21.0821 20.9297 21.0821ZM32.8438 12.4395C31.0371 12.4395 29.5234 10.9258 29.5234 9.11918C29.5234 7.31258 31.0371 5.84768 32.8438 5.84768C34.6504 5.84768 36.1152 7.31258 36.1152 9.11918C36.1152 10.9258 34.6504 12.4395 32.8438 12.4395Z" fill="currentColor"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span"> render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> _tokenId) </span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">public</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> view</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">string</span><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span"> memory</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F97583" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#79B8FF" class="vocs_Span">    abi</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">encodePacked</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;SVG xmlns=&#x27;http://www.w3.org/2000/SVG&#x27; viewBox=&#x27;0 0 1024 1024&#x27;&gt;&quot;</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      skyRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">      pickSunRenderer</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId).</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      landRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(_tokenId),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">      seaRenderer.</span><span style="color:#6F42C1;--shiki-dark:#B392F0" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#9ECBFF" class="vocs_Span">      &quot;&lt;/SVG&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">    )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#E1E4E8" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Test it out. You&#x27;ve now got one of three suns in the sky for each NFT!</p>
<h2 class="vocs_H2 vocs_Heading"><div id="adding-the-cloud-renderer" class="vocs_Heading_slugTarget"></div>Adding the Cloud Renderer<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#adding-the-cloud-renderer"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">On your own, try adding the clouds. The clouds renderer should:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Randomly select between one and seven clouds</li>
<li class="vocs_ListItem">Place those clouds randomly on the top half of the canvas</li>
<li class="vocs_ListItem">Be on the layer on top of the sun and sky, but below the sea and mountains</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="conclusion" class="vocs_Heading_slugTarget"></div>Conclusion<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/cookbook/nfts/complex-onchain-nfts#conclusion"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">In this tutorial, you&#x27;ve learned how to take advantage of the fact that offchain calls to your smart contracts don&#x27;t use gas to create a significantly complex system to render complicated and unique NFTs, with the metadata and art existing entirely onchain. You&#x27;ve also explored some techniques for creating deterministic, pseudorandom numbers, and how to use them to add variation to your art. You&#x27;ve dealt with some of the many caveats and quirks of programmatically combining SVG files. Finally, you&#x27;ve practiced building multiple contracts that interact with one another.</p></article><footer class="vocs_Footer"><div class="vocs_Footer_container"></div><footer class="py-8"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex flex-col items-center justify-center space-y-4"><div class="flex items-center space-x-2"><span class="text-zinc-900 dark:text-zinc-100 font-medium">Base Docs</span></div><div class="text-sm text-zinc-600 dark:text-zinc-400">© <!-- -->2025<!-- --> base.org. All rights reserved.</div><div class="flex flex-row space-x-4"><a href="/privacy-policy">Privacy Policy</a><a href="/terms-of-service">Terms of Service</a><a href="/cookie-policy">Cookie Policy</a></div></div></div></footer></footer></div><div data-bottom-observer="true"></div></div><!--$--><!--/$--></div></div>
  </body>
</html>
