import{r as f,j as r,m as k}from"./index-Dlxm52NL.js";import{u as S}from"./useTheme-DG4jZ5Gt.js";import{z as T}from"./constants-cvMn9d8Y.js";import{Z as m,Y as g,c as b,a0 as w,_ as h,a1 as v,$ as D}from"./OnchainKitProvider-BMiQl1rP.js";import{F as L,D as N}from"./FocusTrap-C4EZ6vry.js";import{T as _}from"./TokenRow-9hxCt2AH.js";import{c as A}from"./caretUpSvg-DYRHzkJF.js";import{T as C}from"./TokenImage-C5Bcv8Gy.js";function E({align:t,contentRect:n,triggerRect:e}){if(!e||!n)return 0;switch(t){case"start":return e.left;case"center":return e.left+(e.width-n.width)/2;case"end":return e.right-n.width}}function B({align:t="start",children:n,isOpen:e,offset:s=8,onClose:c,trigger:o,"aria-label":u}){const d=S(),a=f.useRef(null),l=f.useCallback(()=>{if(!(o!=null&&o.current)||!a.current)return;const p=o.current.getBoundingClientRect(),x=a.current.getBoundingClientRect();if(!p||!x)return;const j=E({triggerRect:p,contentRect:x,align:t});a.current.style.top=`${p.bottom+s}px`,a.current.style.left=`${j}px`},[o,s,t]);if(f.useEffect(()=>{if(e)return l(),window.addEventListener("resize",l),window.addEventListener("scroll",l),()=>{window.removeEventListener("resize",l),window.removeEventListener("scroll",l)}},[e,l]),!e)return null;const i=r.jsx("div",{className:m(d,T.dropdown,"pointer-events-none fixed"),"data-portal-origin":"true",children:r.jsx(L,{active:e,children:r.jsx(N,{onDismiss:c,triggerRef:o,children:r.jsx("div",{ref:a,className:m("pointer-events-auto fixed"),role:"listbox","data-testid":"ockDropdownMenu","aria-label":u,children:n})})})});return k.createPortal(i,document.body)}const I=r.jsx("svg",{"data-testid":"ock-caretDownSvg",role:"img","aria-label":"ock-caretDownSvg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M12.95 4.85999L8.00001 9.80999L3.05001 4.85999L1.64001 6.27999L8.00001 12.64L14.36 6.27999L12.95 4.85999Z",className:g.foreground})}),R=f.forwardRef(function({onClick:n,token:e,isOpen:s,className:c},o){return r.jsxs("button",{type:"button","data-testid":"ockTokenSelectButton_Button",className:m(v.default,v.shadow,h.radius,h.lineDefault,"flex w-fit items-center gap-2 px-3 py-1",c),onClick:n,ref:o,children:[e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4",children:r.jsx(C,{token:e,size:16})}),r.jsx("span",{className:m(w.headline,b.foreground),"data-testid":"ockTokenSelectButton_Symbol",children:e.symbol})]}):r.jsx("span",{className:w.headline,children:"Select token"}),r.jsxs("div",{className:"relative flex items-center justify-center",children:[r.jsx("div",{className:"absolute top-0 left-0 h-4 w-4"}),s?A:I]})]})});function z(t,n){return O(t)||F(t,n)||$(t,n)||M()}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(t,n){if(t){if(typeof t=="string")return y(t,n);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(t,n):void 0}}function y(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,s=Array(n);e<n;e++)s[e]=t[e];return s}function F(t,n){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var s,c,o,u,d=[],a=!0,l=!1;try{if(o=(e=e.call(t)).next,n!==0)for(;!(a=(s=o.call(e)).done)&&(d.push(s.value),d.length!==n);a=!0);}catch(i){l=!0,c=i}finally{try{if(!a&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw c}}return d}}function O(t){if(Array.isArray(t))return t}function J({options:t,setToken:n,token:e}){const s=f.useState(!1),c=z(s,2),o=c[0],u=c[1],d=f.useRef(null),a=f.useCallback(()=>{u(!1)},[]),l=f.useCallback(()=>{u(i=>!i)},[]);return r.jsxs("div",{className:"relative max-w-fit shrink-0",children:[r.jsx(R,{ref:d,onClick:l,isOpen:o,token:e}),r.jsx(B,{trigger:d,isOpen:o,onClose:a,align:"end",children:r.jsx("div",{"data-testid":"ockTokenSelectDropdown_List",className:m(h.radius,b.foreground,"flex max-h-80 w-[200px] flex-col overflow-y-hidden","ock-scrollbar"),children:r.jsx("div",{className:"overflow-y-auto",children:t.map(i=>r.jsx(_,{className:m(D.inverse,"px-4 py-2"),token:i,onClick:()=>{n(i),u(!1)}},i.name+i.address))})})})]})}export{J as T};
