var A=e=>{throw TypeError(e)};var S=(e,t,n)=>t.has(e)||A("Cannot "+n);var a=(e,t,n)=>(S(e,t,"read from private field"),n?n.call(e):t.get(e)),v=(e,t,n)=>t.has(e)?A("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),C=(e,t,n,r)=>(S(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),O=(e,t,n)=>(S(e,t,"access private method"),n);import{B as R,aH as k,aI as q,aJ as I,aK as U,aL as L,aM as F,aN as Q,aO as W,aP as B,ak as H,aQ as $,m as J,O as Z,aR as z,Q as G,ai as T,Z as V}from"./OnchainKitProvider-BMiQl1rP.js";import{r as y,j as P}from"./index-Dlxm52NL.js";import{a0 as X,a1 as Y}from"./waitForTransactionReceipt-DqmUmnvq.js";import{d as tt}from"./useAccount-BLyN9GYK.js";class jt extends R{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Et extends R{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}var b,m,h,f,p,w,E,N,et=(N=class extends k{constructor(t,n){super();v(this,p);v(this,b);v(this,m);v(this,h);v(this,f);C(this,b,t),this.setOptions(n),this.bindMethods(),O(this,p,w).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const n=this.options;this.options=a(this,b).defaultMutationOptions(t),q(this.options,n)||a(this,b).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,h),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&I(n.mutationKey)!==I(this.options.mutationKey)?this.reset():((r=a(this,h))==null?void 0:r.state.status)==="pending"&&a(this,h).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=a(this,h))==null||t.removeObserver(this)}onMutationUpdate(t){O(this,p,w).call(this),O(this,p,E).call(this,t)}getCurrentResult(){return a(this,m)}reset(){var t;(t=a(this,h))==null||t.removeObserver(this),C(this,h,void 0),O(this,p,w).call(this),O(this,p,E).call(this)}mutate(t,n){var r;return C(this,f,n),(r=a(this,h))==null||r.removeObserver(this),C(this,h,a(this,b).getMutationCache().build(a(this,b),this.options)),a(this,h).addObserver(this),a(this,h).execute(t)}},b=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakSet,w=function(){var n;const t=((n=a(this,h))==null?void 0:n.state)??U();C(this,m,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},E=function(t){L.batch(()=>{var n,r,s,c,o,u,l,i;if(a(this,f)&&this.hasListeners()){const d=a(this,m).variables,g=a(this,m).context;(t==null?void 0:t.type)==="success"?((r=(n=a(this,f)).onSuccess)==null||r.call(n,t.data,d,g),(c=(s=a(this,f)).onSettled)==null||c.call(s,t.data,null,d,g)):(t==null?void 0:t.type)==="error"&&((u=(o=a(this,f)).onError)==null||u.call(o,t.error,d,g),(i=(l=a(this,f)).onSettled)==null||i.call(l,void 0,t.error,d,g))}this.listeners.forEach(d=>{d(a(this,m))})})},N);function nt(e,t){const n=F(),[r]=y.useState(()=>new et(n,e));y.useEffect(()=>{r.setOptions(e)},[r,e]);const s=y.useSyncExternalStore(y.useCallback(o=>r.subscribe(L.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=y.useCallback((o,u)=>{r.mutate(o,u).catch(X)},[r]);if(s.error&&Y(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:c,mutateAsync:s.mutate}}async function rt(e,t){var r;let n;if(typeof t.connector=="function"?n=e._internal.connectors.setup(t.connector):n=t.connector,n.uid===e.state.current)throw new Q;try{e.setState(l=>({...l,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...c}=t,o=await n.connect(c),u=o.accounts;return n.emitter.off("connect",e._internal.events.connect),n.emitter.on("change",e._internal.events.change),n.emitter.on("disconnect",e._internal.events.disconnect),await((r=e.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),e.setState(l=>({...l,connections:new Map(l.connections).set(n.uid,{accounts:u,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:u,chainId:o.chainId}}catch(s){throw e.setState(c=>({...c,status:c.current?"connected":"disconnected"})),s}}function st(e,t={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:c}=t;return({retryCount:o})=>W({key:n,methods:r,name:s,request:e.request.bind(e),retryCount:t.retryCount??o,retryDelay:c,type:"custom"})}async function At(e,t={}){let n;if(t.connector){const{connector:i}=t;if(e.state.status==="reconnecting"&&!i.getAccounts&&!i.getChainId)throw new B({connector:i});const[d,g]=await Promise.all([i.getAccounts().catch(K=>{if(t.account===null)return[];throw K}),i.getChainId()]);n={accounts:d,chainId:g,connector:i}}else n=e.state.connections.get(e.state.current);if(!n)throw new H;const r=t.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new $({connectionChainId:n.chainId,connectorChainId:s});const c=n.connector;if(c.getClient)return c.getClient({chainId:r});const o=J(t.account??n.accounts[0]);if(o&&(o.address=Z(o.address)),t.account&&!n.accounts.some(i=>i.toLowerCase()===o.address.toLowerCase()))throw new z({address:o.address,connector:c});const u=e.chains.find(i=>i.id===r),l=await n.connector.getProvider({chainId:r});return G({account:o,chain:u,name:"Connector Client",transport:i=>st(l)({...i,retryCount:0})})}let j=[];function x(e){const t=e.connectors;return tt(j,t)?j:(j=t,t)}function ot(e,t){const{onChange:n}=t;return e._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function ct(e){return{mutationFn(t){return rt(e,t)},mutationKey:["connect"]}}function it(e={}){const t=T(e);return y.useSyncExternalStore(n=>ot(t,{onChange:n}),()=>x(t),()=>x(t))}function It(e={}){const{mutation:t}=e,n=T(e),r=ct(n),{mutate:s,mutateAsync:c,...o}=nt({...t,...r});return y.useEffect(()=>n.subscribe(({status:u})=>u,(u,l)=>{l==="connected"&&u==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:c,connectors:it({config:n})}}const at=["error","code","message"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(r){ut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ut(e,t,n){return(t=lt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){var t=ht(e,"string");return typeof t=="symbol"?t:t+""}function ht(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dt(e,t){if(e==null)return{};var n,r,s=ft(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ft(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yt(e,t){return gt(e)||mt(e,t)||bt(e,t)||pt()}function pt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e,t){if(e){if(typeof e=="string")return D(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,c,o,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,t!==0)for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(d){i=!0,s=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw s}}return u}}function gt(e){if(Array.isArray(e))return e}function Pt(e){const t=y.useState(e),n=yt(t,2),r=n[0],s=n[1],c=y.useCallback(o=>{s(u=>{const l=u.statusName==="error"?(i=>(i.error,i.code,i.message,dt(i,at)))(u.statusData):u.statusData;return{statusName:o.statusName,statusData:M(M({},l),o.statusData)}})},[]);return[r,c]}function xt(e){var t,n;return!!(((t=e==null?void 0:e.cause)==null?void 0:t.name)==="UserRejectedRequestError"||(n=e==null?void 0:e.shortMessage)!=null&&n.includes("User rejected the request."))}function _t({className:e}){return P.jsx("div",{className:"flex h-full items-center justify-center","data-testid":"ockSpinner",children:P.jsx("div",{className:V("animate-spin border-2 border-gray-200 border-t-3","rounded-full border-t-gray-400 px-2.5 py-2.5",e)})})}export{jt as A,_t as S,nt as a,Et as b,Pt as c,At as g,xt as i,It as u};
