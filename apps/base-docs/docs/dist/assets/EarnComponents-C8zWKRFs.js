import{r as y,j as s}from"./index-Dlxm52NL.js";import{u as me}from"./useValue-BadCClMc.js";import{ai as ze,Z as f,$ as j,c as A,a0 as I,S as R,au as G,Y as K,_ as C,ad as fe,aw as D}from"./OnchainKitProvider-BMiQl1rP.js";import{u as Ke}from"./useTheme-DG4jZ5Gt.js";import{_ as Ye,h as Y,$ as Je}from"./waitForTransactionReceipt-DqmUmnvq.js";import{f as Xe,a as et,u as tt,s as nt}from"./useChainId-d5iqIE3x.js";import{r as at}from"./getSwapErrorCode-Rcq4QZsj.js";import{u as st,a as rt,i as it}from"./useGetTokenBalance-D84Q7gP2.js";import{p as be,P as he}from"./Popover-WpjJ--IT.js";import{b as ot,C as Te}from"./ConnectWallet-BZ56ys6q.js";import{c as ut}from"./Spinner-DJZ1Iw6h.js";import{u as J}from"./useAccount-BLyN9GYK.js";import{S as O,f as lt}from"./FundCardPaymentMethodSelectorToggle-Bf15ueU3.js";import{T as ae}from"./TokenImage-C5Bcv8Gy.js";import{T as dt}from"./TextInput-QLQFuuli.js";import{T as xe,a as ve}from"./Transaction-BX8KSxqx.js";import"./attestations-CryG6VVa.js";import"./useIcon-C51nxPJS.js";import{A as F}from"./App-D6lIgqXE.js";function pt(e,n={}){return{async queryFn({queryKey:t}){var l;const a=[],r=t[1].contracts.length;for(let o=0;o<r;o++){const d=t[1].contracts[o],c=((l=n.contracts)==null?void 0:l[o]).abi;a.push({...d,abi:c})}const{scopeKey:i,...u}=t[1];return at(e,{...u,contracts:a})},queryKey:yt(n)}}function yt(e={}){const n=[];for(const t of e.contracts??[]){const{abi:a,...r}=t;n.push({...r,chainId:r.chainId??e.chainId})}return["readContracts",Xe({...e,contracts:n})]}function ct(e={}){const{contracts:n=[],query:t={}}=e,a=ze(e),r=et({config:a}),i=pt(a,{...e,chainId:r}),u=y.useMemo(()=>{let l=!1;for(const o of n){const{abi:d,address:c,functionName:m}=o;if(!d||!c||!m){l=!1;break}l=!0}return!!(l&&(t.enabled??!0))},[n,t.enabled]);return tt({...i,...t,enabled:u,structuralSharing:t.structuralSharing??nt})}function mt(e,n){return Tt(e)||ht(e,n)||bt(e,n)||ft()}function ft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e,n){if(e){if(typeof e=="string")return se(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?se(e,n):void 0}}function se(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function ht(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function Tt(e){if(Array.isArray(e))return e}const we=y.createContext(void 0);function xt({children:e,defaultValue:n}){const t=y.useState(n),a=mt(t,2),r=a[0],i=a[1],u=me({selectedTab:r,setSelectedTab:i});return s.jsx(we.Provider,{value:u,children:e})}function X(){const e=y.useContext(we);if(!e)throw new Error("useTabsContext must be used within an TabsProvider");return e}function vt({children:e,defaultValue:n,className:t}){return s.jsx(xt,{defaultValue:n,children:s.jsx("div",{"data-testid":"ockTabs",className:f("flex flex-col",t),children:e})})}function re({value:e,children:n,className:t,"aria-label":a,onClick:r}){const i=X(),u=i.selectedTab,l=i.setSelectedTab,o=u===e,d=y.useCallback(()=>{l(e),r==null||r()},[e,l,r]);return s.jsx("button",{className:f(I.headline,o?A.inverse:A.foreground,o?j.primary:j.default,"w-1/2 text-center","cursor-pointer px-3 py-2","focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ock-text-foreground)] focus-visible:ring-inset",t),onClick:d,"aria-label":a,"aria-selected":o,"aria-controls":`${e}-panel`,role:"tab",type:"button",tabIndex:o?0:-1,children:n})}function wt({className:e,children:n}){const t=X(),a=t.setSelectedTab,r=y.useCallback(i=>{var T,p;const u=i.target,l=Array.from(((T=u.parentElement)==null?void 0:T.querySelectorAll('[role="tab"]'))||[]),o=l.indexOf(u);if(o===-1)return;let d;switch(i.key){case"ArrowRight":d=(o+1)%l.length;break;case"ArrowLeft":d=(o-1+l.length)%l.length;break;default:return}const c=l[d];c.focus();const m=(p=c.getAttribute("aria-controls"))==null?void 0:p.replace("-panel","");m&&a(m),i.preventDefault()},[a]);return s.jsx("div",{className:f("flex overflow-hidden",e),role:"tablist","aria-orientation":"horizontal",onKeyDown:r,children:n})}function ie({children:e,value:n,className:t}){return X().selectedTab!==n?null:s.jsx("div",{className:t,role:"tabpanel","aria-labelledby":`${n}-panel`,children:e})}const $=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"morpho",type:"address"},{internalType:"uint256",name:"initialTimelock",type:"uint256"},{internalType:"address",name:"_asset",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AboveMaxTimelock",type:"error"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"AddressInsufficientBalance",type:"error"},{inputs:[],name:"AllCapsReached",type:"error"},{inputs:[],name:"AlreadyPending",type:"error"},{inputs:[],name:"AlreadySet",type:"error"},{inputs:[],name:"BelowMinTimelock",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"DuplicateMarket",type:"error"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"}],name:"ERC2612ExpiredSignature",type:"error"},{inputs:[{internalType:"address",name:"signer",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC2612InvalidSigner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"assets",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"ERC4626ExceededMaxDeposit",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"ERC4626ExceededMaxMint",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"ERC4626ExceededMaxRedeem",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"assets",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"ERC4626ExceededMaxWithdraw",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"InconsistentAsset",type:"error"},{inputs:[],name:"InconsistentReallocation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"currentNonce",type:"uint256"}],name:"InvalidAccountNonce",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"InvalidMarketRemovalNonZeroCap",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"InvalidMarketRemovalNonZeroSupply",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"InvalidMarketRemovalTimelockNotElapsed",type:"error"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[],name:"MarketNotCreated",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"MarketNotEnabled",type:"error"},{inputs:[],name:"MathOverflowedMulDiv",type:"error"},{inputs:[],name:"MaxFeeExceeded",type:"error"},{inputs:[],name:"MaxQueueLengthExceeded",type:"error"},{inputs:[],name:"NoPendingValue",type:"error"},{inputs:[],name:"NonZeroCap",type:"error"},{inputs:[],name:"NotAllocatorRole",type:"error"},{inputs:[],name:"NotCuratorNorGuardianRole",type:"error"},{inputs:[],name:"NotCuratorRole",type:"error"},{inputs:[],name:"NotEnoughLiquidity",type:"error"},{inputs:[],name:"NotGuardianRole",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"PendingCap",type:"error"},{inputs:[],name:"PendingRemoval",type:"error"},{inputs:[{internalType:"uint8",name:"bits",type:"uint8"},{internalType:"uint256",name:"value",type:"uint256"}],name:"SafeCastOverflowedUintDowncast",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"SupplyCapExceeded",type:"error"},{inputs:[],name:"TimelockNotElapsed",type:"error"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"UnauthorizedMarket",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[],name:"ZeroFeeRecipient",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newTotalAssets",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feeShares",type:"uint256"}],name:"AccrueInterest",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"assets",type:"uint256"},{indexed:!1,internalType:"uint256",name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"suppliedAssets",type:"uint256"},{indexed:!1,internalType:"uint256",name:"suppliedShares",type:"uint256"}],name:"ReallocateSupply",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"withdrawnAssets",type:"uint256"},{indexed:!1,internalType:"uint256",name:"withdrawnShares",type:"uint256"}],name:"ReallocateWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"}],name:"RevokePendingCap",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"}],name:"RevokePendingGuardian",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"}],name:"RevokePendingMarketRemoval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"}],name:"RevokePendingTimelock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"cap",type:"uint256"}],name:"SetCap",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newCurator",type:"address"}],name:"SetCurator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"SetFee",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newFeeRecipient",type:"address"}],name:"SetFeeRecipient",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"address",name:"guardian",type:"address"}],name:"SetGuardian",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"allocator",type:"address"},{indexed:!1,internalType:"bool",name:"isAllocator",type:"bool"}],name:"SetIsAllocator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newSkimRecipient",type:"address"}],name:"SetSkimRecipient",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"Id[]",name:"newSupplyQueue",type:"bytes32[]"}],name:"SetSupplyQueue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint256",name:"newTimelock",type:"uint256"}],name:"SetTimelock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"Id[]",name:"newWithdrawQueue",type:"bytes32[]"}],name:"SetWithdrawQueue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Skim",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"cap",type:"uint256"}],name:"SubmitCap",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newGuardian",type:"address"}],name:"SubmitGuardian",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!0,internalType:"Id",name:"id",type:"bytes32"}],name:"SubmitMarketRemoval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newTimelock",type:"uint256"}],name:"SubmitTimelock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"updatedTotalAssets",type:"uint256"}],name:"UpdateLastTotalAssets",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"assets",type:"uint256"},{indexed:!1,internalType:"uint256",name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DECIMALS_OFFSET",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MORPHO",outputs:[{internalType:"contract IMorpho",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"loanToken",type:"address"},{internalType:"address",name:"collateralToken",type:"address"},{internalType:"address",name:"oracle",type:"address"},{internalType:"address",name:"irm",type:"address"},{internalType:"uint256",name:"lltv",type:"uint256"}],internalType:"struct MarketParams",name:"marketParams",type:"tuple"}],name:"acceptCap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"acceptGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"acceptTimelock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"Id",name:"",type:"bytes32"}],name:"config",outputs:[{internalType:"uint184",name:"cap",type:"uint184"},{internalType:"bool",name:"enabled",type:"bool"},{internalType:"uint64",name:"removableAt",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"curator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"},{internalType:"address",name:"receiver",type:"address"}],name:"deposit",outputs:[{internalType:"uint256",name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"fee",outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"guardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAllocator",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastTotalAssets",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"maxDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"maxMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"maxRedeem",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"address",name:"receiver",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"Id",name:"",type:"bytes32"}],name:"pendingCap",outputs:[{internalType:"uint192",name:"value",type:"uint192"},{internalType:"uint64",name:"validAt",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingGuardian",outputs:[{internalType:"address",name:"value",type:"address"},{internalType:"uint64",name:"validAt",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingTimelock",outputs:[{internalType:"uint192",name:"value",type:"uint192"},{internalType:"uint64",name:"validAt",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"}],name:"previewMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"loanToken",type:"address"},{internalType:"address",name:"collateralToken",type:"address"},{internalType:"address",name:"oracle",type:"address"},{internalType:"address",name:"irm",type:"address"},{internalType:"uint256",name:"lltv",type:"uint256"}],internalType:"struct MarketParams",name:"marketParams",type:"tuple"},{internalType:"uint256",name:"assets",type:"uint256"}],internalType:"struct MarketAllocation[]",name:"allocations",type:"tuple[]"}],name:"reallocate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"redeem",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"revokePendingCap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"revokePendingGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"Id",name:"id",type:"bytes32"}],name:"revokePendingMarketRemoval",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"revokePendingTimelock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newCurator",type:"address"}],name:"setCurator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFee",type:"uint256"}],name:"setFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newFeeRecipient",type:"address"}],name:"setFeeRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAllocator",type:"address"},{internalType:"bool",name:"newIsAllocator",type:"bool"}],name:"setIsAllocator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newSkimRecipient",type:"address"}],name:"setSkimRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"Id[]",name:"newSupplyQueue",type:"bytes32[]"}],name:"setSupplyQueue",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"skim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"skimRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"loanToken",type:"address"},{internalType:"address",name:"collateralToken",type:"address"},{internalType:"address",name:"oracle",type:"address"},{internalType:"address",name:"irm",type:"address"},{internalType:"uint256",name:"lltv",type:"uint256"}],internalType:"struct MarketParams",name:"marketParams",type:"tuple"},{internalType:"uint256",name:"newSupplyCap",type:"uint256"}],name:"submitCap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newGuardian",type:"address"}],name:"submitGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"loanToken",type:"address"},{internalType:"address",name:"collateralToken",type:"address"},{internalType:"address",name:"oracle",type:"address"},{internalType:"address",name:"irm",type:"address"},{internalType:"uint256",name:"lltv",type:"uint256"}],internalType:"struct MarketParams",name:"marketParams",type:"tuple"}],name:"submitMarketRemoval",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newTimelock",type:"uint256"}],name:"submitTimelock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"supplyQueue",outputs:[{internalType:"Id",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"supplyQueueLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"timelock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAssets",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"indexes",type:"uint256[]"}],name:"updateWithdrawQueue",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"withdraw",outputs:[{internalType:"uint256",name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"withdrawQueue",outputs:[{internalType:"Id",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawQueueLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],At="0xBAa5CC21fd487B8Fcc2F632f3F4E8D37262a0842";function gt(e){const n=e.netApyWithoutRewards,t=e.rewards.reduce((r,i)=>r+i.supplyApr,0);return e.netApy-(n+t)}const St=`query($address: String!) {
    vaultByAddress(address: $address, chainId: ${R.id} ) {
        address
        symbol
        name
        creationBlockNumber
        creationTimestamp
        creatorAddress
        whitelisted
        asset {
          id
          address
          decimals
          symbol
        }
        chain {
          id
          network
        }
        liquidity {
          underlying
        }
        state {
          id
          apy
          netApy
          netApyWithoutRewards
          totalAssets
          totalAssetsUsd
          fee
          timelock
          rewards {
            amountPerSuppliedToken
            supplyApr
            yearlySupplyTokens
            asset {
              address
              name
              decimals
            }
        }
      }
    }
  }`;async function jt(e){const t=await(await fetch("https://blue-api.morpho.org/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:St,variables:{address:e}})})).json(),a=t.data,r=t.errors;if(r!=null&&r.some(i=>i.status==="BAD_USER_INPUT"))throw new Error("Vault not found. Ensure the address is a valid Morpho vault on Base.");if(r&&(r==null?void 0:r.length)>0)throw new Error("Error fetching Morpho vault data. Please try again later.");return a.vaultByAddress}function ee({vaultAddress:e,recipientAddress:n}){var b,x,N,E;const t=ct({contracts:[{abi:$,address:e,functionName:"asset",chainId:R.id},{abi:$,address:e,functionName:"name",chainId:R.id},{abi:$,address:e,functionName:"decimals",chainId:R.id}],query:{enabled:!!e}}),a=t.data,r=t.status,i=a==null?void 0:a[0].result,u=a==null?void 0:a[1].result,l=a==null?void 0:a[2].result,o=st({abi:$,address:e,functionName:"maxWithdraw",args:[n],chainId:R.id,query:{enabled:!!e&&!!n}}),d=o.data,c=o.status,m=o.refetch,T=Ye({queryKey:["morpho-apy",e],queryFn:()=>jt(e)}),p=T.data,h=T.error,_=p!=null&&p.state?gt(p==null?void 0:p.state):0,g=d&&(p!=null&&p.asset.decimals)?G(d,p==null?void 0:p.asset.decimals):void 0,M=p!=null&&p.state.totalAssets&&p.asset.decimals?G(BigInt(p==null?void 0:p.state.totalAssets),p.asset.decimals):void 0,w=p!=null&&p.liquidity.underlying&&p.asset.decimals?G(BigInt(p==null?void 0:p.liquidity.underlying),p.asset.decimals):void 0;return{status:r,error:h,balance:g,balanceStatus:c,refetchBalance:m,asset:{address:i,symbol:p==null?void 0:p.symbol,decimals:p==null?void 0:p.asset.decimals},vaultName:u,vaultDecimals:l,totalApy:(b=p==null?void 0:p.state)==null?void 0:b.netApy,nativeApy:(x=p==null?void 0:p.state)==null?void 0:x.netApyWithoutRewards,vaultFee:(N=p==null?void 0:p.state)==null?void 0:N.fee,deposits:M,liquidity:w,rewards:[{asset:At,assetName:"MORPHO",apy:_},...((E=p==null?void 0:p.state)==null?void 0:E.rewards.map(B=>({asset:B.asset.address,assetName:B.asset.name,apy:B.supplyApr})))||[]]}}function Ct({vaultAddress:e,tokenAddress:n,amount:t,recipientAddress:a}){const r=Y({abi:Je,functionName:"approve",args:[e,t]}),i=Y({abi:$,functionName:"deposit",args:[t,a]});return[{to:n,data:r},{to:e,data:i}]}function Mt({vaultAddress:e,recipientAddress:n,amount:t}){const a=ee({vaultAddress:e,recipientAddress:n}),r=a.asset;if(!r||!r.decimals||!n)return{calls:[]};const i=be(t,r.decimals);return{calls:Ct({recipientAddress:n,vaultAddress:e,tokenAddress:r.address,amount:i})}}function Nt({address:e,symbol:n,name:t,decimals:a}){const r=ot.find(i=>i.address===e);if(r)return r;if(n&&t&&a)return{address:e,name:t,symbol:n,decimals:a,image:null,chainId:R.id}}function kt({vaultAddress:e,amount:n,recipientAddress:t}){const a=Y({abi:$,functionName:"withdraw",args:[n,t,t]});return[{to:e,data:a}]}function _t({vaultAddress:e,amount:n,recipientAddress:t,tokenDecimals:a}){const r=ee({vaultAddress:e,recipientAddress:t}),i=r.asset,u=r.balance,l=r.vaultDecimals,o=Number(n)>Number(u);if(!i||u===void 0||!l||!t||o||a===void 0)return{calls:[]};const d=be(n,a);return{calls:kt({recipientAddress:t,vaultAddress:e,amount:d})}}function Z(e,n){return $t(e)||Rt(e,n)||Et(e,n)||It()}function It(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(e,n){if(e){if(typeof e=="string")return oe(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oe(e,n):void 0}}function oe(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function Rt(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function $t(e){if(Array.isArray(e))return e}const Ae=y.createContext(void 0);function Dt({vaultAddress:e,children:n,isSponsored:t,onError:a,onStatus:r,onSuccess:i}){if(!e)throw new Error("vaultAddress is required. For a list of vaults, see: https://app.morpho.org/base/earn");const u=ut({statusName:"init",statusData:null}),l=Z(u,2),o=l[0],d=l[1],c=J(),m=c.address,T=y.useState(""),p=Z(T,2),h=p[0],_=p[1],g=y.useState(""),M=Z(g,2),w=M[0],b=M[1];y.useEffect(()=>{var k,ne;o.statusName==="error"&&(a==null||a(o.statusData)),(o==null?void 0:o.statusName)==="success"&&(i==null||i((ne=(k=o==null?void 0:o.statusData)==null?void 0:k.transactionReceipts)==null?void 0:ne[0])),r==null||r(o)},[o,r,a,i]);const x=ee({vaultAddress:e,recipientAddress:m}),N=x.asset,E=x.balance,B=x.balanceStatus,ke=x.refetchBalance,_e=x.totalApy,Ie=x.nativeApy,Ee=x.vaultFee,Re=x.vaultName,$e=x.deposits,De=x.liquidity,Oe=x.rewards,Be=x.error,S=N?Nt({address:N.address,symbol:N.symbol,name:N.symbol,decimals:N.decimals}):void 0,H=rt(m,S),Q=H.convertedBalance,We=H.status,Pe=H.refetch,Fe=Mt({vaultAddress:e,amount:w,recipientAddress:m}),Le=Fe.calls,Ve=_t({vaultAddress:e,amount:h,recipientAddress:m,tokenDecimals:S==null?void 0:S.decimals}),Ue=Ve.calls,qe=y.useCallback(async k=>{d({statusName:"amountChange",statusData:{amount:k,token:S}}),b(k)},[d,S]),He=y.useCallback(async k=>{d({statusName:"amountChange",statusData:{amount:k,token:S}}),_(k)},[d,S]),Qe=y.useMemo(()=>w?Number(w)<=0?"Must be greater than 0":Number(w)>Number(Q)?"Amount exceeds the balance":null:null,[w,Q]),Ge=y.useMemo(()=>h?Number(h)===0?"Must be greater than 0":Number(h)>Number(E)?"Amount exceeds the balance":null:null,[h,E]),Ze=me({error:Be,recipientAddress:m,vaultAddress:e,vaultToken:S,vaultName:Re,deposits:$e,liquidity:De,depositedBalance:E,depositedBalanceStatus:B,refetchDepositedBalance:ke,depositAmount:w,setDepositAmount:qe,depositAmountError:Qe,withdrawAmount:h,setWithdrawAmount:He,withdrawAmountError:Ge,walletBalance:Q,walletBalanceStatus:We,refetchWalletBalance:Pe,apy:_e,nativeApy:Ie,vaultFee:Ee,rewards:Oe,interestEarned:"",withdrawCalls:Ue,depositCalls:Le,lifecycleStatus:o,updateLifecycleStatus:d,isSponsored:t});return s.jsx(Ae.Provider,{value:Ze,children:n})}function v(){const e=y.useContext(Ae);if(!e)throw new Error("useEarnContext must be used within an EarnProvider");return e}function P(e,n,t="standard"){var o;if(e==="0")return e;const a=Number(e),r=a%1!==0,i=((o=e.split(".")[1])==null?void 0:o.length)||0,u=i>n?Math.trunc(a*10**n)/10**n:a;return new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:r?Math.min(n,i):0,notation:t}).format(u)}const Ot=s.jsxs("svg",{"data-testid":"ock-etherscanSvg",role:"img","aria-label":"Etherscan",width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("title",{children:"Etherscan"}),s.jsx("path",{d:"M2.4981 5.70643C2.4981 5.42947 2.72562 5.20195 3.0021 5.20195H3.85218C4.12914 5.20195 4.36626 5.42947 4.36626 5.71651V8.92243C4.46514 8.89267 4.5837 8.86291 4.72242 8.83315C4.9101 8.78371 5.04882 8.61571 5.04882 8.41747V4.43971C5.04882 4.16275 5.27634 3.92515 5.5629 3.92515H6.41298C6.68994 3.92515 6.92706 4.15267 6.92706 4.43971V8.13091C6.92706 8.13091 7.1349 8.04163 7.34226 7.95283C7.50066 7.88371 7.59954 7.73539 7.59954 7.55683V3.15379C7.59954 2.87683 7.82706 2.63923 8.10402 2.63923H8.9541C9.23106 2.63923 9.45858 2.86675 9.45858 3.15379V6.78547C10.1901 6.25123 10.9418 5.60803 11.5351 4.83619C11.7131 4.60867 11.7626 4.31155 11.6637 4.03459C10.576 0.907872 7.15554 -0.754848 4.03122 0.333792C0.906903 1.42243 -0.753897 4.84579 0.333303 7.97299C0.451863 8.32915 0.610263 8.66563 0.797943 8.99203C0.946263 9.24931 1.22322 9.39763 1.51986 9.36787C1.67826 9.35779 1.87602 9.33811 2.12274 9.30835C2.34018 9.28867 2.49858 9.10051 2.49858 8.88259L2.4981 5.70643Z",className:K.primary}),s.jsx("path",{d:"M2.47852 10.8519C5.15788 12.8012 8.90524 12.2074 10.8526 9.52613C11.5942 8.49701 11.9993 7.26005 11.9993 5.99381C11.9993 5.85509 11.9892 5.71685 11.9796 5.57812C9.79516 8.85317 5.75116 10.3868 2.47852 10.8519Z",className:K.primary})]}),ge=s.jsxs("svg",{"data-testid":"ock-infoSvg",role:"img","aria-label":"ock-infoSvg",width:"100%",height:"100%",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("title",{children:"Info"}),s.jsx("path",{d:"M5 10C7.7625 10 10 7.7625 10 5C10 2.2375 7.7625 0 5 0C2.2375 0 0 2.2375 0 5C0 7.7625 2.2375 10 5 10ZM4.58333 2.08333H5.41667V2.91667H4.58333V2.08333ZM4.58333 3.75H5.41667V7.91667H4.58333V3.75Z",className:K.foreground})]});function Bt(e,n){return Lt(e)||Ft(e,n)||Pt(e,n)||Wt()}function Wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e,n){if(e){if(typeof e=="string")return ue(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ue(e,n):void 0}}function ue(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function Ft(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function Lt(e){if(Array.isArray(e))return e}function z({label:e,value:n}){return s.jsxs("div",{className:"flex items-center justify-between gap-8",children:[s.jsx("div",{children:e}),s.jsx("div",{className:"font-semibold",children:n})]})}function Vt(){const e=y.useState(!1),n=Bt(e,2),t=n[0],a=n[1],r=y.useRef(null),i=y.useRef(null),u=v(),l=u.vaultToken,o=u.vaultName,d=u.deposits,c=u.liquidity,m=u.vaultAddress;return!l||!o?s.jsx(O,{className:"!rounded-full h-7 min-w-28"}):s.jsxs("div",{ref:i,className:f(I.label1,A.foregroundMuted,j.alternate,"flex items-center justify-center gap-2 rounded-full p-1 px-3"),"data-testid":"ock-vaultDetails",children:[s.jsx(ae,{token:l,size:16}),s.jsx("span",{className:"max-w-24 truncate",title:o,children:o}),s.jsx("button",{ref:r,type:"button","data-testid":"ock-vaultDetailsButton",className:f("size-3 [&_path]:fill-[var(--ock-icon-color-foreground-muted)] [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-[var(--ock-icon-color-foreground)]",t&&"[&_path]:fill-[var(--ock-icon-color-foreground)]"),onClick:()=>a(!t),children:ge}),s.jsx(he,{isOpen:t,onClose:()=>a(!1),position:"bottom",align:"start",trigger:r,anchor:i.current,offset:4,children:s.jsxs("div",{className:f(j.default,A.foreground,C.defaultActive,j.default,"flex min-w-40 flex-col gap-3 rounded-lg border p-3 text-sm","fade-in animate-in duration-200"),children:[s.jsx("div",{className:"font-semibold",children:o}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(z,{label:"Token",value:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ae,{token:l,size:16}),s.jsx("span",{className:"max-w-24 truncate",children:l.symbol})]})}),d?s.jsx(z,{label:"Total deposits",value:`${P(d,1,"compact")} ${l.symbol}`}):null,c?s.jsx(z,{label:"Liquidity",value:`${P(c,1,"compact")} ${l.symbol}`}):null]}),s.jsxs("a",{href:`https://basescan.org/address/${m}`,target:"_blank",rel:"noopener noreferrer",className:f(A.primary,"flex max-w-fit items-center gap-1 hover:opacity-80"),"data-testid":"ock-vaultDetailsBaseScanLink",children:[s.jsx("div",{children:"View on BaseScan"}),s.jsx("div",{className:"h-3 w-3",children:Ot})]})]})})]})}function W(e,n=2){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:n,maximumFractionDigits:n}).format(e)}function Ut(e,n){return Gt(e)||Qt(e,n)||Ht(e,n)||qt()}function qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(e,n){if(e){if(typeof e=="string")return le(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?le(e,n):void 0}}function le(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function Qt(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function Gt(e){if(Array.isArray(e))return e}function Zt(){const e=v(),n=e.rewards,t=e.nativeApy,a=e.vaultToken,r=e.vaultFee;return s.jsxs("div",{className:f(A.foregroundMuted,C.defaultActive,j.default,"fade-in flex min-w-52 animate-in flex-col gap-2 rounded-lg border p-3 text-sm duration-200"),children:[t?s.jsxs("div",{className:"flex items-center justify-between gap-1","data-testid":"ock-earnNativeApy",children:[s.jsx("div",{children:a==null?void 0:a.symbol}),s.jsx("div",{className:"font-semibold",children:W(t)})]}):null,n==null?void 0:n.map(i=>s.jsxs("div",{className:"flex items-center justify-between gap-1","data-testid":"ock-earnRewards",children:[s.jsx("div",{children:i.assetName}),s.jsx("div",{className:"font-semibold",children:W(i.apy)})]},i.asset)),r&&t?s.jsxs("div",{className:"flex items-center justify-between gap-1","data-testid":"ock-earnPerformanceFee",children:[s.jsxs("div",{children:["Perf. Fee"," ",s.jsxs("span",{className:"text-xs",children:["(",W(r,0),")"]})]}),s.jsxs("div",{className:"font-semibold",children:["-",W(r*t)]})]}):null]})}function zt(){const e=y.useState(!1),n=Ut(e,2),t=n[0],a=n[1],r=y.useRef(null),i=y.useRef(null),u=v(),l=u.apy;return l?s.jsxs("div",{ref:i,className:f(I.label1,A.foregroundMuted,j.alternate,"flex items-center justify-center gap-1 rounded-full p-1 px-3"),"data-testid":"ock-yieldDetails",children:[`APY ${W(Number(P(l.toString(),4)))}`,s.jsx("button",{ref:r,type:"button","data-testid":"ock-apyInfoButton",className:f("size-3 [&_path]:fill-[var(--ock-icon-color-foreground-muted)] [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-[var(--ock-icon-color-foreground)]",t&&"[&_path]:fill-[var(--ock-icon-color-foreground)]"),onClick:()=>a(!t),children:ge}),s.jsx(he,{isOpen:t,onClose:()=>a(!1),position:"bottom",align:"end",trigger:r,anchor:i.current,offset:4,children:s.jsx(Zt,{})})]}):s.jsx(O,{className:"!rounded-full h-7 min-w-28"})}function L({className:e}){const n=v(),t=n.error;return t?s.jsxs("div",{className:f("flex w-full flex-col gap-1 text-sm",A.error),children:[s.jsx("div",{className:"font-semibold",children:"Error fetching vault details"}),s.jsx("div",{className:"text-xs",children:t.message})]}):s.jsxs("div",{"data-testid":"ockEarnDetails",className:f(C.radius,"flex w-full items-center justify-between gap-4",e),children:[s.jsx(Vt,{}),s.jsx(zt,{})]})}function Se({className:e,disabled:n,value:t,onChange:a,"aria-label":r}){return s.jsx("div",{"data-testid":"ockEarnAmountInput",className:f("flex flex-col",e),children:s.jsx(dt,{className:f(I.base,A.foreground,"w-full border-none bg-transparent text-5xl","leading-none outline-none"),placeholder:"0.0",value:lt(t),onChange:a,inputValidator:it,disabled:n,"aria-label":r})})}function je({className:e}){const n=v(),t=n.depositAmount,a=n.setDepositAmount;return s.jsx(Se,{className:e,value:t,onChange:a,"aria-label":"Deposit Amount"})}function Ce({className:e,onActionPress:n,title:t,subtitle:a,showAction:r=!1}){return s.jsxs("div",{className:f(j.alternate,C.radius,"flex items-center justify-between gap-4 p-3 px-4",e),"data-testid":"ockEarnBalance",children:[s.jsxs("div",{className:f("flex flex-col",A.foreground),children:[s.jsx("div",{className:I.headline,children:t}),s.jsx("div",{className:f(I.label2,A.foregroundMuted),children:a})]}),r&&s.jsx("button",{onClick:n,className:f(I.label2,A.primary),type:"button","aria-label":"Use max",children:"Use max"})]})}function Me({className:e}){const n=J(),t=n.address,a=v(),r=a.setDepositAmount,i=a.vaultToken,u=a.walletBalance,l=a.walletBalanceStatus,o=y.useCallback(()=>{u&&r(u)},[u,r]),d=y.useMemo(()=>u?P(u.toString(),6):"0",[u]),c=y.useMemo(()=>t?i?l==="pending"?s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{className:"!bg-[var(--ock-bg-alternate-active)] h-6 w-12"}),s.jsx("span",{children:i==null?void 0:i.symbol})]}):`${d} ${i==null?void 0:i.symbol}`:s.jsx(O,{className:f("!bg-[var(--ock-bg-alternate-active)] h-6 w-24")}):"Wallet not connected",[d,i,t,l]),m=y.useMemo(()=>t?"Available to deposit":"Connect wallet to deposit",[t]);return s.jsx(Ce,{className:e,title:c,subtitle:m,onActionPress:o,showAction:!!u})}function Kt(e,n){return en(e)||Xt(e,n)||Jt(e,n)||Yt()}function Yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jt(e,n){if(e){if(typeof e=="string")return de(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?de(e,n):void 0}}function de(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function Xt(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function en(e){if(Array.isArray(e))return e}const tn=e=>{const n=y.useState(null),t=Kt(n,2),a=t[0],r=t[1],i=y.useRef(!1),u=y.useRef(!1),l=fe(),o=l.sendAnalytics,d=v(),c=d.vaultAddress,m=d.vaultToken,T=d.recipientAddress,p=d.depositAmount,h=y.useMemo(()=>({amount:Number(p)||Number(e),address:T??"",tokenAddress:(m==null?void 0:m.address)??"",vaultAddress:c}),[e,p,T,m==null?void 0:m.address,c]);return y.useEffect(()=>{a==="buildingTransaction"&&(i.current=!1,o(D.EarnDepositInitiated,h)),a==="success"&&!i.current&&(i.current=!0,o(D.EarnDepositSuccess,h)),a==="error"&&!u.current&&(u.current=!0,o(D.EarnDepositFailure,h))},[a,h,o]),{setTransactionState:r}};function nn(e,n){return on(e)||rn(e,n)||sn(e,n)||an()}function an(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sn(e,n){if(e){if(typeof e=="string")return pe(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pe(e,n):void 0}}function pe(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function rn(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function on(e){if(Array.isArray(e))return e}function te({className:e}){const n=v(),t=n.recipientAddress,a=n.vaultToken,r=n.depositCalls,i=n.depositAmount,u=n.setDepositAmount,l=n.depositAmountError,o=n.updateLifecycleStatus,d=n.refetchWalletBalance,c=n.isSponsored,m=y.useState(""),T=nn(m,2),p=T[0],h=T[1],_=tn(p),g=_.setTransactionState,M=y.useCallback(b=>{g(b.statusName),b.statusName==="transactionPending"&&o({statusName:"transactionPending"}),(b.statusName==="transactionLegacyExecuted"||b.statusName==="success"||b.statusName==="error")&&o(b)},[o,g]),w=y.useCallback(b=>{b.transactionReceipts[0]&&b.transactionReceipts[0].status==="success"&&(i&&h(i),u(""),d())},[i,u,d]);return t?s.jsx(xe,{className:e,calls:r,onStatus:M,onSuccess:w,isSponsored:c,resetAfter:3e3,children:s.jsx(ve,{text:l??"Deposit",successOverride:{text:`Deposited ${p} ${a==null?void 0:a.symbol}`},disabled:!!l||!i})}):s.jsx(Te,{className:f("w-full",e),text:"Connect to deposit"})}function Ne({children:e,className:n}){return s.jsx("div",{"data-testid":"ockEarnCard",className:f(C.default,"flex flex-col gap-8 border-t p-4",j.default,n),children:e})}function un(){return s.jsxs(s.Fragment,{children:[s.jsx(L,{}),s.jsx(je,{}),s.jsx(Me,{}),s.jsx(te,{className:"-mt-4 h-12"})]})}function V({children:e=s.jsx(un,{}),className:n}){return s.jsx(Ne,{className:n,children:e})}function ln({className:e}){const n=v(),t=n.withdrawAmount,a=n.setWithdrawAmount;return s.jsx(Se,{className:e,value:t,onChange:a,"aria-label":"Withdraw Amount"})}function dn({className:e}){const n=v(),t=n.depositedBalance,a=n.depositedBalanceStatus,r=n.setWithdrawAmount,i=n.vaultToken,u=J(),l=u.address,o=y.useCallback(()=>{t&&r(t)},[t,r]),d=y.useMemo(()=>t?P(t.toString(),4):"0",[t]),c=y.useMemo(()=>l?i?a==="pending"?s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{className:"!bg-[var(--ock-bg-alternate-active)] h-6 w-12"}),s.jsx("span",{children:i==null?void 0:i.symbol})]}):`${d} ${i==null?void 0:i.symbol}`:s.jsx(O,{className:"h-6 w-24"}):"Wallet not connected",[d,i,l,a]),m=y.useMemo(()=>l?"Available to withdraw":"Connect wallet to withdraw",[l]);return s.jsx(Ce,{className:e,title:c,subtitle:m,onActionPress:o,showAction:d!=="0"})}function pn(e,n){return fn(e)||mn(e,n)||cn(e,n)||yn()}function yn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cn(e,n){if(e){if(typeof e=="string")return ye(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ye(e,n):void 0}}function ye(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function mn(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function fn(e){if(Array.isArray(e))return e}const bn=e=>{const n=y.useState(null),t=pn(n,2),a=t[0],r=t[1],i=y.useRef(!1),u=y.useRef(!1),l=fe(),o=l.sendAnalytics,d=v(),c=d.vaultAddress,m=d.vaultToken,T=d.recipientAddress,p=d.withdrawAmount,h=y.useMemo(()=>({amount:Number(p)||Number(e),address:T??"",tokenAddress:(m==null?void 0:m.address)??"",vaultAddress:c}),[p,e,T,m==null?void 0:m.address,c]);return y.useEffect(()=>{a==="buildingTransaction"&&(i.current=!1,o(D.EarnWithdrawInitiated,h)),a==="success"&&!i.current&&(i.current=!0,o(D.EarnWithdrawSuccess,h)),a==="error"&&!u.current&&(u.current=!0,o(D.EarnWithdrawFailure,h))},[a,h,o]),{setTransactionState:r}};function hn(e,n){return wn(e)||vn(e,n)||xn(e,n)||Tn()}function Tn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xn(e,n){if(e){if(typeof e=="string")return ce(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ce(e,n):void 0}}function ce(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function vn(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var a,r,i,u,l=[],o=!0,d=!1;try{if(i=(t=t.call(e)).next,n!==0)for(;!(o=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);o=!0);}catch(c){d=!0,r=c}finally{try{if(!o&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw r}}return l}}function wn(e){if(Array.isArray(e))return e}function An({className:e}){const n=v(),t=n.recipientAddress,a=n.withdrawCalls,r=n.withdrawAmount,i=n.setWithdrawAmount,u=n.updateLifecycleStatus,l=n.refetchDepositedBalance,o=n.withdrawAmountError,d=n.vaultToken,c=n.isSponsored,m=y.useState(""),T=hn(m,2),p=T[0],h=T[1],_=bn(p),g=_.setTransactionState,M=y.useCallback(b=>{g(b.statusName),b.statusName==="transactionPending"&&u({statusName:"transactionPending"}),(b.statusName==="transactionLegacyExecuted"||b.statusName==="success"||b.statusName==="error")&&u(b)},[u,g]),w=y.useCallback(b=>{b.transactionReceipts[0]&&b.transactionReceipts[0].status==="success"&&(r&&h(r),i(""),l())},[i,l,r]);return t?s.jsx(xe,{className:e,calls:a,onStatus:M,onSuccess:w,isSponsored:c,resetAfter:3e3,children:s.jsx(ve,{text:o??"Withdraw",successOverride:{text:`Withdrew ${p} ${d==null?void 0:d.symbol}`},disabled:!!o||!r})}):s.jsx(Te,{className:f("w-full",e),text:"Connect to withdraw"})}function gn(){return s.jsxs(s.Fragment,{children:[s.jsx(L,{}),s.jsx(ln,{}),s.jsx(dn,{}),s.jsx(An,{className:"-mt-4 h-12"})]})}function Sn({children:e=s.jsx(gn,{}),className:n}){return s.jsx(Ne,{className:n,children:e})}function jn(){const e=v(),n=e.refetchWalletBalance,t=e.refetchDepositedBalance;return s.jsxs(vt,{defaultValue:"deposit",children:[s.jsxs(wt,{children:[s.jsx(re,{value:"deposit",onClick:n,className:"rounded-tl-[calc(var(--ock-border-radius)_-_1px)]",children:"Deposit"}),s.jsx(re,{value:"withdraw",onClick:t,className:"rounded-tr-[calc(var(--ock-border-radius)_-_1px)]",children:"Withdraw"})]}),s.jsx(ie,{value:"deposit",className:f(C.lineDefault,"!border-l-0 !border-b-0 !border-r-0"),children:s.jsx(V,{})}),s.jsx(ie,{value:"withdraw",className:f(C.lineDefault,"!border-l-0 !border-b-0 !border-r-0"),children:s.jsx(Sn,{})})]})}function U({children:e=s.jsx(jn,{}),className:n,vaultAddress:t,isSponsored:a,onError:r,onStatus:i,onSuccess:u}){const l=Ke();return s.jsx(Dt,{vaultAddress:t,isSponsored:a,onError:r,onStatus:i,onSuccess:u,children:s.jsx("div",{className:f(l,"flex w-[375px] flex-col overflow-hidden",C.radius,C.lineDefault,n),children:e})})}const q="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A";function Gn(){return s.jsx(F,{children:s.jsx(U,{vaultAddress:q})})}function Zn(){return s.jsx(F,{children:s.jsxs(U,{vaultAddress:q,children:[s.jsx("div",{className:"flex justify-center bg-[var(--ock-bg-primary)] py-2 text-[var(--ock-text-inverse)]",children:"Custom header"}),s.jsx(V,{}),s.jsx("div",{className:"flex justify-center bg-[var(--ock-bg-primary)] py-2 text-[var(--ock-text-inverse)]",children:"Custom footer"})]})})}function zn(){return s.jsx(F,{children:s.jsx(U,{vaultAddress:q,children:s.jsxs(V,{children:[s.jsx(L,{}),s.jsx(Me,{}),s.jsx(je,{className:"border-2 border-green-400"}),s.jsx(te,{})]})})})}const Cn=["0.1","1","10"];function Mn(){const{depositAmount:e,setDepositAmount:n}=v();return s.jsxs(V,{children:[s.jsx(L,{}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Cn.map(t=>{const a=t===e;return s.jsx("button",{type:"button",onClick:()=>n(t),className:`rounded-md px-4 py-2 ${a?"bg-[var(--ock-bg-primary)] text-[var(--ock-text-inverse)]":"bg-[var(--ock-bg-secondary)] text-[var(--ock-text-primary)]"}`,children:t},t)})}),s.jsx(te,{})]})}function Kn(){return s.jsx(F,{children:s.jsx(U,{vaultAddress:q,children:s.jsx(Mn,{})})})}export{Gn as E,Kn as P,zn as R,Zn as a};
