import{r as s,j as h}from"./index-Dlxm52NL.js";function m({children:a,disableEscapeKey:f=!1,disableOutsideClick:o=!1,onDismiss:n,triggerRef:u,preventTriggerEvents:i=!1}){const E=s.useRef(null);return s.useEffect(()=>{if(o&&f)return;const t=e=>{i&&(e.preventDefault(),e.stopPropagation())},r=e=>{var c;return(c=E.current)==null?void 0:c.contains(e)},l=e=>{var p;if(o||!(e.target instanceof Node))return;const c=e.target;if((p=u==null?void 0:u.current)!=null&&p.contains(c)){t(e);return}r(c)||n==null||n()},d=e=>{!f&&e.key==="Escape"&&(n==null||n())};return document.addEventListener("pointerdown",l,!0),document.addEventListener("keydown",d),()=>{document.removeEventListener("pointerdown",l,!0),document.removeEventListener("keydown",d)}},[o,f,n,u,i]),h.jsx("div",{"data-testid":"ockDismissableLayer",ref:E,children:a})}const y='button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])';function x({active:a=!0,children:f}){const o=s.useRef(null),n=s.useRef(null);s.useEffect(()=>{if(a){if(n.current=document.activeElement,o.current){const t=o.current.querySelector(y);t==null||t.focus()}return()=>{var t;(t=n.current)==null||t.focus()}}},[a]);const u=()=>{var t;return(t=o.current)==null?void 0:t.querySelectorAll(y)},i=(t,r)=>{const l=r[0],d=r[r.length-1],e=document.activeElement===l,c=document.activeElement===d;t.shiftKey&&e?(t.preventDefault(),d.focus()):!t.shiftKey&&c&&(t.preventDefault(),l.focus())},E=t=>{if(!a||t.key!=="Tab")return;const r=u();r!=null&&r.length&&i(t,r)};return h.jsx("div",{"data-testid":"ockFocusTrap",onKeyDown:E,ref:o,children:f})}export{m as D,x as F};
