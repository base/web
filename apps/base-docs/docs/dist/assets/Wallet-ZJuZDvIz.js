import{ai as nt,Z as p,au as rt,c as k,a0 as _,_ as A,S as ot,ad as z,ay as Te,ao as ce,a1 as $,$ as E,Y as H,ae as Xe,az as be,G as en,aA as et,av as ue,al as pt}from"./OnchainKitProvider-BMiQl1rP.js";import{r as u,j as o,m as Nn}from"./index-Dlxm52NL.js";import{u as tn}from"./useIsMounted-oytDHuHo.js";import{u as Kn,a as Gn,g as Qn,i as mt,f as Yn,c as Zn,p as qn,O as zn,b as Jn,d as Xn,j as nn,F as ht,s as er,e as tr,h as rn}from"./isApplePaySupported-CKnrYHmE.js";import{u as ge}from"./useTheme-DG4jZ5Gt.js";import{A as at,N as st,i as yt,c as nr,m as rr,f as bt}from"./Name-BQXefeTI.js";import{G as or,C as it,a as ar,d as V,W as sr,f as ir}from"./ConnectWallet-BZ56ys6q.js";import{a as lr}from"./attestations-CryG6VVa.js";import{z as Ve}from"./constants-cvMn9d8Y.js";import{a as cr,c as on,i as ur,S as lt}from"./Spinner-DJZ1Iw6h.js";import{b as We,t as _e,u as dr,a as fr,f as pr,g as an,c as Se,S as ct,d as mr,e as hr,h as Ce,C as yr,i as br,j as xr,A as gr,F as Sr,k as Cr,l as vr}from"./FundCardPaymentMethodSelectorToggle-Bf15ueU3.js";import{d as sn,u as J}from"./useAccount-BLyN9GYK.js";import{T as ln}from"./TokenImage-C5Bcv8Gy.js";import{T as ut}from"./TextInput-QLQFuuli.js";import{b as jr,c as wr,u as cn,t as un}from"./useIcon-C51nxPJS.js";import{u as Ne}from"./useOnchainKit-BS9QuBF4.js";import{F as dn,D as fn}from"./FocusTrap-C4EZ6vry.js";import{c as Ar,A as pn}from"./Address-Db7MZz8P.js";import{F as mn,g as xt,T as _r,S as ae,L as kr,U as Tr}from"./getSwapErrorCode-Rcq4QZsj.js";import{u as xe}from"./useValue-BadCClMc.js";import{i as hn}from"./useGetTokenBalance-D84Q7gP2.js";import{T as Or}from"./TokenChip-DXi-Bogr.js";import{T as Fr}from"./TokenSelectDropdown-xGJCx3bS.js";import{P as Ir,p as dt}from"./Popover-WpjJ--IT.js";import{T as Pr,S as yn,E as Dr}from"./errorSvg-CqKVj3B9.js";import{T as Rr,u as Mr,a as Er}from"./Transaction-BX8KSxqx.js";import{T as Lr,a as $r,b as Br}from"./TransactionStatus-aSJkH5zK.js";import{a as Wr}from"./useChainId-d5iqIE3x.js";import{h as Ur,$ as Hr}from"./waitForTransactionReceipt-DqmUmnvq.js";import{o as Vr}from"./getWindowDimensions-iG_J0Zn9.js";import{u as Nr}from"./useIsWalletACoinbaseSmartWallet-CaXUzJZY.js";import{C as Kr}from"./closeSvg--Ik2tSBz.js";import{I as Gr,E as Qr}from"./Identity-DbNDIy-p.js";async function Yr(e,t={}){var s,i;let n;if(t.connector)n=t.connector;else{const{connections:a,current:l}=e.state,c=a.get(l);n=c==null?void 0:c.connector}const r=e.state.connections;n&&(await n.disconnect(),n.emitter.off("change",e._internal.events.change),n.emitter.off("disconnect",e._internal.events.disconnect),n.emitter.on("connect",e._internal.events.connect),r.delete(n.uid)),e.setState(a=>{if(r.size===0)return{...a,connections:new Map,current:null,status:"disconnected"};const l=r.values().next().value;return{...a,connections:new Map(r),current:l.connector.uid}});{const a=e.state.current;if(!a)return;const l=(s=e.state.connections.get(a))==null?void 0:s.connector;if(!l)return;await((i=e.storage)==null?void 0:i.setItem("recentConnectorId",l.id))}}let Me=[];function tt(e){const t=[...e.state.connections.values()];return e.state.status==="reconnecting"||sn(Me,t)?Me:(Me=t,t)}function Zr(e,t){const{onChange:n}=t;return e.subscribe(()=>tt(e),n,{equalityFn:sn})}function qr(e){return{mutationFn(t){return Yr(e,t)},mutationKey:["disconnect"]}}function zr(e={}){const t=nt(e);return u.useSyncExternalStore(n=>Zr(t,{onChange:n}),()=>tt(t),()=>tt(t))}function bn(e={}){const{mutation:t}=e,n=nt(e),r=qr(n),{mutate:s,mutateAsync:i,...a}=cr({...t,...r});return{...a,connectors:zr({config:n}).map(l=>l.connector),disconnect:s,disconnectAsync:i}}const Jr=["token","onClick","onActionPress","actionText","classNames","aria-label"];function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gt(Object(n),!0).forEach(function(r){Xr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xr(e,t,n){return(t=eo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e){var t=to(e,"string");return typeof t=="symbol"?t:t+""}function to(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function no(e,t){if(e==null)return{};var n,r,s=ro(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ro(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function St(e){let t=e.token,n=e.onClick,r=e.onActionPress,s=e.actionText,i=s===void 0?"Max":s,a=e.classNames,l=e["aria-label"],c=no(e,Jr);return n?o.jsxs("div",{className:"relative",children:[o.jsx("button",{type:"button","aria-label":l??`${t.name} token balance`,onClick:()=>n(t),className:p("flex w-full items-center justify-start gap-4 px-2 py-1",a==null?void 0:a.container),"data-testid":"ockTokenBalanceButton",children:o.jsx(Ct,Ye({token:t,classNames:a,onActionPress:r},c))}),r&&o.jsx(vt,{actionText:i,onActionPress:r,className:a==null?void 0:a.action})]}):o.jsxs("div",{className:p("flex w-full items-center justify-start gap-4 px-2 py-1",a==null?void 0:a.container),"data-testid":"ockTokenBalance",children:[o.jsx(Ct,Ye(Ye({token:t},c),{},{classNames:a})),r&&o.jsx(vt,{actionText:i,onActionPress:r,className:a==null?void 0:a.action})]})}function Ct({token:e,subtitle:t,showImage:n=!0,onActionPress:r,tokenSize:s=40,classNames:i}){var c;const a=u.useMemo(()=>We({amount:e.fiatBalance,currency:"USD"}),[e.fiatBalance]),l=u.useMemo(()=>_e(rt(BigInt(e.cryptoBalance),e.decimals),3),[e.cryptoBalance,e.decimals]);return o.jsxs("div",{className:"grid w-full grid-cols-[2.5rem_1fr_auto] items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10",children:n&&o.jsx(ln,{token:e,size:s})}),o.jsxs("div",{className:"flex min-w-0 flex-col text-left",children:[o.jsx("span",{className:p(_.headline,k.foreground,"overflow-hidden text-ellipsis whitespace-nowrap",i==null?void 0:i.tokenName),children:(c=e.name)==null?void 0:c.trim()}),o.jsx("span",{className:p(_.label2,k.foregroundMuted,i==null?void 0:i.tokenValue),children:`${l} ${e.symbol} ${t??""}`})]}),o.jsx("div",{className:"text-right",children:!r&&o.jsx("span",{className:p(_.label2,k.foregroundMuted,"whitespace-nowrap",i==null?void 0:i.fiatValue),children:a})})]})}function vt({actionText:e,onActionPress:t,className:n}){return o.jsx("button",{type:"button","data-testid":"ockTokenBalanceAction","aria-label":e,onClick:t,className:p(_.label2,k.primary,A.radius,"cursor-pointer p-0.5 font-bold","border border-transparent hover:border-[--ock-line-primary]","-translate-y-1/2 absolute top-1/2 right-2",n),children:e})}function ie(e,t){return io(e)||so(e,t)||ao(e,t)||oo()}function oo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ao(e,t){if(e){if(typeof e=="string")return jt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}function jt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function so(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function io(e){if(Array.isArray(e))return e}const lo=e=>{const t=u.useState(""),n=ie(t,2),r=n[0],s=n[1],i=u.useState(""),a=ie(i,2),l=a[0],c=a[1],d=u.useState(),f=ie(d,2),h=f[0],m=f[1],y=u.useState(""),g=ie(y,2),b=g[0],x=g[1],v=u.useState(""),w=ie(v,2),F=w[0],j=w[1],S=u.useState(),T=ie(S,2),U=T[0],C=T[1],L=u.useState(!1),D=ie(L,2),P=D[0],M=D[1],N=u.useState(!1),Z=ie(N,2),q=Z[0],K=Z[1],B=Kn({address:e,fromToken:h,toToken:U}),G=B.fromBalanceString,Q=B.fromTokenBalanceError,O=B.toBalanceString,I=B.toTokenBalanceError,fe=B.fromTokenResponse,X=B.toTokenResponse,je=xe({balance:G,balanceResponse:fe,amount:r,setAmount:s,amountUSD:l,setAmountUSD:c,token:h,setToken:m,loading:q,setLoading:K,error:Q}),pe=xe({balance:O,balanceResponse:X,amount:b,amountUSD:F,setAmountUSD:j,setAmount:x,token:U,setToken:C,loading:P,setLoading:M,error:I});return{from:je,to:pe}},co=({from:e,to:t})=>u.useCallback(async()=>{var n,r;await Promise.all([(n=e.balanceResponse)==null?void 0:n.refetch(),(r=t.balanceResponse)==null?void 0:r.refetch(),e.setAmount(""),e.setAmountUSD(""),t.setAmount(""),t.setAmountUSD("")])},[e,t]);function Ee(e,t){return mo(e)||po(e,t)||fo(e,t)||uo()}function uo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fo(e,t){if(e){if(typeof e=="string")return wt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}function wt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function po(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function mo(e){if(Array.isArray(e))return e}const xn={},gn=u.createContext(xn);function ve(){const e=u.useContext(gn);if(e===xn)throw new Error("useSwapContext must be used within a Swap component");return e}function ho({children:e,config:t={maxSlippage:mn},experimental:n,isSponsored:r,onError:s,onStatus:i,onSuccess:a}){var Pe,De;const l=Ne(),c=l.config,d=c===void 0?{paymaster:void 0}:c,f=d.paymaster,h=J(),m=h.address,y=h.chainId,g=jr(),b=g.switchChainAsync,x=n.useAggregator,v=nt(),w=wr({chainId:ot.id}),F=on({statusName:"init",statusData:{isMissingRequiredField:!0,maxSlippage:t.maxSlippage}}),j=Ee(F,2),S=j[0],T=j[1],U=u.useState(!1),C=Ee(U,2),L=C[0],D=C[1],P=u.useState(""),M=Ee(P,2),N=M[0],Z=M[1],q=u.useState(!1),K=Ee(q,2),B=K[0],G=K[1],Q=lo(m),O=Q.from,I=Q.to,fe=dr(),X=fe.sendTransactionAsync,je=fr(),pe=je.sendCallsAsync,Oe=co({from:O,to:I}),we=Gn({accountConfig:v,lifecycleStatus:S,updateLifecycleStatus:T}),Ke=z(),se=Ke.sendAnalytics;u.useEffect(()=>{var W,R,ee,me;S.statusName==="error"&&(s==null||s(S.statusData),se(Te.SwapFailure,{error:S.statusData.error,metadata:S.statusData})),S.statusName==="success"&&(a==null||a(S.statusData.transactionReceipt),Z((W=S.statusData)==null?void 0:W.transactionReceipt.transactionHash),G(!0),D(!0),se(Te.SwapSuccess,{paymaster:!!f,transactionHash:(R=S.statusData.transactionReceipt)==null?void 0:R.transactionHash,address:m||"",amount:Number(O.amount),from:((ee=O.token)==null?void 0:ee.symbol)||"",to:((me=I.token)==null?void 0:me.symbol)||""})),i==null||i(S)},[s,i,a,S,S.statusData,S.statusName,se,f,O.amount,(Pe=O.token)==null?void 0:Pe.symbol,(De=I.token)==null?void 0:De.symbol,m]),u.useEffect(()=>{S.statusName==="init"&&B&&(G(!1),Oe())},[B,S.statusName,Oe]),u.useEffect(()=>{S.statusName==="transactionApproved"&&S.statusData.transactionType==="Batched"&&we()},[we,S,S.statusData,S.statusName]),u.useEffect(()=>{S.statusName==="success"&&B&&T({statusName:"init",statusData:{isMissingRequiredField:!0,maxSlippage:t.maxSlippage}})},[t.maxSlippage,B,S.statusName,T]);const Ge=u.useCallback(()=>{var W,R;O.setAmount(I.amount),I.setAmount(O.amount),(W=O.setToken)==null||W.call(O,I.token),(R=I.setToken)==null||R.call(I,O.token),T({statusName:"amountChange",statusData:{amountFrom:O.amount,amountTo:I.amount,tokenFrom:O.token,tokenTo:I.token,isMissingRequiredField:!O.token||!I.token||!O.amount||!I.amount}})},[O,I,T]),Fe=u.useCallback(async(W,R,ee,me)=>{const te=W==="from"?O:I,Y=W==="from"?I:O;if(te.token=ee??te.token,Y.token=me??Y.token,te.token===void 0||Y.token===void 0){T({statusName:"amountChange",statusData:{amountFrom:O.amount,amountTo:I.amount,tokenFrom:O.token,tokenTo:I.token,isMissingRequiredField:!0}});return}if(R===""||R==="."||Number.parseFloat(R)===0){Y.setAmount(""),Y.setAmountUSD(""),te.setAmountUSD("");return}Y.setLoading(!0),T({statusName:"amountChange",statusData:{amountFrom:W==="from"?R:"",amountTo:W==="to"?R:"",tokenFrom:O.token,tokenTo:I.token,isMissingRequiredField:!0}});try{const Ae=S.statusData.maxSlippage,ne=await Qn({amount:R,amountReference:"from",from:te.token,maxSlippage:String(Ae),to:Y.token,useAggregator:x},ce.Swap);if(mt(ne)){T({statusName:"error",statusData:{code:ne.code,error:ne.error,message:""}});return}const ye=Yn(ne.toAmount,ne.to.decimals);Y.setAmountUSD(ne.toAmountUSD),Y.setAmount(ye),te.setAmountUSD(ne.fromAmountUSD),T({statusName:"amountChange",statusData:{amountFrom:W==="from"?R:ye,amountTo:W==="to"?R:ye,tokenFrom:O.token,tokenTo:I.token,isMissingRequiredField:!ye}})}catch(Ae){T({statusName:"error",statusData:{code:"TmSPc01",error:JSON.stringify(Ae),message:""}})}finally{Y.setLoading(!1)}},[O,I,S,T,x]),Ie=u.useCallback(async()=>{if(!(!m||!O.token||!I.token||!O.amount))try{se(Te.SwapInitiated,{amount:Number(O.amount)});const W=S.statusData.maxSlippage,R=await Zn({amount:O.amount,fromAddress:m,from:O.token,maxSlippage:String(W),to:I.token,useAggregator:x},ce.Swap);if(mt(R)){T({statusName:"error",statusData:{code:R.code,error:R.error,message:R.message}});return}await qn({chainId:y,config:v,isSponsored:r,paymaster:f||"",sendCallsAsync:pe,sendTransactionAsync:X,swapTransaction:R,switchChainAsync:b,updateLifecycleStatus:T,useAggregator:x,walletCapabilities:w})}catch(W){const R=ur(W)?"Request denied.":or;T({statusName:"error",statusData:{code:"TmSPc02",error:JSON.stringify(W),message:R}})}},[v,m,y,O.amount,O.token,r,S,f,pe,X,b,I.token,T,x,w,se]),Qe=xe({address:m,config:t,from:O,handleAmountChange:Fe,handleToggle:Ge,handleSubmit:Ie,lifecycleStatus:S,updateLifecycleStatus:T,to:I,isToastVisible:L,setIsToastVisible:D,setTransactionHash:Z,transactionHash:N});return o.jsx(gn.Provider,{value:Qe,children:e})}function Ue({className:e,delayMs:t=1e3,label:n,token:r,type:s,swappableTokens:i}){const a=ve(),l=a.address,c=a.to,d=a.from,f=a.handleAmountChange,h=z(),m=h.sendAnalytics,y=xe(s==="from"?d:c),g=xe(s==="from"?c:d),b=y.setToken,x=y.setAmount,v=y.balance,w=y.amount,F=y.amountUSD;u.useEffect(()=>{r&&(b==null||b(r))},[r,b]);const j=u.useCallback(()=>{v&&(x(v),f(s,v))},[v,x,f,s]),S=u.useCallback(P=>{f(s,P)},[f,s]),T=u.useCallback(P=>{m(Te.TokenSelected,{token:P.symbol})},[m]),U=u.useCallback(P=>{b==null||b(P),f(s,w,P),T(P)},[w,b,f,T,s]),C=u.useMemo(()=>(i==null?void 0:i.filter(({symbol:P})=>{var M;return P!==((M=g.token)==null?void 0:M.symbol)}))??[],[i,g.token]),L=s==="from"&&Number(v)<Number(w),D=P=>!P||P==="0"?null:`~$${Number(xt(P,2)).toFixed(2)}`;return o.jsxs("div",{className:p(E.secondary,A.radius,"my-0.5 box-border flex h-[148px] w-full flex-col items-start p-4",e),"data-testid":"ockSwapAmountInput_Container",children:[o.jsx("div",{className:p(_.label2,k.foregroundMuted,"flex w-full items-center justify-between"),children:n}),o.jsxs("div",{className:"flex w-full items-center justify-between",children:[o.jsx(ut,{className:p("mr-2 w-full border-[none] bg-transparent font-display text-[2.5rem]","leading-none outline-none",L&&l?k.error:k.foreground),placeholder:"0.0",delayMs:t,value:pr(w),setValue:x,disabled:y.loading,onChange:S,inputValidator:hn}),C.length>0?o.jsx(Fr,{token:y.token,setToken:U,options:C}):y.token&&o.jsx(Or,{className:$.inverse,token:y.token})]}),o.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[o.jsx("div",{className:p(_.label2,k.foregroundMuted),children:D(F)}),o.jsxs("div",{className:p(_.label2,k.foregroundMuted,"flex grow items-center justify-end"),children:[v&&o.jsx("span",{children:`Balance: ${xt(v,8)}`}),s==="from"&&l&&o.jsx("button",{type:"button",className:p(_.label1,k.primary,"flex cursor-pointer items-center justify-center px-2 py-1"),"data-testid":"ockSwapAmountInput_MaxButton",onClick:j,children:"Max"})]})]})]})}function Sn({className:e,label:t="Swap",disabled:n=!1}){var m,y;const r=ve(),s=r.address,i=r.to,a=r.from,l=r.lifecycleStatus.statusName,c=r.handleSubmit,d=i.loading||a.loading||l==="transactionPending"||l==="transactionApproved",f=!a.amount||!a.token||!i.amount||!i.token||n||d,h=((m=i.token)==null?void 0:m.address)===((y=a.token)==null?void 0:y.address);return!f&&!s?o.jsx(it,{className:p("mt-4 w-full",e)}):o.jsx("button",{type:"button",className:p(E.primary,A.radius,"w-full rounded-xl","mt-4 px-4 py-3",f&&$.disabled,_.headline,e),onClick:()=>c(),disabled:f||h,"data-testid":"ockSwapButton_Button",children:d?o.jsx(lt,{}):o.jsx("span",{className:p(_.headline,k.inverse),children:t})})}function yo(e){return e.code===_r?ae.TOO_MANY_REQUESTS:e.code===kr?ae.LOW_LIQUIDITY:e.code===Tr?ae.USER_REJECTED:e.message}function bo({address:e,from:t,lifecycleStatus:n,to:r}){return n.statusName==="error"?yo(n.statusData):t.error||r.error?ae.BALANCE_ERROR:e&&Number(t.balance)<Number(t.amount)?ae.INSUFFICIENT_BALANCE:n.statusName==="transactionPending"?ae.CONFIRM_IN_WALLET:n.statusName==="transactionApproved"?ae.SWAP_IN_PROGRESS:r.loading||t.loading?ae.FETCHING_QUOTE:n.statusData.isMissingRequiredField?ae.INCOMPLETE_FIELD:""}function Cn({className:e}){const t=ve(),n=t.address,r=t.to,s=t.from,i=t.lifecycleStatus,a=bo({address:n,from:s,lifecycleStatus:i,to:r});return o.jsx("div",{className:p("flex h-7 pt-2",_.label2,k.foregroundMuted,e),"data-testid":"ockSwapMessage_Message",children:a})}function vn({children:e,className:t}){return o.jsx("p",{className:p(_.legal,k.foregroundMuted,"mb-2",t),children:e})}function xo(e,t){return vo(e)||Co(e,t)||So(e,t)||go()}function go(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function So(e,t){if(e){if(typeof e=="string")return At(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}function At(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Co(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function vo(e){if(Array.isArray(e))return e}const he={AUTO:"Auto",CUSTOM:"Custom"};function jn({className:e}){const t=z(),n=t.sendAnalytics,r=ve(),s=r.config.maxSlippage,i=r.updateLifecycleStatus,a=r.lifecycleStatus,l=u.useState(a.statusData.maxSlippage===s?he.AUTO:he.CUSTOM),c=xo(l,2),d=c[0],f=c[1],h=u.useCallback((b,x)=>{n(Te.SlippageChanged,{previousSlippage:b,slippage:x})},[n]),m=u.useCallback(b=>{const x=a.statusData.maxSlippage;b!==x&&(h(x,b),i({statusName:"slippageChange",statusData:{maxSlippage:b}}))},[a.statusData.maxSlippage,i,h]),y=u.useCallback(b=>{const x=b.target.value,v=Number.parseFloat(x),w=!Number.isNaN(v);m(w?v:0)},[m]),g=u.useCallback(b=>{f(b),b===he.AUTO&&m(s)},[s,m]);return o.jsxs("section",{className:p(E.default,A.defaultActive,A.radius,"flex items-center gap-2 flex-grow max-sm:pt-4",e),children:[o.jsxs("fieldset",{className:p(E.default,A.defaultActive,A.radius,"flex h-9 flex-1 rounded-xl border p-1"),children:[o.jsx("legend",{className:"sr-only",children:"Slippage Setting"}),Object.values(he).map(b=>o.jsx("button",{type:"button",className:p($.default,k.foreground,_.label1,A.radiusInner,"flex-1 px-3 py-1 transition-colors",d===b?p(E.inverse,k.primary,$.shadow):k.foregroundMuted),onClick:()=>g(b),children:b},b))]}),o.jsxs("div",{className:p(E.default,A.defaultActive,A.radius,"flex h-9 w-24 items-center justify-between border px-2 py-1",d===he.AUTO&&"opacity-50"),children:[o.jsx("label",{htmlFor:"slippage-input",className:"sr-only",children:"Slippage Percentage"}),o.jsx("input",{id:"slippage-input",type:"text",value:a.statusData.maxSlippage,onChange:y,disabled:d===he.AUTO,className:p(k.foreground,_.label2,"w-full flex-grow bg-transparent pl-1 font-normal leading-6 focus:outline-none",d===he.AUTO&&"cursor-not-allowed")}),o.jsx("span",{className:p(E.default,k.foreground,_.label2,"ml-1 flex-shrink-0 font-normal leading-6"),children:"%"})]})]})}function jo({children:e,className:t}){return o.jsx("div",{className:p(E.default,A.radius,A.lineDefault,"right-0 z-10 w-[21.75rem] px-3 py-3",t),"data-testid":"ockSwapSettingsLayout_container",children:e})}function wo({children:e,className:t}){return o.jsxs("div",{className:p(E.default,A.default,$.shadow,"right-0 z-10 h-full w-full rounded-t-lg px-3 pt-2 pb-3",t),"data-testid":"ockSwapSettingsLayout_container",children:[o.jsx("div",{className:p(E.alternate,"mx-auto mb-2 h-1 w-4 rounded-[6.25rem]")}),o.jsx("div",{className:"mb-4 flex items-center justify-center",children:o.jsx("h2",{className:p(k.foreground,"font-bold text-sm"),children:"Settings"})}),o.jsx("div",{className:"flex flex-col",children:e}),o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsx("div",{className:p(E.inverse,"h-1 w-28 shrink-0 rounded-[0.43931rem]")})})]})}function wn({children:e,className:t}){return o.jsx("h3",{className:p(_.headline,k.foreground,"mb-2 text-base",t),children:e})}function Ao(e,t){return Oo(e)||To(e,t)||ko(e,t)||_o()}function _o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ko(e,t){if(e){if(typeof e=="string")return _t(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}function _t(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function To(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Oo(e){if(Array.isArray(e))return e}const Fo=o.jsxs(o.Fragment,{children:[o.jsx(wn,{children:"Max. slippage"}),o.jsx(vn,{children:"Your swap will revert if the prices change by more than the selected percentage."}),o.jsx(jn,{})]});function An({children:e=Fo,className:t,icon:n="swapSettings",text:r=""}){const s=ar(),i=u.useState(!1),a=Ao(i,2),l=a[0],c=a[1],d=u.useRef(null),f=u.useRef(null),h=u.useCallback(g=>{g.stopPropagation(),c(b=>!b)},[]),m=u.useCallback(()=>{c(!1)},[]),y=cn({icon:n});return o.jsxs("div",{className:p("flex w-auto items-center justify-end space-x-1 pb-4",t),"data-testid":"ockSwapSettings_Settings",children:[r&&o.jsx("span",{className:p(_.body),children:r}),o.jsxs("div",{className:p("relative",l&&"group"),ref:d,children:[o.jsx("button",{ref:f,type:"button","aria-label":"Toggle swap settings",className:p($.default,"rounded-full p-2 opacity-50 transition-opacity hover:opacity-100"),onClick:h,children:o.jsx("div",{className:"h-[1.125rem] w-[1.125rem]",children:y})}),s==="sm"?o.jsx(dn,{active:l,children:o.jsx(fn,{onDismiss:m,triggerRef:f,preventTriggerEvents:!0,children:o.jsx("div",{className:p(E.inverse,$.shadow,"fixed inset-x-0 z-50 transition-[bottom] duration-300 ease-in-out",l?"bottom-0":"-bottom-[12.875rem]","h-[12.875rem] rounded-t-lg",t),"data-testid":"ockSwapSettingsSlippageLayoutBottomSheet_container",children:o.jsx(wo,{className:t,children:e})})})}):o.jsx(Ir,{isOpen:l,onClose:m,anchor:d.current,position:"bottom",align:"end",trigger:f,children:o.jsx("div",{className:p(A.radius,E.default,$.shadow,"absolute right-0 z-10 mt-1 w-[21.75rem] rounded-lg"),"data-testid":"ockSwapSettingsDropdown",children:o.jsx(jo,{children:e})})})]})]})}function _n({className:e,durationMs:t=5e3,position:n="bottom-center"}){const r=ve(),s=r.isToastVisible,i=r.setIsToastVisible,a=r.setTransactionHash,l=r.transactionHash,c=J(),d=c.chainId,f=an(d),h=u.useCallback(()=>{i(!1),a("")},[i,a]);return s?o.jsxs(Pr,{position:n,className:e,durationMs:t,isVisible:s,onClose:h,children:[o.jsx("div",{className:p(_.label2),children:o.jsx(yn,{})}),o.jsx("div",{className:p(_.label1,"text-nowrap"),children:o.jsx("p",{className:k.foreground,children:"Successful"})}),o.jsx("div",{className:p(_.label1,"text-nowrap"),children:o.jsx("a",{href:`${f}/tx/${l}`,target:"_blank",rel:"noreferrer",children:o.jsx("span",{className:p(_.label1,k.primary),children:"View transaction"})})})]}):null}function kn({className:e}){const t=ve(),n=t.handleToggle;return o.jsx("button",{type:"button",className:p($.alternate,A.default,"-my-6 relative mx-auto","flex h-12 w-12 items-center justify-center","rounded-lg border-4 border-solid",e),"data-testid":"SwapTokensButton",onClick:n,children:un})}function Io({to:e,from:t,disabled:n}){return o.jsxs(o.Fragment,{children:[o.jsx(An,{}),o.jsx(Ue,{label:"Sell",swappableTokens:t,token:t==null?void 0:t[0],type:"from"}),o.jsx(kn,{}),o.jsx(Ue,{label:"Buy",swappableTokens:e,token:e==null?void 0:e[0],type:"to"}),o.jsx(Sn,{disabled:n}),o.jsx(Cn,{}),o.jsx(_n,{})]})}function Po({children:e,config:t={maxSlippage:mn},className:n,disabled:r,to:s,from:i,experimental:a={useAggregator:!1},isSponsored:l=!1,onError:c,onStatus:d,onSuccess:f,title:h="Swap",headerLeftContent:m}){const y=ge();return tn()?o.jsx(ho,{config:t,experimental:a,isSponsored:l,onError:c,onStatus:d,onSuccess:f,children:o.jsxs("div",{className:p(y,E.default,A.radius,k.foreground,"relative flex w-full max-w-[500px] flex-col px-6 pt-6 pb-4",n),"data-testid":"ockSwap_Container",children:[o.jsxs("div",{className:"absolute flex w-1/2 items-center justify-between",children:[m,o.jsx("h3",{className:p(_.title3,"text-center"),"data-testid":"ockSwap_Title",children:h})]}),e??o.jsx(Io,{to:s,from:i,disabled:r})]})}):null}function Do({draggableRef:e,position:t,minGapToEdge:n=10}){var c;const r=(c=e.current)==null?void 0:c.getBoundingClientRect();if(!r||typeof window>"u")return t;const s=window.innerWidth,i=window.innerHeight,a=Math.min(Math.max(n,t.x),s-r.width-n),l=Math.min(Math.max(n,t.y),i-r.height-n);return{x:a,y:l}}function Ro(e,t,n){const r=u.useCallback(a=>a.right<=window.innerWidth&&a.bottom<=window.innerHeight&&a.left>=0&&a.top>=0,[]),s=u.useCallback((a,l)=>{const c=window.innerWidth,d=window.innerHeight;let f,h;return a.right>c?f=c-a.width-10:a.left<0?f=10:f=l.x,a.bottom>d?h=d-a.height-10:a.top<0?h=10:h=l.y,{x:f,y:h}},[]),i=u.useCallback(()=>{if(!e.current)return;const l=e.current.getBoundingClientRect(),c=s(l,t);n(d=>r(l)?d:c)},[e,t,s,n,r]);u.useEffect(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)),[i])}function Le(e,t){return $o(e)||Lo(e,t)||Eo(e,t)||Mo()}function Mo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eo(e,t){if(e){if(typeof e=="string")return kt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lo(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function $o(e){if(Array.isArray(e))return e}function Bo({children:e,gridSize:t=1,startingPosition:n={x:20,y:20},snapToGrid:r=!1,disabled:s=!1}){const i=u.useState(n),a=Le(i,2),l=a[0],c=a[1],d=u.useState({x:0,y:0}),f=Le(d,2),h=f[0],m=f[1],y=u.useState({x:0,y:0}),g=Le(y,2),b=g[0],x=g[1],v=u.useState(!1),w=Le(v,2),F=w[0],j=w[1],S=u.useRef(null),T=u.useCallback(C=>Math.round(C/t)*t,[t]),U=u.useCallback(C=>{s||(j(!0),x({x:C.clientX,y:C.clientY}),m({x:C.clientX-l.x,y:C.clientY-l.y}))},[l,s]);return u.useEffect(()=>{if(!F)return;const C=D=>{const P=Do({draggableRef:S,position:{x:D.clientX-h.x,y:D.clientY-h.y}});c(P)},L=D=>{if(Math.hypot(D.clientX-b.x,D.clientY-b.y)>2){D.preventDefault(),D.stopPropagation();const M=N=>{N.preventDefault(),N.stopPropagation(),document.removeEventListener("click",M,!0)};document.addEventListener("click",M,!0)}c(M=>({x:r?T(M.x):M.x,y:r?T(M.y):M.y})),j(!1)};return document.addEventListener("pointermove",C),document.addEventListener("pointerup",L),()=>{document.removeEventListener("pointermove",C),document.removeEventListener("pointerup",L)}},[F,h,r,T,b]),Ro(S,l,c),o.jsx("div",{ref:S,"data-testid":"ockDraggable",className:p("fixed touch-none select-none","cursor-grab active:cursor-grabbing"),style:{left:`${l.x}px`,top:`${l.y}px`},onPointerDown:U,children:e})}const Tt=16,Ot=56;function Wo(){return typeof window>"u"?{x:100,y:100}:{x:window.innerWidth-Ot-Tt,y:window.innerHeight-Ot-Tt}}function Uo({draggable:e,draggableStartingPosition:t}){return e?{draggable:e,draggableStartingPosition:t??Wo()}:{draggable:e}}function Ho(e,t){return Go(e)||Ko(e,t)||No(e,t)||Vo()}function Vo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(e,t){if(e){if(typeof e=="string")return Ft(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}function Ft(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ko(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Go(e){if(Array.isArray(e))return e}function Qo({classNames:e}){const t=V(),n=t.address,r=t.chain,s=t.animations,i=u.useState("Copy"),a=Ho(i,2),l=a[0],c=a[1],d=u.useCallback(async()=>{try{await navigator.clipboard.writeText(String(n)),c("Copied"),setTimeout(()=>c("Copy"),2e3)}catch(f){console.error("Failed to copy address:",f),c("Failed to copy"),setTimeout(()=>c("Copy"),2e3)}},[n]);return!n||!r?o.jsx("div",{className:"mt-1 h-28 w-10 px-4 py-3"}):o.jsxs("div",{"data-testid":"ockWalletAdvanced_AddressDetails",className:p("mt-2 flex w-88 flex-col items-center justify-center px-4 py-3",k.foreground,_.body,s.content,e==null?void 0:e.container),children:[o.jsx(at,{address:n,chain:r,className:p("pointer-events-none h-10 w-10",e==null?void 0:e.avatar)}),o.jsxs("div",{className:"group relative mt-2 text-base",children:[o.jsx("button",{type:"button",onClick:d,"data-testid":"ockWalletAdvanced_NameButton",children:o.jsx(st,{address:n,chain:r,className:p("hover:text-[var(--ock-text-foreground-muted)] active:text-[var(--ock-text-primary)]",e==null?void 0:e.nameButton)})}),o.jsx("button",{type:"button",onClick:d,className:p($.alternate,_.legal,k.foreground,A.default,A.radius,Ve.tooltip,"absolute top-full right-0 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100"),"aria-live":"polite","data-testid":"ockWalletAdvanced_NameTooltip",children:l})]}),o.jsx(Yo,{className:e==null?void 0:e.fiatBalance})]})}function Yo({className:e}){const t=J(),n=t.address,r=Se({address:n},ce.Wallet),s=r.data,i=r.isFetching,a=s==null?void 0:s.portfolioBalanceInUsd,l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(a));return i?o.jsx("div",{className:"mt-1 h-8 w-full",children:o.jsx(lt,{})}):a==null?null:o.jsx("div",{className:p(_.title1,"mt-1 font-normal",e),"data-testid":"ockWalletAdvanced_AddressBalance",children:l})}function Zo({classNames:e}){const t=J(),n=t.address,r=V(),s=r.animations,i=Se({address:n},ce.Wallet),a=i.data,l=i.isFetching,c=a==null?void 0:a.tokenBalances;return l||!c||c.length===0?o.jsx("div",{"data-testid":"ockWalletAdvanced_LoadingPlaceholder",className:"mx-auto my-2 h-44 w-80 px-4 py-3"}):o.jsx("div",{className:p("flex flex-col items-center gap-4","my-2 h-44 max-h-44","scrollbar-hidden w-88 overflow-y-auto px-4 py-3",s.content,e==null?void 0:e.container),"data-testid":"ockWalletAdvanced_TokenHoldings",children:c.map((d,f)=>o.jsx(qo,{token:{address:d.address,chainId:d.chainId,decimals:d.decimals,image:d.image,name:d.name,symbol:d.symbol},balance:Number(rt(BigInt(d.cryptoBalance),d.decimals)),valueInFiat:Number(d.fiatBalance),classNames:e==null?void 0:e.tokenDetails},`${d.address}-${f}`))})}function qo({token:e,balance:t,valueInFiat:n,classNames:r,tokenImageSize:s=32}){var l;const i=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:5}).format(t),a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);return o.jsxs("div",{className:p("flex w-full flex-row items-center justify-between",r==null?void 0:r.container),children:[o.jsxs("div",{"data-testid":"ockWalletAdvanced_TokenDetails_TokenImage",className:p("flex flex-row items-center gap-2",r==null?void 0:r.tokenImage),children:[o.jsx(ln,{token:e,size:s}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:p(_.label1,k.foreground,"max-w-52 overflow-hidden text-ellipsis whitespace-nowrap text-left",r==null?void 0:r.tokenName),children:(l=e.name)==null?void 0:l.trim()}),o.jsx("span",{className:p(_.legal,k.foregroundMuted,r==null?void 0:r.tokenBalance),children:`${i} ${e.symbol}`})]})]}),o.jsx("span",{className:p(_.label2,k.foregroundMuted,r==null?void 0:r.fiatValue),children:a})]})}const zo=o.jsxs("svg",{"data-testid":"ock-addSvg",role:"img","aria-label":"ock-addSvg",width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Add"}),o.jsx("path",{d:"M7.125 0H5.875V5.37501L0.5 5.37501L0.5 6.62501H5.875V12H7.125V6.62501H12.5V5.37501H7.125V0Z",className:H.foreground})]}),Jo=o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Arrow Up Right"}),o.jsx("path",{d:"M2.44196 2.25H8.93304L1 10.183L1.88388 11.0669L9.81695 3.13386V9.625H11.067V1H2.44196V2.25Z",className:H.foreground})]});function Xo({classNames:e}){const t=V(),n=t.address,r=t.chain,s=t.setActiveFeature,i=t.animations,a=Ne(),l=a.projectId,c=z(),d=c.sendAnalytics,f=Se({address:n},ce.Wallet),h=f.isFetching,m=u.useCallback(x=>{d(Xe.OptionSelected,{option:x})},[d]),y=u.useCallback(()=>{if(m(be.Buy),!l||!n||!(r!=null&&r.name))return;const x=new URL("https://pay.coinbase.com/buy/select-asset"),v=new URLSearchParams({appId:l,destinationWallets:JSON.stringify([{address:n,blockchains:[r.name.toLowerCase()]}]),defaultAsset:"USDC",defaultPaymentMethod:"CRYPTO_ACCOUNT",presetFiatAmount:"25"});window.open(`${x}?${v}`,"popup","width=400,height=600,scrollbars=yes")},[n,r==null?void 0:r.name,l,m]),g=u.useCallback(()=>{m(be.Send),s("send")},[m,s]),b=u.useCallback(()=>{m(be.Swap),s("swap")},[s,m]);return h?o.jsx(ct,{className:"mx-auto my-3 h-16 w-80 px-4 py-3"}):o.jsxs("div",{"data-testid":"ockWalletAdvanced_TransactionActions",className:p("my-3 flex w-88 flex-row justify-between gap-2 px-4 py-3",i.content,e==null?void 0:e.container),children:[o.jsx(Ze,{icon:zo,label:"Buy",action:y,classNames:e==null?void 0:e.leftAction}),o.jsx(Ze,{icon:Jo,label:"Send",action:g,classNames:e==null?void 0:e.middleAction}),o.jsx(Ze,{icon:un,label:"Swap",action:b,classNames:e==null?void 0:e.rightAction})]})}function Ze({icon:e,label:t,action:n,classNames:r}){return o.jsxs("button",{type:"button",className:p("flex flex-col items-center justify-center gap-2 pt-2.5 pb-2","h-16 flex-1",A.radius,$.alternate,r==null?void 0:r.container),onClick:n,"aria-label":t,children:[o.jsx("span",{className:p("flex h-4 w-4 flex-col items-center justify-center",r==null?void 0:r.icon),children:e}),o.jsx("span",{className:p(_.label2,k.foreground,"flex flex-col justify-center",r==null?void 0:r.label),children:t})]})}function le({children:e,className:t,onClick:n,ariaLabel:r}){return o.jsx("button",{type:"button",onClick:n,"data-testid":"ockPressableIconButton","aria-label":r,className:p($.default,A.radiusInner,A.default,"flex items-center justify-center",t),children:e})}const ea=o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 155 155",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:H.foreground,children:[o.jsx("title",{children:"BaseScan"}),o.jsxs("g",{clipPath:"url(#clip0_13027_2497)",children:[o.jsx("mask",{id:"mask0_13027_2497",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"155",height:"155",children:o.jsx("path",{d:"M155 0H0V155H155V0Z",fill:"white"})}),o.jsxs("g",{mask:"url(#mask0_13027_2497)",children:[o.jsx("path",{d:"M32.6921 73.9892C32.6923 73.1255 32.8626 72.2709 33.1934 71.4736C33.5243 70.6763 34.009 69.9526 34.6198 69.344C35.2306 68.7349 35.9555 68.2524 36.7528 67.9249C37.5501 67.5974 38.4041 67.4309 39.2658 67.4352L50.165 67.4708C51.9029 67.4708 53.5694 68.1625 54.7982 69.3935C56.0269 70.6244 56.7173 72.2938 56.7173 74.035V115.321C57.9442 114.956 59.5201 114.567 61.2447 114.161C62.4425 113.879 63.51 113.2 64.2735 112.234C65.0377 111.268 65.4532 110.071 65.4532 108.838V57.6245C65.4532 55.8834 66.1432 54.2137 67.3723 52.9825C68.6009 51.7513 70.2673 51.0594 72.0054 51.059H82.926C84.6642 51.0594 86.3306 51.7513 87.5591 52.9825C88.7883 54.2137 89.4782 55.8834 89.4782 57.6245V105.156C89.4782 105.156 92.2127 104.048 94.8761 102.921C95.8652 102.502 96.7096 101.801 97.3036 100.904C97.8977 100.007 98.2143 98.955 98.2155 97.8785V41.2141C98.2155 39.4734 98.9055 37.804 100.134 36.573C101.363 35.342 103.029 34.6503 104.767 34.65H115.687C117.425 34.65 119.092 35.3415 120.32 36.5726C121.549 37.8036 122.239 39.4732 122.239 41.2141V87.8759C131.708 81.0016 141.303 72.7341 148.917 62.793C150.021 61.3498 150.752 59.6554 151.044 57.8606C151.336 56.0659 151.18 54.2266 150.59 52.5069C147.066 42.3477 141.463 33.0375 134.141 25.172C126.819 17.3065 117.938 11.059 108.067 6.82926C98.1968 2.59956 87.5531 0.480761 76.8183 0.608476C66.0835 0.736197 55.4931 3.10763 45.7254 7.57097C35.9578 12.0344 27.2278 18.4914 20.0941 26.5289C12.9603 34.5663 7.58002 44.0072 4.29747 54.2474C1.01488 64.4878 -0.0977017 75.3016 1.03092 85.9972C2.15954 96.6928 5.50451 107.035 10.8518 116.361C11.7833 117.97 13.1537 119.279 14.8021 120.135C16.4504 120.99 18.3083 121.356 20.1573 121.191C22.223 121.01 24.7949 120.752 27.8528 120.391C29.1839 120.24 30.4129 119.604 31.3056 118.603C32.1982 117.602 32.6923 116.307 32.6933 114.965V73.9892",fill:"white"}),o.jsx("path",{d:"M32.6921 73.9892C32.6923 73.1255 32.8626 72.2709 33.1934 71.4736C33.5243 70.6763 34.009 69.9526 34.6198 69.344C35.2306 68.7349 35.9555 68.2524 36.7528 67.9249C37.5501 67.5974 38.4041 67.4309 39.2658 67.4352L50.165 67.4708C51.9029 67.4708 53.5694 68.1625 54.7982 69.3935C56.0269 70.6244 56.7173 72.2938 56.7173 74.035V115.321C57.9442 114.956 59.5201 114.567 61.2447 114.161C62.4425 113.879 63.51 113.2 64.2735 112.234C65.0377 111.268 65.4532 110.071 65.4532 108.838V57.6245C65.4532 55.8834 66.1432 54.2137 67.3723 52.9825C68.6009 51.7513 70.2673 51.0594 72.0054 51.059H82.926C84.6642 51.0594 86.3306 51.7513 87.5591 52.9825C88.7883 54.2137 89.4782 55.8834 89.4782 57.6245V105.156C89.4782 105.156 92.2127 104.048 94.8761 102.921C95.8652 102.502 96.7096 101.801 97.3036 100.904C97.8977 100.007 98.2143 98.955 98.2155 97.8785V41.2141C98.2155 39.4734 98.9055 37.804 100.134 36.573C101.363 35.342 103.029 34.6503 104.767 34.65H115.687C117.425 34.65 119.092 35.3415 120.32 36.5726C121.549 37.8036 122.239 39.4732 122.239 41.2141V87.8759C131.708 81.0016 141.303 72.7341 148.917 62.793C150.021 61.3498 150.752 59.6554 151.044 57.8606C151.336 56.0659 151.18 54.2266 150.59 52.5069C147.066 42.3477 141.463 33.0375 134.141 25.172C126.819 17.3065 117.938 11.059 108.067 6.82926C98.1968 2.59956 87.5531 0.480761 76.8183 0.608476C66.0835 0.736197 55.4931 3.10763 45.7254 7.57097C35.9578 12.0344 27.2278 18.4914 20.0941 26.5289C12.9603 34.5663 7.58002 44.0072 4.29747 54.2474C1.01488 64.4878 -0.0977017 75.3016 1.03092 85.9972C2.15954 96.6928 5.50451 107.035 10.8518 116.361C11.7833 117.97 13.1537 119.279 14.8021 120.135C16.4504 120.99 18.3083 121.356 20.1573 121.191C22.223 121.01 24.7949 120.752 27.8528 120.391C29.1839 120.24 30.4129 119.604 31.3056 118.603C32.1982 117.602 32.6923 116.307 32.6933 114.965V73.9892",stroke:"white"}),o.jsx("path",{d:"M32.4531 140.209C43.9644 148.599 57.5682 153.635 71.7594 154.759C85.9501 155.884 100.175 153.054 112.86 146.581C125.545 140.109 136.195 130.248 143.632 118.088C151.07 105.927 155.004 91.9428 155 77.6816C155 75.9024 154.918 74.1419 154.8 72.3911C126.608 114.514 74.5543 134.207 32.4557 140.203",fill:"#C0D0DB"})]})]}),o.jsx("defs",{children:o.jsx("clipPath",{id:"clip0_13027_2497",children:o.jsx("rect",{width:"155",height:"155",fill:"white"})})})]}),Tn=o.jsxs("svg",{role:"img","aria-label":"ock-disconnect-svg",width:"100%",height:"100%",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Disconnect"}),o.jsx("path",{d:"M11.0668 0.91803L11.0668 2.93852L2.02049 2.93852L2.02049 15.0615L11.0668 15.0615L11.0668 17.082L-7.06549e-07 17.082L0 0.918029L11.0668 0.91803Z",className:H.foreground}),o.jsx("path",{d:"M12.3273 12.8963L16.0002 9.02606L12.346 4.95902L10.843 6.30941L12.3623 8.00032L5.53321 8.00032L5.53321 10.0208L12.2706 10.0208L10.8617 11.5054L12.3273 12.8963Z",className:H.foreground})]}),ta=o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"QR Code"}),o.jsx("rect",{width:"28",height:"28",rx:"8",className:E.default}),o.jsx("path",{d:"M10 10H11.5V11.5H10V10Z",className:H.foreground}),o.jsx("path",{d:"M8 13.5H13.5V8H8V13.5ZM9.25 9.25H12.25V12.25H9.25V9.25Z",className:H.foreground}),o.jsx("path",{d:"M18 10H16.5V11.5H18V10Z",className:H.foreground}),o.jsx("path",{d:"M14.5 8V13.5H20V8H14.5ZM18.75 12.25H15.75V9.25H18.75V12.25Z",className:H.foreground}),o.jsx("path",{d:"M10 16.5H11.5V18H10V16.5Z",className:H.foreground}),o.jsx("path",{d:"M8 20H13.5V14.5H8V20ZM9.25 15.75H12.25V18.75H9.25V15.75Z",className:H.foreground}),o.jsx("path",{d:"M18 16.75H18.75V14.5H20V18H16.75V15.75H15.75V20H14.5V14.5H18V16.75Z",className:H.foreground}),o.jsx("path",{d:"M18 18.75H16.75V20H18V18.75Z",className:H.foreground}),o.jsx("path",{d:"M18.75 18.75H20V20H18.75V18.75Z",className:H.foreground})]}),na=o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Refresh"}),o.jsx("path",{d:"M15.9852 5.32694C10.0942 5.32694 5.31852 10.1026 5.31852 15.9936C5.31852 21.8846 10.0942 26.6603 15.9852 26.6603C21.4247 26.6603 25.9132 22.5887 26.5693 17.3269H29.2527C28.5837 24.0647 22.899 29.3269 15.9852 29.3269C8.62139 29.3269 2.65186 23.3574 2.65186 15.9936C2.65186 8.62982 8.62139 2.66028 15.9852 2.66028C20.3471 2.66028 24.2197 4.7548 26.6523 7.99294L29.3184 5.3269V13.3269H21.3184L24.7428 9.90246C22.8156 7.13675 19.6117 5.32694 15.9852 5.32694Z",className:H.foreground})]});function ra({classNames:e}){const t=J(),n=t.address,r=V(),s=r.handleClose,i=r.setActiveFeature,a=r.animations,l=bn(),c=l.disconnect,d=l.connectors,f=z(),h=f.sendAnalytics,m=Se({address:n},ce.Wallet),y=m.refetch,g=u.useCallback(j=>{h(Xe.OptionSelected,{option:j})},[h]),b=u.useCallback(j=>{h(Xe.Disconnect,{component:"WalletAdvanced",walletProvider:j})},[h]),x=u.useCallback(()=>{g(be.Explorer),window.open(`https://basescan.org/address/${n}`,"_blank")},[n,g]),v=u.useCallback(()=>{var S;const j=((S=d[0])==null?void 0:S.name)||"unknown";b(j),s();for(const T of d)c({connector:T})},[c,d,s,b]),w=u.useCallback(()=>{g(be.QR),i("qr")},[i,g]),F=u.useCallback(async()=>{g(be.Refresh),await y()},[y,g]);return o.jsxs("div",{"data-testid":"ockWalletAdvanced_WalletActions",className:p("flex w-88 items-center justify-between px-4 py-3",a.content,e==null?void 0:e.container),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(le,{ariaLabel:"Open transaction history",onClick:x,children:o.jsx("div",{"data-testid":"ockWalletAdvanced_TransactionsButton",className:p("h-7 w-7 scale-110 p-2",e==null?void 0:e.baseScanIcon),children:ea})}),o.jsx(le,{ariaLabel:"Show QR code",onClick:w,children:o.jsx("div",{"data-testid":"ockWalletAdvanced_QrButton",className:p("h-7 w-7 scale-110",e==null?void 0:e.qrIcon),children:ta})})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(le,{ariaLabel:"Disconnect wallet",onClick:v,children:o.jsx("div",{"data-testid":"ockWalletAdvanced_DisconnectButton",className:p("h-7 w-7 scale-110 p-2",e==null?void 0:e.disconnectIcon),children:Tn})}),o.jsx(le,{ariaLabel:"Refresh portfolio data",onClick:F,children:o.jsx("div",{"data-testid":"ockWalletAdvanced_RefreshButton",className:p("h-7 w-7 scale-110 p-2",e==null?void 0:e.refreshIcon),children:na})})]})]})}function oa({children:e,className:t,isOpen:n,onClose:r,triggerRef:s,"aria-label":i,"aria-labelledby":a,"aria-describedby":l}){const c=ge();if(!n)return null;const d=o.jsx("div",{"data-portal-origin":"true",children:o.jsx(dn,{active:n,children:o.jsx(fn,{onDismiss:r,triggerRef:s,preventTriggerEvents:!!s,children:o.jsx("div",{"aria-describedby":l,"aria-label":i,"aria-labelledby":a,"data-testid":"ockBottomSheet",role:"dialog",className:p(c,E.default,Ve.modal,"fixed right-0 bottom-0 left-0","transform rounded-t-3xl p-2 transition-transform","fade-in slide-in-from-bottom-1/2 animate-in",t),children:e})})})});return Nn.createPortal(d,document.body)}function qe({label:e,copyValue:t,onSuccess:n,onError:r,className:s,"aria-label":i}){const a=u.useCallback(()=>Ar({copyValue:t,onSuccess:n,onError:r}),[t,n,r]);return o.jsx("button",{type:"button","data-testid":"ockCopyButton",className:s,onClick:a,onKeyDown:a,"aria-label":i,children:e})}const aa=237,sa=50,ia=10,la="#ffffff",It={x:0,y:0},Pt={x:1,y:0},Dt={default:"blue",base:"baseBlue",cyberpunk:"pink",hacker:"black"},Rt={default:"default",base:"blue",cyberpunk:"magenta",hacker:"black"},Mt={blue:{startColor:"#266EFF",endColor:"#45E1E5"},pink:{startColor:"#EE5A67",endColor:"#CE46BD"},black:{startColor:"#a1a1aa",endColor:"#27272a"},baseBlue:{startColor:"#0052ff",endColor:"#b2cbff"}},ca={default:[["#0F27FF","39.06%"],["#6100FF","76.56%"],["#201F1D","100%"]],blue:[["#0F6FFF","39.06%"],["#0F27FF","76.56%"],["#201F1D","100%"]],magenta:[["#CF00F1","36.46%"],["#7900F1","68.58%"],["#201F1D","100%"]],black:[["#d4d4d8","36.46%"],["#201F1D","68.58%"],["#201F1D","100%"]]},ze=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],Je=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];function ua(e,t,n,r){return Math.sqrt((r-t)**2+(n-e)**2)}function da(e,t,n){var r,s,i,a,l,c;return!!((r=ze[e])!=null&&r[t]||(s=ze[e-n+ke])!=null&&s[t]||(i=ze[e])!=null&&i[t-n+ke]||(a=Je[e])!=null&&a[t]||(l=Je[e-n+ke])!=null&&l[t]||(c=Je[e])!=null&&c[t-n+ke])}function fa(e,t,{hasLogo:n,logoSize:r,logoMargin:s,logoBorderRadius:i,matrixLength:a,dotSize:l}){if(!n)return!1;const d=(r+s*2)/l,f=Math.floor(a/2);if(i>=r/2){const y=d/2;return ua(t,e,f,f)-.5<=y}const m=Math.ceil(d/2);return e<=f+m&&e>=f-m&&t<=f+m&&t>=f-m}function pa(e,t,n){return`
    M ${e-n} ${t}
    A ${n} ${n} 0 1 1 ${e+n} ${t}
    A ${n} ${n} 0 1 1 ${e-n} ${t}`}const ke=7;function ma({matrix:e,size:t,logoSize:n,logoMargin:r,logoBorderRadius:s,hasLogo:i}){return u.useMemo(()=>{const l=t/e.length;let c="";const d=e.length,f=t/d;return e.forEach((h,m)=>{h.forEach((y,g)=>{if(!(da(m,g,d)||fa(m,g,{hasLogo:i,logoSize:n,logoMargin:r,logoBorderRadius:s,matrixLength:d,dotSize:f}))&&y){const b=l*g+l/2,x=l*m+l/2;c+=pa(b,x,l/2)}})}),c},[i,s,r,n,e,t])}function ha(e,t,n,r,s){const i=e/t,a=i*ke,l=i*2,c=i+1;return u.useMemo(()=>o.jsxs("g",{children:[o.jsx("rect",{x:0,y:0,rx:9.5,ry:9.5,width:a,height:a,fill:r,id:`Corner-top-left-${s}`}),o.jsx("rect",{x:0,y:e-a,rx:9.5,ry:9.5,width:a,height:a,fill:r,id:`Corner-bottom-left-${s}`}),o.jsx("rect",{x:e-a,y:0,rx:9.5,ry:9.5,width:a,height:a,fill:r,id:`Corner-top-right-${s}`}),o.jsx("circle",{cx:a/2,cy:a/2,r:l,stroke:n,strokeWidth:c,fill:"none"}),o.jsx("circle",{cx:a/2,cy:e-a/2,r:l,stroke:n,strokeWidth:c,fill:"none"}),o.jsx("circle",{cx:e-a/2,cy:a/2,r:l,stroke:n,strokeWidth:c,fill:"none"})]}),[n,l,c,r,a,e,s])}function ya(e,t){return u.useMemo(()=>{if(!t)return[];const r=`ethereum:${t}`,s=Array.from(mr.create(r,{errorCorrectionLevel:e}).modules.data),i=Math.sqrt(s.length);return s.reduce((a,l,c)=>(c%i===0?a.push([l]):a[a.length-1].push(l),a),[])},[e,t])}function $e(e){return`${e*100}%`}function ba({value:e,size:t=aa,backgroundColor:n="#ffffff",logo:r,logoSize:s=sa,logoBackgroundColor:i=la,logoMargin:a=5,logoBorderRadius:l=ia,quietZone:c=12,quietZoneBorderRadius:d=10,ecl:f="Q",gradientType:h="radial"}){const m=t*.55,y=t/2,g=u.useId(),x=ge().split("-")[0],v=h==="radial",w=v?`url(#radialGrad-${g})`:"#000000",F=v?n:`url(#linearGrad-${g})`,j=Dt[x]??Dt.default,S=[Mt[j].startColor,Mt[j].endColor],T=Rt[x]??Rt.default,U=ca[T],C=ya(f,e),L=ha(t,C.length,F,w,g),D=It.x,P=It.y,M=Pt.x,N=Pt.y,Z=u.useMemo(()=>[-c,-c,t+c*2,t+c*2].join(" "),[c,t]),q=hr({size:t,logo:r,logoSize:s,logoBackgroundColor:i,logoMargin:a,logoBorderRadius:l}),K=ma({matrix:C,size:t,logoSize:s,logoMargin:a,logoBorderRadius:l,hasLogo:!!r});return!K||!e?null:o.jsxs("svg",{viewBox:Z,width:t,height:t,children:[o.jsx("title",{children:"QR Code"}),o.jsx("defs",{children:v?o.jsx("radialGradient",{id:`radialGrad-${g}`,"data-testid":"radialGrad",rx:m,ry:m,cx:y,cy:y,gradientUnits:"userSpaceOnUse",children:U.map(([B,G])=>o.jsx("stop",{offset:G,stopColor:B,stopOpacity:1},`${B}${G}`))}):o.jsxs("linearGradient",{id:`linearGrad-${g}`,"data-testid":"linearGrad",x1:$e(D),y1:$e(P),x2:$e(M),y2:$e(N),gradientUnits:"userSpaceOnUse",children:[o.jsx("stop",{offset:"0",stopColor:S[0]}),o.jsx("stop",{offset:"1",stopColor:S[1]})]})}),o.jsx("g",{children:o.jsx("rect",{rx:d,ry:d,x:-c,y:-c,width:t+c*2,height:t+c*2,fill:n,stroke:F,strokeWidth:2})}),o.jsxs("g",{children:[o.jsx("path",{d:K,fill:w,strokeLinecap:"butt",stroke:w,strokeWidth:0,opacity:.6}),L,q]})]})}const ft=o.jsxs("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Back Arrow"}),o.jsx("path",{d:"M5.54479 12.077L6.46623 11.2323L2.42062 6.81894H11.9999V5.56894H2.50874L6.88374 1.19394L5.99985 0.310059L0.134766 6.17515L5.54479 12.077Z",className:H.foreground})]}),xa=o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Copy"}),o.jsx("path",{d:"M0.666016 0H9.33268V9.33333H0.666016V0ZM1.99935 1.33333V8H7.99935V1.33333H1.99935Z",className:H.foreground}),o.jsx("path",{d:"M10.666 3.33333H11.9993V12H4.66602V10.6667H10.666V3.33333Z",className:H.foreground})]});function Et(e,t){return va(e)||Ca(e,t)||Sa(e,t)||ga()}function ga(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sa(e,t){if(e){if(typeof e=="string")return Lt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}function Lt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ca(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function va(e){if(Array.isArray(e))return e}function ja({classNames:e}){const t=V(),n=t.address,r=t.setActiveFeature,s=t.isActiveFeatureClosing,i=t.setIsActiveFeatureClosing,a=u.useState("Copy"),l=Et(a,2),c=l[0],d=l[1],f=u.useState("Copy address"),h=Et(f,2),m=h[0],y=h[1],g=u.useCallback(()=>{i(!0)},[i]),b=u.useCallback(()=>{s&&(r(null),i(!1))},[s,r,i]),x=u.useCallback(()=>{setTimeout(()=>{d("Copy"),y("Copy address")},2e3)},[]),v=u.useCallback(()=>{y("Address copied"),x()},[x]),w=u.useCallback(()=>{y("Failed to copy address"),x()},[x]),F=u.useCallback(()=>{d("Copied"),x()},[x]),j=u.useCallback(()=>{d("Failed to copy"),x()},[x]);return o.jsxs("div",{"data-testid":"ockWalletAdvancedQrReceive",className:p(A.radius,k.foreground,_.headline,"flex flex-col items-center justify-between","h-120 w-88 px-4 pt-3 pb-4",s?"fade-out slide-out-to-left-5 animate-out fill-mode-forwards ease-in-out":"fade-in slide-in-from-left-5 linear animate-in duration-150",e==null?void 0:e.container),onAnimationEnd:b,children:[o.jsxs("div",{className:p("flex h-[34px] w-full flex-row items-center justify-between",e==null?void 0:e.header),children:[o.jsx(le,{ariaLabel:"Back button",onClick:g,children:o.jsx("div",{className:"p-2",children:ft})}),o.jsx("span",{children:"Scan to receive"}),o.jsxs("div",{className:"group relative",children:[o.jsx(qe,{label:xa,copyValue:n??"",onSuccess:F,onError:j,className:p($.default,A.radiusInner,A.default,"flex items-center justify-center p-2"),"aria-label":"Copy your address by clicking the icon"}),o.jsx(qe,{label:c,copyValue:n??"",onSuccess:F,onError:j,className:p($.alternate,_.legal,k.foreground,A.default,A.radius,Ve.dropdown,"absolute top-full right-0 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100"),"aria-label":"Copy your address by clicking the tooltip"})]})]}),o.jsx(ba,{value:n}),o.jsx(qe,{copyValue:n??"",label:m,className:p(A.radius,$.alternate,"w-full p-3",e==null?void 0:e.copyButton),onSuccess:v,onError:w,"aria-label":"Copy your address by clicking the button"})]})}function wa({config:e,classNames:t,disabled:n,experimental:r,from:s,isSponsored:i=!1,onError:a,onStatus:l,onSuccess:c,title:d,to:f}){var w,F,j,S;const h=V(),m=h.setActiveFeature,y=h.isActiveFeatureClosing,g=h.setIsActiveFeatureClosing,b=u.useCallback(()=>{g(!0)},[g]),x=u.useCallback(()=>{y&&(m(null),g(!1))},[y,m,g]),v=o.jsx(le,{ariaLabel:"Back button",onClick:b,children:o.jsx("div",{className:"p-2",children:ft})});return o.jsx("div",{className:p("h-full",A.radius,y?"fade-out slide-out-to-right-5 animate-out fill-mode-forwards ease-in-out":"fade-in slide-in-from-right-5 linear animate-in duration-150","relative w-88 h-120",t==null?void 0:t.container),onAnimationEnd:x,"data-testid":"ockWalletAdvancedSwap",children:o.jsxs(Po,{className:p("w-full px-4 pt-3 pb-4",t==null?void 0:t.container),onStatus:l,onSuccess:c,onError:a,config:e,isSponsored:i,title:d,experimental:r,headerLeftContent:v,children:[o.jsxs(An,{className:p("w-auto",(w=t==null?void 0:t.settings)==null?void 0:w.container),children:[o.jsx(wn,{className:(F=t==null?void 0:t.settings)==null?void 0:F.slippageTitle,children:"Max. slippage"}),o.jsx(vn,{className:(j=t==null?void 0:t.settings)==null?void 0:j.slippageDescription,children:"Your swap will revert if the prices change by more than the selected percentage."}),o.jsx(jn,{className:(S=t==null?void 0:t.settings)==null?void 0:S.slippageInput})]}),o.jsx(Ue,{label:"Sell",swappableTokens:s,type:"from",className:t==null?void 0:t.fromAmountInput}),o.jsx(kn,{className:t==null?void 0:t.toggleButton}),o.jsx(Ue,{label:"Buy",swappableTokens:f,type:"to",className:t==null?void 0:t.toAmountInput}),o.jsx(Sn,{disabled:n,className:t==null?void 0:t.swapButton}),o.jsx(Cn,{className:t==null?void 0:t.message}),o.jsx(_n,{className:t==null?void 0:t.toast})]})})}const Aa=1e-6,_a=e=>e.endsWith(".base.eth")||e.endsWith(".basetest.eth")?!1:!!(e.endsWith(".eth")||e.endsWith(".test.eth"));async function On(e){if(en(e,{strict:!1}))return e;if(yt(e)||_a(e)){const t=await nr({name:e,chain:yt(e)?ot:rr});if(t)return t}return null}async function Fn(e,t){if(!t)return{displayValue:"",address:null};if(!e){const n=await On(t);return{displayValue:t,address:n}}return en(t)?{displayValue:lr(t),address:e}:{displayValue:t,address:e}}function ka({selectedRecipient:e,recipientInput:t,setRecipientInput:n,setValidatedInput:r,handleRecipientInputChange:s,classNames:i}){const a=(e==null?void 0:e.displayValue)||t,l=u.useCallback(()=>{e.address&&s()},[e,s]),c=u.useCallback(async f=>{const h=await Fn(e.address,f);r(h)},[e.address,r]),d=u.useCallback(f=>!!On(f),[]);return o.jsxs("div",{"data-testid":"ockSendAddressInput",className:p(A.lineDefault,A.radius,"w-full","flex items-center gap-2","px-4 py-3",i==null?void 0:i.container),children:[o.jsx("span",{className:p(k.foreground,i==null?void 0:i.label),children:"To"}),o.jsx(ut,{inputMode:"text",placeholder:"Basename, ENS, or Address",value:a,inputValidator:d,setValue:n,onChange:c,onFocus:l,"aria-label":"Input Receiver Address",className:p(E.default,"w-full outline-none",i==null?void 0:i.input)})]})}function Ta({address:e,senderChain:t,onClick:n,classNames:r}){return!e||!t?null:o.jsx("button",{"data-testid":"ockSendAddressSelector_button",type:"button",onClick:n,className:"w-full text-left",children:o.jsx("div",{"data-testid":"ockSendAddressSelector_container",className:p(E.default,A.radius,$.default,"items-left flex min-w-[300px]","mt-2 p-2",r==null?void 0:r.container),children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(at,{address:e,chain:t,className:r==null?void 0:r.avatar})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(st,{address:e,chain:t,className:r==null?void 0:r.name}),o.jsx(pn,{address:e,hasCopyAddressOnClick:!1,className:r==null?void 0:r.address})]})]})})})}function $t(e,t){return Pa(e)||Ia(e,t)||Fa(e,t)||Oa()}function Oa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fa(e,t){if(e){if(typeof e=="string")return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}function Bt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Pa(e){if(Array.isArray(e))return e}function Da({classNames:e}){const t=u.useState(""),n=$t(t,2),r=n[0],s=n[1],i=u.useState({displayValue:"",address:null}),a=$t(i,2),l=a[0],c=a[1],d=V(),f=d.chain,h=Ce(),m=h.selectedRecipient,y=h.handleRecipientSelection,g=h.handleRecipientInputChange,b=u.useCallback(async()=>{const v=await Fn(l.address,l.displayValue);y(v)},[l,y]),x=u.useMemo(()=>m.address||!l.address?null:o.jsx(Ta,{address:l.address,senderChain:f,onClick:b,classNames:e==null?void 0:e.selector}),[m,l,f,b,e==null?void 0:e.selector]);return o.jsxs("div",{children:[o.jsx(ka,{selectedRecipient:m,recipientInput:r,setRecipientInput:s,setValidatedInput:c,handleRecipientInputChange:g,classNames:e==null?void 0:e.input}),x]})}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wt(Object(n),!0).forEach(function(r){Ra(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ra(e,t,n){return(t=Ma(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e){var t=Ea(e,"string");return typeof t=="symbol"?t:t+""}function Ea(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const La={baseFontSize:3.75,minScale:.01};function $a(e,t,n,r,s,i={}){const a=Ut(Ut({},La),i),l=a.baseFontSize,c=a.minScale,d=u.useCallback(()=>{const f=e.current,h=t.current,m=n.current,y=r.current,g=s.current;if(!f||!h||!m||!y||!g)return;y.style.fontSize=`${l}rem`,m.style.fontSize=`${l}rem`;const b=y.clientWidth,x=f.clientWidth-g.clientWidth;if(m.style.width=`${b}px`,b>x){const v=x/b,w=Math.max(v,c);h.style.transform=`scale(${w})`,h.style.transformOrigin="left center"}else h.style.transform="scale(1)"},[l,c,e,t,n,r,s]);return u.useEffect(()=>{const f=e.current;if(!f)return;const h=new ResizeObserver(d);return h.observe(f),()=>{h.disconnect()}},[e,d]),d}const In=({setFiatAmount:e,setCryptoAmount:t,selectedInputType:n,exchangeRate:r})=>{const s=u.useCallback(l=>{const c=_e(l,2);e(c);const d=String(Number(c)*Number(r)),f=_e(d,8);t(d==="0"?"":f)},[r,e,t]),i=u.useCallback(l=>{const c=_e(l,8);t(c);const d=String(Number(c)/Number(r)),f=_e(d,2);e(f==="0"?"":f)},[r,e,t]),a=u.useCallback((l,c)=>{n==="fiat"?s(l):i(l),c==null||c(l)},[s,i,n]);return u.useMemo(()=>({handleChange:a,handleFiatChange:s,handleCryptoChange:i}),[a,s,i])};function Pn({fiatAmount:e,cryptoAmount:t,asset:n,selectedInputType:r,currency:s,setFiatAmount:i,setCryptoAmount:a,exchangeRate:l,delayMs:c,className:d,textClassName:f}){const h=u.useRef(null),m=u.useRef(null),y=u.useRef(null),g=u.useRef(null),b=u.useRef(null),x=r==="fiat"?s:n,v=r==="fiat"?e:t,w=$a(h,m,y,g,b),F=In({setFiatAmount:i,setCryptoAmount:a,selectedInputType:r,exchangeRate:l}),j=F.handleChange,S=u.useCallback(C=>{j(C,()=>{y.current&&y.current.focus()})},[j]);u.useEffect(()=>{w()},[v,w]);const T=u.useRef(r);u.useEffect(()=>{T.current!==r&&(T.current=r,U())},[r]);const U=()=>{y.current&&y.current.focus()};return o.jsxs("div",{ref:h,"data-testid":"ockAmountInputContainer",className:p("relative h-24 cursor-text",d),children:[o.jsx("div",{className:"absolute inset-x-0 top-6 bottom-4",children:o.jsx("div",{className:"relative flex h-14",children:o.jsxs("div",{ref:m,className:"flex flex-shrink-0 items-center",children:[o.jsx(ut,{className:p(_.body,"border-none bg-transparent","text-6xl leading-none outline-none","[appearance:textfield]","[&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none","[&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none",f),value:v,onChange:S,delayMs:c,inputValidator:hn,ref:y,inputMode:"decimal",placeholder:"0"}),o.jsx("div",{className:"ml-1",children:o.jsx(yr,{ref:b,label:x,className:f})})]})})}),o.jsx("span",{"data-testid":"ockHiddenSpan",ref:g,className:p(_.body,"border-none bg-transparent","text-6xl leading-none outline-none","pointer-events-none absolute whitespace-nowrap opacity-0","left-[-99999px]"),children:v?`${v}.`:"0."})]})}function Ba({className:e,textClassName:t}){const n=Ce(),r=n.selectedToken,s=n.cryptoAmount,i=n.handleCryptoAmountChange,a=n.fiatAmount,l=n.handleFiatAmountChange,c=n.selectedInputType,d=n.exchangeRate;return o.jsxs("div",{className:"flex h-full w-full flex-col justify-center",children:[o.jsx(Pn,{fiatAmount:a??"",cryptoAmount:s??"",asset:(r==null?void 0:r.symbol)??"",currency:"USD",selectedInputType:c,setFiatAmount:l,setCryptoAmount:i,exchangeRate:String(d),className:e,textClassName:t}),o.jsx(br,{})]})}function Wa({transactionId:e,transactionHash:t,senderChain:n,address:r,onComplete:s}){return i=>{const a=(n==null?void 0:n.id)??Wr();if(i&&e&&t&&(n!=null&&n.id)&&r){const l=new URL("https://wallet.coinbase.com/assets/transactions");l.searchParams.set("contentParams[txHash]",t),l.searchParams.set("contentParams[chainId]",JSON.stringify(n==null?void 0:n.id)),l.searchParams.set("contentParams[fromAddress]",r),window.open(l,"_blank","noopener,noreferrer")}else{const l=an(a);window.open(`${l}/tx/${t}`,"_blank","noopener,noreferrer")}s==null||s()}}function Ua({recipientAddress:e,tokenAddress:t,amount:n}){if(!t)return{to:e,data:"0x",value:n};try{const r=Ur({abi:Hr,functionName:"transfer",args:[e,n]});return{to:t,data:r}}catch(r){return{code:"AmBSeTx01",error:r instanceof Error?r.message:String(r),message:"Could not build transfer transaction"}}}function Ha({recipientAddress:e,token:t,amount:n}){if(!e||!t||!t.decimals||!n)return{calldata:null,error:{code:"SemBSeTx01",error:"Invalid transaction parameters",message:"Could not build send transaction"}};if(!t.address&&t.symbol!=="ETH")return{calldata:null,error:{code:"SemBSeTx02",error:"No token address provided for non-ETH token",message:"Could not build send transaction"}};try{const r=dt(n,t.decimals),s=Ua({recipientAddress:e,tokenAddress:t.address||null,amount:r});return xr(s)?{calldata:null,error:s}:{calldata:s,error:null}}catch(r){return{calldata:null,error:{code:"SemBSeTx03",error:r instanceof Error?r.message:"Unknown error",message:"Could not build send transaction"}}}}function Va({label:e,isSponsored:t=!1,className:n,disabled:r,pendingOverride:s,successOverride:i,errorOverride:a}){const l=V(),c=l.chain,d=Ce(),f=d.selectedRecipient,h=d.cryptoAmount,m=d.selectedToken,y=d.updateLifecycleStatus,g=Ha({recipientAddress:f.address,token:m,amount:h}),b=g.calldata,x=g.error,v=r||!!x||!Ga({inputAmount:h??"",balance:BigInt((m==null?void 0:m.cryptoBalance)??0),selectedToken:m??void 0}),w=e??Ka(h,m),F=u.useCallback(j=>{["transactionPending","transactionLegacyExecuted","success","error"].includes(j.statusName)&&y(j)},[y]);return o.jsxs(Rr,{isSponsored:t,chainId:(c==null?void 0:c.id)??ot.id,calls:b?[b]:[],onStatus:F,children:[o.jsx(Na,{label:w,senderChain:c,pendingOverride:s,errorOverride:a,successOverride:i,disabled:v,className:n}),o.jsxs(Lr,{children:[o.jsx($r,{}),o.jsx(Br,{})]})]})}function Na({label:e,senderChain:t,disabled:n,pendingOverride:r,successOverride:s,errorOverride:i,className:a}){const l=V(),c=l.address,d=l.setActiveFeature,f=Mr(),h=f.transactionHash,m=f.transactionId,y=u.useCallback(()=>{d(null)},[d]),g={onClick:Wa({transactionId:m,transactionHash:h,senderChain:t??void 0,address:c??void 0,onComplete:y})};return o.jsx(Er,{className:a,text:e,pendingOverride:r,successOverride:s??g,errorOverride:i,disabled:n})}function Ka(e,t){return e?t?dt(e,t.decimals)>t.cryptoBalance?"Insufficient balance":"Continue":"Select token":"Input amount"}function Ga({inputAmount:e,balance:t,selectedToken:n}){if(!e||!n||!t)return!1;const r=dt(e,n.decimals);return r>0n&&r<=t}const Qa=({className:e=p(H.inverse)})=>o.jsxs("svg",{"data-testid":"ock-addSvg",role:"img","aria-label":"ock-addSvg",width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("title",{children:"Add"}),o.jsx("path",{d:"M7.125 0H5.875V5.37501L0.5 5.37501L0.5 6.62501H5.875V12H7.125V6.62501H12.5V5.37501H7.125V0Z",className:e})]}),Ya="https://keys.coinbase.com/fund";function Za(){const e=window.location.href,t=document.title;return`${Ya}?dappName=${encodeURIComponent(t)}&dappUrl=${encodeURIComponent(e)}&version=${encodeURIComponent(et)}&source=onchainkit`}const qa=["projectId","originComponentName"];function za(e,t){if(e==null)return{};var n,r,s=Ja(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Ja(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Dn(e){let t=e.projectId,n=e.originComponentName,r=za(e,qa);const s=new URL(zn);t!==void 0&&s.searchParams.append("appId",t);for(const i of Object.keys(r)){const a=r[i];a!==void 0&&(["string","number","boolean"].includes(typeof a)?s.searchParams.append(i,a.toString()):s.searchParams.append(i,JSON.stringify(a)))}return n?s.searchParams.append("sdkVersion",`onchainkit@${et}:${n}`):s.searchParams.append("sdkVersion",`onchainkit@${et}`),s.searchParams.sort(),s.toString()}function Xa({fiatCurrency:e,originComponentName:t}){const n=Ne(),r=n.projectId,s=n.chain,i=J(),a=i.address,l=i.chain,c=Nr(),d=l||s;return u.useMemo(()=>{if(c)return Za();if(!(r===null||a===void 0))return Dn({projectId:r,addresses:{[a]:[d.name.toLowerCase()]},fiatCurrency:e,originComponentName:t})},[c,r,a,d,e,t])}function es({className:e,disabled:t=!1,fundingUrl:n,hideIcon:r=!1,hideText:s=!1,openIn:i="popup",popupSize:a="md",rel:l,target:c,text:d="Fund",successText:f="Success",errorText:h="Something went wrong",state:m="default",fiatCurrency:y="USD",onPopupClose:g,onClick:b}){const x=ge(),v=Xa({fiatCurrency:y,originComponentName:"FundButton"}),w=J(),F=w.address,j=n??v,S=t||!j,T=!F,U=Jn(g),C=U.startPopupMonitor,L=z(),D=L.sendAnalytics,P=u.useCallback(()=>{D(ue.FundInitiated,{currency:y})},[D,y]),M=u.useCallback(Q=>{D(ue.FundFailure,{error:Q,metadata:{currency:y}})},[D,y]),N=u.useCallback(Q=>{if(Q.preventDefault(),j){P(),b==null||b();const O=Xn(a,j),I=O.height,fe=O.width,X=Vr({url:j,height:I,width:fe,target:c});X?C(X):M("Failed to open funding popup")}},[j,a,c,b,C,P,M]),Z=u.useMemo(()=>m==="error"?E.error:$.primary,[m]),q=p(x,Z,"px-4 py-3 inline-flex items-center justify-center space-x-2",{[$.disabled]:S},_.headline,A.radius,k.inverse,e),K=u.useMemo(()=>{if(r)return null;switch(m){case"loading":return"";case"success":return o.jsx(yn,{fill:"#F9FAFB"});case"error":return o.jsx(Dr,{fill:"#F9FAFB"});default:return o.jsx(Qa,{})}},[m,r]),B=u.useMemo(()=>{switch(m){case"loading":return"";case"success":return f;case"error":return h;default:return d}},[m,f,h,d]),G=u.useMemo(()=>m==="loading"?o.jsx(lt,{}):o.jsxs(o.Fragment,{children:[K&&o.jsx("span",{"data-testid":"ockFundButtonIcon",className:"flex h-6 items-center",children:K}),s||o.jsx("span",{"data-testid":"ockFundButtonTextContent",children:B})]}),[m,K,B,s]);return i==="tab"?o.jsx("a",{className:q,href:j,target:c??"_blank",rel:l,children:G}):T?o.jsx(it,{className:p("w-full",e)}):o.jsx("button",{className:q,onClick:N,type:"button",disabled:S,"data-testid":"ockFundButton",children:G})}function ts(e,t){return as(e)||os(e,t)||rs(e,t)||ns()}function ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(e,t){if(e){if(typeof e=="string")return Ht(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}function Ht(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function os(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function as(e){if(Array.isArray(e))return e}const ss=({onError:e,onSuccess:t,onStatus:n})=>{const r=on({statusName:"init",statusData:null}),s=ts(r,2),i=s[0],a=s[1];return u.useEffect(()=>{i.statusName==="error"&&(e==null||e(i.statusData)),i.statusName==="transactionSuccess"&&(t==null||t(i.statusData)),n==null||n(i)},[e,n,t,i,i.statusData,i.statusName]),u.useMemo(()=>({lifecycleStatus:i,updateLifecycleStatus:a}),[i,a])};function He(e){return typeof e=="string"?e:Array.isArray(e)?e.map(t=>He(t)):e&&e.constructor===Object?Object.keys(e).reduce((t,n)=>{const r=is(n);return t[r]=He(e[n]),t},{}):e}function is(e){return e.replace(/_([a-z])/g,(t,n)=>n.toUpperCase())}const Rn=()=>{if(!pt.apiKey)throw new Error("API Key Unset: Please set the API Key by providing it in the `OnchainKitProvider` or by manually calling `setOnchainKitConfig`. For more information, visit: https://portal.cdp.coinbase.com/products/onchainkit");return pt.apiKey};async function ls({purchaseCurrency:e,purchaseNetwork:t,paymentCurrency:n,paymentMethod:r,paymentAmount:s,country:i,subdivision:a,apiKey:l}){const c=l||Rn(),f=await(await fetch(`${nn}/buy/quote`,{method:"POST",body:JSON.stringify({purchase_currency:e,purchase_network:t,payment_currency:n,payment_method:r,payment_amount:s,country:i,subdivision:a}),headers:{Authorization:`Bearer ${c}`}})).json();return He(f)}const Mn=({asset:e,currency:t,country:n,subdivision:r,setExchangeRate:s,onError:i})=>{const a=u.useCallback(async()=>{try{const l=await ls({purchaseCurrency:e,paymentCurrency:t,paymentAmount:"100",paymentMethod:"CARD",country:n,subdivision:r});s(Number(l.purchaseAmount.value)/Number(l.paymentSubtotal.value))}catch(l){l instanceof Error?(console.error("Error fetching exchange rate:",l),i==null||i({errorType:"handled_error",code:"EXCHANGE_RATE_ERROR",debugMessage:l.message})):(console.error("Unknown error fetching exchange rate:",l),i==null||i({errorType:"unknown_error",code:"EXCHANGE_RATE_ERROR",debugMessage:JSON.stringify(l)}))}},[e,n,r,t,i,s]);return u.useMemo(()=>({fetchExchangeRate:a}),[a])};function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vt(Object(n),!0).forEach(function(r){cs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cs(e,t,n){return(t=us(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function us(e){var t=ds(e,"string");return typeof t=="symbol"?t:t+""}function ds(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const fs=2,ps=500,ms=e=>[e.some(n=>n.id==="ACH_BANK_ACCOUNT")&&"ACH",e.some(n=>n.id==="CARD")&&"debit","cash","crypto balance"].filter(Boolean).join(", "),hs=({limits:e})=>({id:"",name:"Coinbase",description:ms(e),icon:"coinbaseLogo",minAmount:Math.min(...e.map(t=>Number(t.min))),maxAmount:Math.max(...e.map(t=>Number(t.max)))}),ys=e=>[{id:"APPLE_PAY",name:"Apple Pay",icon:"apple"},{id:"CARD",name:"Debit card",icon:"creditCard"}].map(n=>{const r=e.limits.find(s=>s.id===n.id);return Nt(Nt({},n),{},{description:"Up to $500/week. No sign up required.",minAmount:Number(r==null?void 0:r.min)||fs,maxAmount:Number(r==null?void 0:r.max)||ps})}),bs=(e,t,n)=>{const r=e.paymentCurrencies.find(a=>a.id===t);if(!r)return[];const s=hs(r);let i=[];return n==="US"&&t==="USD"&&(i=ys(r)),[s,...i]};async function xs({country:e,subdivision:t,apiKey:n}){const r=n||Rn();let s=`?country=${e}`;t&&(s=`${s}&subdivision=${t}`);const a=await(await fetch(`${nn}/buy/options${s}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}})).json();return He(a)}const gs=({country:e,subdivision:t,currency:n,setPaymentMethods:r,setIsPaymentMethodsLoading:s,onError:i})=>{const a=u.useCallback(async()=>{s(!0);try{const l=await xs({country:e,subdivision:t}),c=bs(l,n,e);c.length===0&&(console.error("No payment methods found for the selected country and currency. See docs for more information: https://docs.cdp.coinbase.com/onramp/docs/api-configurations"),i==null||i({errorType:"handled_error",code:"NO_PAYMENT_METHODS",debugMessage:"No payment methods found for the selected country and currency. See docs for more information: https://docs.cdp.coinbase.com/onramp/docs/api-configurations"})),r(c)}catch(l){l instanceof Error&&(console.error("Error fetching payment options:",l),i==null||i({errorType:"handled_error",code:"PAYMENT_METHODS_ERROR",debugMessage:l.message}))}finally{s(!1)}},[e,t,n,r,s,i]);u.useEffect(()=>{a()},[])};function oe(e,t){return js(e)||vs(e,t)||Cs(e,t)||Ss()}function Ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(e,t){if(e){if(typeof e=="string")return Kt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(e,t):void 0}}function Kt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vs(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function js(e){if(Array.isArray(e))return e}const En=u.createContext(void 0);function ws({children:e,asset:t,currency:n="USD",headerText:r=`Buy ${t.toUpperCase()}`,buttonText:s,country:i,subdivision:a,inputType:l,onError:c,onStatus:d,onSuccess:f,presetAmountInputs:h}){const m=u.useState(),y=oe(m,2),g=y[0],b=y[1],x=u.useState(l||"fiat"),v=oe(x,2),w=v[0],F=v[1],j=u.useState(""),S=oe(j,2),T=S[0],U=S[1],C=u.useState(""),L=oe(C,2),D=L[0],P=L[1],M=u.useState(0),N=oe(M,2),Z=N[0],q=N[1],K=u.useState(!0),B=oe(K,2),G=B[0],Q=B[1],O=u.useState("default"),I=oe(O,2),fe=I[0],X=I[1],je=u.useState([]),pe=oe(je,2),Oe=pe[0],we=pe[1],Ke=u.useState(!0),se=oe(Ke,2),Ge=se[0],Fe=se[1],Ie=ss({onError:c,onSuccess:f,onStatus:d}),Qe=Ie.lifecycleStatus,Pe=Ie.updateLifecycleStatus,De=Mn({asset:t,currency:n,country:i,subdivision:a,setExchangeRate:q,onError:c}),W=De.fetchExchangeRate,R=z(),ee=R.sendAnalytics,me=u.useCallback((re,Re)=>{ee(ue.FundAmountChanged,{amount:re,currency:Re})},[ee]),te=u.useCallback(re=>{ee(ue.FundOptionSelected,{option:re})},[ee]),Y=u.useCallback(re=>{const Re=Number.parseFloat(re);Number.isNaN(Re)||me(Re,n),U(re)},[n,me]),Ae=u.useCallback(re=>{te(re.id),b(re)},[te]),ne=u.useCallback(async()=>{Q(!0),await W(),Q(!1)},[W]);u.useEffect(()=>{ne()},[]),gs({country:i,subdivision:a,currency:n,setPaymentMethods:we,setIsPaymentMethodsLoading:Fe,onError:c});const ye=xe({asset:t,currency:n,selectedPaymentMethod:g,setSelectedPaymentMethod:Ae,fundAmountFiat:T,setFundAmountFiat:Y,fundAmountCrypto:D,setFundAmountCrypto:P,selectedInputType:w,setSelectedInputType:F,exchangeRate:Z,setExchangeRate:q,exchangeRateLoading:G,setExchangeRateLoading:Q,submitButtonState:fe,setSubmitButtonState:X,paymentMethods:Oe,setPaymentMethods:we,isPaymentMethodsLoading:Ge,setIsPaymentMethodsLoading:Fe,headerText:r,buttonText:s,country:i,subdivision:a,lifecycleStatus:Qe,updateLifecycleStatus:Pe,presetAmountInputs:h,onError:c});return o.jsx(En.Provider,{value:ye,children:e})}function de(){const e=u.useContext(En);if(!e)throw new Error("useFundContext must be used within a FundCardProvider");return e}const As=()=>{const e=de(),t=e.setSubmitButtonState,n=e.updateLifecycleStatus,r=u.useCallback(a=>{a.eventName==="transition_view"?n({statusName:"transactionPending",statusData:void 0}):a.eventName==="error"&&(n({statusName:"error",statusData:a.error}),t("error"),setTimeout(()=>{t("default")},ht))},[n,t]),s=u.useCallback(a=>{n({statusName:"transactionSuccess",statusData:a}),t("success"),setTimeout(()=>{t("default")},ht)},[n,t]),i=u.useCallback(()=>{t("default"),n({statusName:"exit",statusData:void 0})},[n,t]);u.useEffect(()=>{const a=er({onEvent:r,onExit:i,onSuccess:s});return()=>{a()}},[])},_s=(e,t)=>{const n=u.useRef(0),r=u.useRef(),s=u.useRef(),i=u.useRef(e);return i.current=e,u.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),u.useCallback((...a)=>{const l=Date.now(),c=l-n.current;c>=t?(i.current(...a),n.current=l):r.current?s.current=a:r.current||(s.current=a,r.current=setTimeout(()=>{s.current&&(i.current(...s.current),n.current=Date.now()),r.current=void 0},t-c))},[t])},ks=5e3,Ln=({className:e})=>{const t=de(),n=t.fundAmountFiat,r=t.fundAmountCrypto,s=t.asset,i=t.selectedInputType,a=t.currency,l=t.exchangeRate,c=t.setFundAmountFiat,d=t.setFundAmountCrypto,f=t.country,h=t.subdivision,m=t.setExchangeRate,y=t.onError,g=Mn({asset:s,currency:a,country:f,subdivision:h,setExchangeRate:m,onError:y}),b=g.fetchExchangeRate,x=_s(b,ks),v=z(),w=v.sendAnalytics,F=u.useCallback(j=>{c(j),x(),w(ue.FundAmountChanged,{amount:Number(j),currency:a})},[a,w,c,x]);return o.jsx(Pn,{fiatAmount:n,cryptoAmount:r,asset:s,selectedInputType:i,currency:a,className:e,setFiatAmount:F,setCryptoAmount:d,exchangeRate:String(l)})},$n=({className:e})=>{const t=de(),n=t.selectedInputType,r=t.setSelectedInputType,s=t.asset,i=t.fundAmountFiat,a=t.fundAmountCrypto,l=t.exchangeRate,c=t.exchangeRateLoading,d=t.currency;return o.jsx(gr,{selectedInputType:n,setSelectedInputType:r,asset:s,fiatAmount:i,cryptoAmount:a,exchangeRate:l,exchangeRateLoading:c,currency:d,className:e})};function Ts({className:e}){const t=de(),n=t.headerText;return o.jsx("div",{className:p(_.headline,e),"data-testid":"ockFundCardHeader",children:n})}function Os(e,t){return Ds(e)||Ps(e,t)||Is(e,t)||Fs()}function Fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(e,t){if(e){if(typeof e=="string")return Gt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(e,t):void 0}}function Gt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ps(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Ds(e){if(Array.isArray(e))return e}function Bn({className:e}){const t=u.useState(!1),n=Os(t,2),r=n[0],s=n[1],i=de(),a=i.selectedPaymentMethod,l=i.setSelectedPaymentMethod,c=i.paymentMethods,d=i.fundAmountFiat,f=i.isPaymentMethodsLoading,h=i.currency,m=z(),y=m.sendAnalytics,g=u.useMemo(()=>c.filter(C=>C.id!=="APPLE_PAY"||tr()),[c]),b=u.useCallback(C=>{const L=Number(d);if(C.minAmount&&L<C.minAmount)return`Minimum amount of ${We({amount:C.minAmount,currency:h,minimumFractionDigits:0})} required`;if(C.maxAmount&&L>C.maxAmount)return`Maximum amount allowed is ${We({amount:C.maxAmount,currency:h,minimumFractionDigits:0})}`},[d,h]),x=u.useCallback(C=>d?!!b(C):!1,[d,b]);u.useEffect(()=>{if(a&&x(a)){const C=c.find(L=>L.id==="");C&&l(C)}},[a,c,l,x]);const v=u.useCallback(C=>{x(C)||(y(ue.FundOptionSelected,{option:C.id}),l(C),s(!1))},[l,x,y]),w=u.useCallback(()=>{s(!r)},[r]),F=u.useRef(null),j=u.useRef(null),S=u.useRef(null);rn(j,()=>{r&&s(!1)});const T=u.useCallback(C=>{C.key==="Escape"&&s(!1)},[]),U=a||g[0];return o.jsxs("div",{className:p("relative py-4",e),ref:j,"data-testid":"ockFundCardPaymentMethodDropdownContainer",onKeyUp:T,children:[f||!U?o.jsx(ct,{className:"h-12 w-full"}):o.jsx(Sr,{ref:S,onClick:w,isOpen:r,paymentMethod:U}),r&&o.jsx("div",{ref:F,"data-testid":"ockFundCardPaymentMethodDropdown",className:p(A.radius,A.lineDefault,"ock-scrollbar absolute z-10 mt-2 flex w-full flex-col overflow-y-hidden"),children:o.jsx("div",{className:p(E.default,"overflow-y-auto p-2"),children:g.map(C=>{const L=x(C);return o.jsx(Cr,{testId:`ockFundCardPaymentMethodSelectRow__${C.id}`,paymentMethod:C,onClick:v,disabled:L,disabledReason:b(C)},C.name)})})})]})}function Rs({presetAmountInput:e,currency:t,onClick:n}){const r=z(),s=r.sendAnalytics,i=u.useMemo(()=>We({amount:e,currency:t,minimumFractionDigits:0}),[e,t]),a=u.useCallback(()=>{s(ue.FundAmountChanged,{amount:Number(e),currency:t}),n(e)},[e,t,n,s]),l=u.useCallback(c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),s(ue.FundAmountChanged,{amount:Number(e),currency:t}),n(e))},[e,t,n,s]);return e?o.jsx("button",{type:"button","data-testid":"ockPresetAmountInput",className:p(_.body,k.foreground,A.radius,A.lineDefault,"flex-1","p-1","overflow-hidden","whitespace-nowrap","text-ellipsis","hover:bg-[var(--ock-bg-default-hover)]","focus:outline-none focus:ring-2"),title:i,onClick:a,onKeyDown:l,children:i}):null}function Wn(){const e=de(),t=e.presetAmountInputs,n=e.currency,r=e.selectedInputType,s=e.exchangeRate,i=e.setFundAmountFiat,a=e.setFundAmountCrypto,l=In({setFiatAmount:i,setCryptoAmount:a,selectedInputType:r,exchangeRate:String(s)}),c=l.handleFiatChange;return t?o.jsx("div",{"data-testid":"ockPresetAmountInputList",className:"flex w-full flex-wrap items-center justify-between gap-2 pt-8",children:t.map((d,f)=>o.jsx(Rs,{presetAmountInput:d,onClick:c,currency:n},f))}):null}const Ms=()=>{const e=Ne(),t=e.projectId,n=e.chain,r=J(),s=r.address,i=r.chain,a=de(),l=a.selectedPaymentMethod,c=a.selectedInputType,d=a.fundAmountFiat,f=a.fundAmountCrypto,h=a.asset,m=a.currency,y=i||n;return u.useMemo(()=>{if(t===null||s===void 0)return;const g=c==="fiat"?d:f;return Dn({projectId:t,assets:[h],presetFiatAmount:c==="fiat"?Number(g):void 0,presetCryptoAmount:c==="crypto"?Number(g):void 0,defaultPaymentMethod:l==null?void 0:l.id,addresses:{[s]:[y.name.toLowerCase()]},fiatCurrency:m,originComponentName:"FundCard"})},[h,d,f,l,c,t,s,y,m])};function Un(){const e=de(),t=e.fundAmountFiat,n=e.fundAmountCrypto,r=e.submitButtonState,s=e.setSubmitButtonState,i=e.buttonText,a=e.currency,l=e.updateLifecycleStatus,c=Ms(),d=u.useCallback(()=>s("loading"),[s]),f=u.useCallback(()=>{l({statusName:"exit",statusData:void 0}),s("default")},[l,s]),h=u.useMemo(()=>(!t||Number(n)===0)&&(!n||Number(t)===0),[n,t]);return o.jsx(es,{disabled:h,hideIcon:r==="default",text:i,className:"w-full",fundingUrl:c,state:r,onClick:d,onPopupClose:f,fiatCurrency:a})}function Es({assetSymbol:e,buttonText:t="Buy",headerText:n,country:r="US",subdivision:s,currency:i="USD",presetAmountInputs:a,children:l=o.jsx($s,{}),className:c,onError:d,onStatus:f,onSuccess:h}){const m=ge();return o.jsx(ws,{asset:e,headerText:n,buttonText:t,country:r,subdivision:s,currency:i,onError:d,onStatus:f,onSuccess:h,presetAmountInputs:a,children:o.jsx("div",{className:p(m,E.default,k.foreground,"flex w-full flex-col p-6",_.headline,A.radius,A.lineDefault,c),children:o.jsx(Ls,{children:l})})})}function Ls({children:e}){return As(),o.jsx("form",{className:"w-full","data-testid":"ockFundCardForm",children:e})}function $s(){return o.jsxs(o.Fragment,{children:[o.jsx(Ts,{}),o.jsx(Ln,{}),o.jsx($n,{}),o.jsx(Wn,{}),o.jsx(Bn,{}),o.jsx(Un,{})]})}function Bs({onError:e,onStatus:t,onSuccess:n,classNames:r}){return o.jsxs("div",{className:p("flex flex-col items-center justify-between",r==null?void 0:r.container),"data-testid":"ockSendFundWallet",children:[o.jsx("div",{className:p(_.label2,k.foregroundMuted,r==null?void 0:r.subtitle),children:"Insufficient ETH balance to send transaction. Fund your wallet to continue."}),o.jsxs(Es,{assetSymbol:"ETH",country:"US",currency:"USD",presetAmountInputs:["2","5","10"],onError:e,onStatus:t,onSuccess:n,className:p("mt-3 w-88 border-none py-0",r==null?void 0:r.fundCard),children:[o.jsx(Ln,{}),o.jsx($n,{}),o.jsx(Wn,{}),o.jsx(Bn,{}),o.jsx(Un,{})]})]})}function Ws({label:e="Send",classNames:t}){const n=V(),r=n.setActiveFeature,s=Ce(),i=s.selectedRecipient,a=s.selectedToken,l=s.handleResetTokenSelection,c=s.handleRecipientInputChange,d=u.useCallback(()=>{a?l():i.address&&c()},[i,a,l,c]),f=u.useCallback(()=>{r(null)},[r]);return o.jsxs("div",{"data-testid":"ockSendHeader",className:p("mb-4 grid grid-cols-3 items-center",t==null?void 0:t.container),children:[o.jsx("div",{"data-testid":"ockSendHeader_back",className:"justify-self-start",children:i.address&&o.jsx(le,{onClick:d,className:p("h-7 w-7 scale-110 p-2",t==null?void 0:t.back),children:ft})}),o.jsx("div",{"data-testid":"ockSendHeader_label",className:p(_.headline,"justify-self-center",t==null?void 0:t.label),children:e}),o.jsx("div",{"data-testid":"ockSendHeader_close",className:"justify-self-end",children:o.jsx(le,{onClick:f,className:p("h-7 w-7 scale-110 p-2",t==null?void 0:t.close),children:o.jsx(Kr,{})})})]})}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qt(Object(n),!0).forEach(function(r){Us(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Us(e,t,n){return(t=Hs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hs(e){var t=Vs(e,"string");return typeof t=="symbol"?t:t+""}function Vs(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt({classNames:e}){const t=J(),n=t.address,r=Se({address:n},ce.Wallet),s=r.data,i=s==null?void 0:s.tokenBalances,a=Ce(),l=a.selectedToken,c=a.handleTokenSelection,d=a.handleResetTokenSelection,f=a.setSelectedInputType,h=a.handleCryptoAmountChange,m=a.handleFiatAmountChange;return l?o.jsx(St,{token:l,showImage:!0,subtitle:"available",onClick:d,onActionPress:()=>{f("crypto"),m(String(l.fiatBalance)),h(String(rt(BigInt(l.cryptoBalance),l.decimals)))},classNames:Yt({container:p($.alternate,A.radius,e==null?void 0:e.container)},e)}):o.jsxs("div",{className:"mt-4 flex max-h-80 flex-col gap-2",children:[o.jsx("span",{className:p(_.caption,k.foregroundMuted,"uppercase"),children:"Select a token"}),o.jsx("div",{className:"scrollbar-hidden overflow-y-auto",children:i==null?void 0:i.map(y=>o.jsx(St,{token:y,onClick:c,subtitle:"",classNames:Yt({container:p($.default,A.radius,e==null?void 0:e.container)},e)},y.address))})]})}function Ns({children:e=o.jsx(Ks,{}),className:t}){return o.jsx(vr,{children:o.jsx("div",{"data-testid":"ockSend",className:p(E.default,A.radius,A.lineDefault,k.foreground,"h-120 w-88","flex flex-col","p-4",t),children:e})})}function Ks(){const e=Ce(),t=e.ethBalance,n=e.isInitialized,r=e.selectedRecipient,s=e.selectedToken,i=(t??0)>Aa;return n?o.jsxs(o.Fragment,{children:[o.jsx(Ws,{}),i?o.jsxs("div",{className:"flex h-full flex-col justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx(Da,{}),r.address&&!s&&o.jsx(Zt,{})]}),r.address&&s&&o.jsxs(o.Fragment,{children:[o.jsx(Ba,{}),o.jsx(Zt,{}),o.jsx(Va,{})]})]}):o.jsx(Bs,{})]}):o.jsx(ct,{className:"h-full w-full"})}function Hn({children:e,swappableTokens:t,classNames:n}){const r=V(),s=r.isSubComponentOpen,i=r.setIsSubComponentOpen,a=r.isSubComponentClosing,l=r.setIsSubComponentClosing,c=r.connectRef,d=r.breakpoint,f=r.activeFeature,h=r.animations,m=J(),y=m.address,g=Se({address:y,enabled:!!f},ce.Wallet),b=g.data,x=b==null?void 0:b.tokenBalances,v=u.useCallback(()=>{i(!1)},[i]),w=u.useCallback(()=>{a&&(i(!1),l(!1))},[a,i,l]),F=u.useMemo(()=>f==="send"?o.jsx(Be,{children:o.jsx(Ns,{className:"border-none"})}):f==="qr"?o.jsx(Be,{children:o.jsx(ja,{classNames:n==null?void 0:n.qr})}):f==="swap"?o.jsx(Be,{children:o.jsx(wa,{title:o.jsx("div",{className:p(_.headline,"w-full text-center text-base"),children:"Swap"}),to:t??sr,from:(x==null?void 0:x.map(j=>({address:j.address,chainId:j.chainId,symbol:j.symbol,decimals:j.decimals,image:j.image,name:j.name})))??[],classNames:n==null?void 0:n.swap})}):o.jsx(Be,{children:e}),[f,t,x,e,n]);return d==="sm"?o.jsx(oa,{isOpen:s,triggerRef:c,onClose:v,className:n==null?void 0:n.container,children:o.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center",children:F})}):o.jsx("div",{"data-testid":"ockWalletDropdownContent",className:p(E.default,A.radius,A.lineDefault,Ve.dropdown,"my-1.5 h-auto w-full","flex justify-center","overflow-hidden",h.container,n==null?void 0:n.container),onAnimationEnd:w,children:F})}function Be({children:e,className:t}){return o.jsx("div",{className:p("flex flex-col justify-between","min-w-80 max-h-120",t),children:e})}const Gs=o.jsxs(o.Fragment,{children:[o.jsx(ra,{}),o.jsx(Qo,{}),o.jsx(Xo,{}),o.jsx(Zo,{})]});function qt({children:e,classNames:t,swappableTokens:n}){const r=V(),s=r.isSubComponentOpen,i=r.showSubComponentAbove,a=r.alignSubComponentRight;return s?o.jsx("div",{"data-testid":"ockWalletAdvancedContainer",className:p("absolute",i?"bottom-full":"top-full",a?"right-0":"left-0"),children:o.jsx(Hn,{classNames:t,swappableTokens:n,children:e||Gs})}):null}function Qs({className:e,text:t="Disconnect"}){const n=bn(),r=n.disconnect,s=n.connectors,i=u.useCallback(()=>{s.map(a=>r({connector:a}))},[r,s]);return o.jsxs("button",{type:"button",className:p($.default,k.foreground,"relative flex w-full items-center px-4 pt-3 pb-4",e),onClick:i,children:[o.jsx("div",{className:"absolute left-4 flex h-[1.125rem] w-[1.125rem] items-center justify-center",children:Tn}),o.jsx("span",{className:p(_.body,"pl-6"),children:t})]})}function Ys({children:e,className:t,icon:n,href:r,rel:s,target:i}){const a=cn({icon:n});return o.jsxs("a",{className:p($.default,k.foreground,"relative flex items-center px-4 py-3",t),href:r,target:i,rel:s,children:[o.jsx("div",{className:"-translate-y-1/2 absolute top-1/2 left-4 flex h-[1.125rem] w-[1.125rem] items-center justify-center",children:a}),o.jsx("span",{className:p(_.body,"pl-6"),children:e})]})}const Zs=o.jsxs(o.Fragment,{children:[o.jsxs(Gr,{className:"px-4 pt-3 pb-2",children:[o.jsx(at,{}),o.jsx(st,{}),o.jsx(pn,{className:k.foregroundMuted}),o.jsx(Qr,{})]},"wallet-dd-identity"),o.jsx(Ys,{icon:"wallet",href:"https://keys.coinbase.com",target:"_blank",children:"Wallet"},"wallet-dd-link"),o.jsx(Qs,{},"wallet-dd-disconnect")]});function Vn({children:e,className:t,classNames:n,swappableTokens:r}){const s=V(),i=s.address,a=s.breakpoint,l=s.isSubComponentOpen,c=s.showSubComponentAbove,d=s.alignSubComponentRight;return!i||!a||!l?null:o.jsx("div",{"data-testid":"ockWalletDropdown",className:p("absolute",c?"bottom-full":"top-full",d?"right-0":"left-0",t),children:o.jsx(Hn,{classNames:n,swappableTokens:r,children:e||Zs})})}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zt(Object(n),!0).forEach(function(r){qs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qs(e,t,n){return(t=zs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e){var t=Js(e,"string");return typeof t=="symbol"?t:t+""}function Js(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Xt=o.jsxs(o.Fragment,{children:[o.jsx(it,{}),o.jsx(Vn,{})]});function Di({children:e,className:t,draggable:n,draggableStartingPosition:r}){const s=ge();return tn()?o.jsx(ir,{children:o.jsx(Xs,Jt(Jt({className:p(s,t)},Uo({draggable:n,draggableStartingPosition:r})),{},{children:e}))}):null}function Xs({children:e,className:t,draggable:n,draggableStartingPosition:r}){const s=V(),i=s.isSubComponentOpen,a=s.isConnectModalOpen,l=s.handleClose,c=s.connectRef,d=s.breakpoint,f=u.useRef(null);rn(f,l);const h=u.useMemo(()=>{const x=u.Children.toArray(e);return{dropdown:x.find(bt(Vn)),advanced:x.find(bt(qt))}},[e]),m=h.dropdown,y=h.advanced,g=u.useMemo(()=>u.Children.map(e,x=>u.isValidElement(x)&&x.type===qt&&m?null:x),[m,e]);m&&y&&console.error("Defaulted to WalletDropdown. Wallet cannot have both WalletDropdown and WalletAdvanced as children.");const b=a||d==="sm"&&i;return n?o.jsx("div",{ref:f,className:p("relative w-fit shrink-0",t),children:o.jsx(Bo,{startingPosition:r,disabled:b,children:o.jsx("div",{ref:c,children:g||Xt})})}):o.jsx("div",{ref:f,className:p("relative w-fit shrink-0",t),children:o.jsx("div",{ref:c,children:g||Xt})})}export{Es as F,Po as S,Di as W,Vn as a,Qs as b,es as c,An as d,wn as e,vn as f,Dn as g,jn as h,Ue as i,kn as j,Sn as k,Cn as l,_n as m,Ys as n,Wo as o,ra as p,Qo as q,Xo as r,Zo as s,Xa as u};
