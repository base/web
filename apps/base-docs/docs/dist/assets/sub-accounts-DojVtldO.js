const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-B-O1ujgT.js","assets/index-Dlxm52NL.js","assets/ccip-Dm4ndQX6.js","assets/Address-Db7MZz8P.js","assets/OnchainKitProvider-BMiQl1rP.js","assets/attestations-CryG6VVa.js","assets/useValue-BadCClMc.js","assets/useOnchainKit-BS9QuBF4.js","assets/parseAbi-DHKPviCp.js","assets/clsx.m-DHulAg21.js"])))=>i.map(i=>d[i]);
import{s as Wd,k as Po,j as p,_ as So,r as He,u as Ao}from"./index-Dlxm52NL.js";import{A as Qi}from"./Address-Db7MZz8P.js";import{bG as qd}from"./OnchainKitProvider-BMiQl1rP.js";import"./attestations-CryG6VVa.js";import{f as Kd,b as si}from"./parseAbi-DHKPviCp.js";import{c as Zd,F as Yd,s as Io}from"./secp256k1-B-O1ujgT.js";import{c as zt}from"./clsx.m-DHulAg21.js";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ko=Yd(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Jd=ko.create(BigInt("-3")),Xd=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ea=Zd({a:Jd,b:Xd,Fp:ko,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Wd);var Oo={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(i=s(i,r(o)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var o in i)t.call(i,o)&&i[o]&&(a=s(a,o));return a}function s(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Oo);var Qd=Oo.exports;const el=Po(Qd),tl={discord:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M20.3303 2.50578C18.7535 1.78387 17.0888 1.27172 15.3789 0.982422C15.1449 1.40071 14.9332 1.83107 14.7446 2.27171C12.9232 1.99724 11.071 1.99724 9.24961 2.27171C9.06095 1.83112 8.84924 1.40076 8.61535 0.982422C6.90433 1.27417 5.2386 1.78753 3.66019 2.50955C0.526644 7.14569 -0.322811 11.6667 0.101917 16.1235C1.937 17.4793 3.99098 18.5105 6.17458 19.1721C6.66626 18.5108 7.10134 17.8093 7.47519 17.0749C6.76511 16.8097 6.07975 16.4825 5.42706 16.0971C5.59884 15.9725 5.76684 15.8441 5.92918 15.7195C7.82837 16.6127 9.90124 17.0758 12 17.0758C14.0987 17.0758 16.1715 16.6127 18.0707 15.7195C18.235 15.8536 18.403 15.9819 18.5729 16.0971C17.9189 16.4831 17.2323 16.8109 16.5209 17.0768C16.8943 17.8108 17.3294 18.5118 17.8216 19.1721C20.007 18.5131 22.0626 17.4825 23.898 16.1254C24.3963 10.9569 23.0467 6.47746 20.3303 2.50578ZM8.01318 13.3826C6.82961 13.3826 5.85179 12.3085 5.85179 10.9871C5.85179 9.66575 6.79563 8.58222 8.0094 8.58222C9.22318 8.58222 10.1934 9.66575 10.1727 10.9871C10.1519 12.3085 9.21941 13.3826 8.01318 13.3826ZM15.9867 13.3826C14.8013 13.3826 13.8272 12.3085 13.8272 10.9871C13.8272 9.66575 14.7711 8.58222 15.9867 8.58222C17.2024 8.58222 18.1651 9.66575 18.1444 10.9871C18.1236 12.3085 17.193 13.3826 15.9867 13.3826Z",fill:e})}),twitter:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.0979642 0.136564C0.151854 0.211665 1.39988 1.9859 2.87137 4.0793C4.34285 6.17269 5.70383 8.10863 5.89579 8.38141C6.08774 8.65419 6.24478 8.88284 6.24478 8.88953C6.24478 8.89623 6.1733 8.98231 6.08595 9.08081C5.99859 9.17931 5.75253 9.45815 5.53917 9.70044C5.3258 9.94273 4.96611 10.3511 4.73985 10.6079C4.51361 10.8648 4.11558 11.3167 3.85534 11.6123C3.59511 11.9079 3.12714 12.4394 2.8154 12.7933C1.85126 13.888 1.71212 14.0461 0.978182 14.8811C0.586289 15.3269 0.210488 15.7531 0.143086 15.8283C0.0756833 15.9035 0.020531 15.9729 0.020531 15.9825C0.020531 15.9938 0.266687 16 0.714057 16H1.40757L2.17001 15.1322C2.58936 14.6548 3.00303 14.185 3.08927 14.0881C3.27576 13.8786 4.69796 12.2623 4.8175 12.1241C4.86327 12.0711 4.92975 11.9958 4.96524 11.9567C5.00075 11.9175 5.28055 11.6 5.58703 11.2511C5.8935 10.9022 6.15268 10.6082 6.16295 10.5977C6.17323 10.5873 6.33548 10.4029 6.5235 10.1881C6.71153 9.97318 6.87118 9.79736 6.87827 9.79736C6.88538 9.79736 7.85124 11.1632 9.02466 12.8326C10.1981 14.502 11.1791 15.8974 11.2047 15.9335L11.2512 15.9992L13.6301 15.9996C15.5864 15.9999 16.0074 15.9959 15.9999 15.9769C15.992 15.9566 14.8522 14.3329 11.9283 10.1762C9.82332 7.18386 9.54342 6.78174 9.55145 6.76134C9.55925 6.7415 9.84596 6.41397 11.7309 4.27167C12.0542 3.90419 12.4999 3.39736 12.7213 3.14537C12.9428 2.89339 13.1663 2.63965 13.2181 2.5815C13.27 2.52335 13.5424 2.2141 13.8236 1.89427C14.1048 1.57445 14.5828 1.03101 14.8859 0.686643C15.1889 0.342273 15.448 0.0469077 15.4616 0.0302557C15.4849 0.0017623 15.4453 0 14.7819 0H14.0775L13.7642 0.356828C13.3472 0.831718 12.5934 1.68809 12.3794 1.93008C12.2848 2.037 12.1668 2.17138 12.1172 2.22869C12.0676 2.28599 11.9697 2.39674 11.8997 2.4748C11.8297 2.55286 11.4768 2.95374 11.1155 3.36564C10.7543 3.77753 10.4538 4.1185 10.4477 4.12335C10.4416 4.12819 10.3642 4.21589 10.2757 4.31825C10.1208 4.49729 9.96312 4.67649 9.24013 5.49542C8.92278 5.85489 8.90651 5.87033 8.87976 5.83729C8.86437 5.81825 7.93435 4.49715 6.81309 2.90152L4.77442 0.000369975L2.38721 0.000176384L0 0L0.0979642 0.136564ZM1.96115 1.08796C1.97908 1.1147 2.4251 1.73921 2.95232 2.47577C3.95222 3.8727 7.88144 9.36539 10.4084 12.8987C11.2159 14.0278 11.8864 14.9615 11.8984 14.9737C11.9157 14.9911 12.1508 14.9949 12.9971 14.9913L14.0738 14.9868L11.2562 11.0485C9.70657 8.88238 7.46293 5.74626 6.27037 4.0793L4.10205 1.04846L3.01532 1.04391L1.92858 1.03937L1.96115 1.08796Z",fill:e})}),github:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0099 0.277344C5.36875 0.277344 0 5.68567 0 12.3765C0 17.7249 3.43994 22.2521 8.21205 23.8545C8.80869 23.9749 9.02724 23.5941 9.02724 23.2738C9.02724 22.9933 9.00757 22.0318 9.00757 21.0301C5.6667 21.7514 4.97099 19.5878 4.97099 19.5878C4.43409 18.1855 3.63858 17.8252 3.63858 17.8252C2.54511 17.084 3.71823 17.084 3.71823 17.084C4.93117 17.1641 5.56763 18.3259 5.56763 18.3259C6.64118 20.1687 8.37111 19.648 9.06706 19.3274C9.16638 18.5462 9.48473 18.0054 9.82275 17.7049C7.15817 17.4244 4.35469 16.3829 4.35469 11.7354C4.35469 10.4133 4.8316 9.33162 5.58729 8.49038C5.46807 8.18997 5.0504 6.94778 5.70677 5.28521C5.70677 5.28521 6.72083 4.96464 9.00732 6.52716C9.98625 6.26231 10.9958 6.12758 12.0099 6.12645C13.024 6.12645 14.0577 6.26682 15.0123 6.52716C17.299 4.96464 18.3131 5.28521 18.3131 5.28521C18.9695 6.94778 18.5515 8.18997 18.4323 8.49038C19.2079 9.33162 19.6652 10.4133 19.6652 11.7354C19.6652 16.3829 16.8617 17.4043 14.1772 17.7049C14.6148 18.0855 14.9924 18.8065 14.9924 19.9484C14.9924 21.5709 14.9727 22.8731 14.9727 23.2736C14.9727 23.5941 15.1915 23.9749 15.7879 23.8547C20.56 22.2519 23.9999 17.7249 23.9999 12.3765C24.0196 5.68567 18.6312 0.277344 12.0099 0.277344Z",fill:e})}),"more-menu":({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 32 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("line",{x1:"32",y1:"2",x2:"9",y2:"2",stroke:e,strokeWidth:"4"}),p.jsx("line",{x1:"32",y1:"12",y2:"12",stroke:e,strokeWidth:"4"}),p.jsx("line",{x1:"32",y1:"22",x2:"9",y2:"22",stroke:e,strokeWidth:"4"})]}),close:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.82845 0.272185L25.4559 22.8996L22.6274 25.728L2.28882e-05 3.10061L2.82845 0.272185Z",fill:e}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.6274 0.272185L3.33786e-06 22.8996L2.82843 25.728L25.4558 3.10061L22.6274 0.272185Z",fill:e})]}),caret:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:e,xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M19.4199 7.52002L11.9999 14.94L4.57994 7.52002L2.80994 9.29002L11.9999 18.48L21.1899 9.29002L19.4199 7.52002Z",fill:e})}),"external-link":({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:e,xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M14.4437 2.49805H19.8102L8.65655 14.0648L10.4562 15.8002L21.5021 4.34514V9.06774H24.0021V-0.00195312H14.4437V2.49805Z",fill:e}),p.jsx("path",{d:"M-0.00207138 5.86301V24.0024H19.1147V11.9666H16.6147V21.5024H2.49793V8.36301H12.3258V5.86301H-0.00207138Z",fill:e})]}),farcaster:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M4.11859 0.043457H19.5979V21.9565H17.3257V11.9189H17.3034C17.0523 9.14476 14.7103 6.97081 11.8582 6.97081C9.00619 6.97081 6.66419 9.14476 6.41307 11.9189H6.39078V21.9565H4.11859V0.043457Z",fill:e}),p.jsx("path",{d:"M0.000244141 3.1537L0.923321 6.26393H1.70439V18.8463C1.31223 18.8463 0.994327 19.1627 0.994327 19.5531V20.4014H0.852315C0.46016 20.4014 0.142256 20.7179 0.142256 21.1083V21.9565H8.09492V21.1083C8.09492 20.7179 7.77702 20.4014 7.38486 20.4014H7.24285V19.5531C7.24285 19.1627 6.92494 18.8463 6.53279 18.8463H5.68072V3.1537H0.000244141Z",fill:e}),p.jsx("path",{d:"M17.4677 18.8463C17.0755 18.8463 16.7576 19.1627 16.7576 19.5531V20.4014H16.6156C16.2235 20.4014 15.9056 20.7179 15.9056 21.1083V21.9565H23.8582V21.1083C23.8582 20.7179 23.5403 20.4014 23.1482 20.4014H23.0062V19.5531C23.0062 19.1627 22.6883 18.8463 22.2961 18.8463V6.26393H23.0772L24.0002 3.1537H18.3198V18.8463H17.4677Z",fill:e})]}),copy:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M5 0V3H7V2H14V10H13V12H16V0H5Z",fill:e}),p.jsx("path",{d:"M10 6V14H3V6H10ZM12 4H1V16H12V4Z",fill:e})]}),spinner:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"animate-spin",children:[p.jsx("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25",fill:e}),p.jsx("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",fill:e})]}),backArrow:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6.82271 15.414L8.29702 14.0626L3.65737 9.00113L15.8841 9.00113V7.00113L3.79835 7.00113L8.79835 2.00113L7.38414 0.586914L0 7.97105L6.82271 15.414Z",fill:e})}),search:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M24 21.4785L18.0768 15.5553C19.0856 14.0709 19.6765 12.2694 19.6765 10.3382C19.6765 5.1644 15.4826 0.970581 10.3088 0.970581C5.13499 0.970581 0.941162 5.1644 0.941162 10.3382C0.941162 15.5121 5.13499 19.7059 10.3088 19.7059C12.24 19.7059 14.0415 19.115 15.5403 18.1062L21.4491 24.0294L24 21.4785ZM10.3088 16.1029C7.12381 16.1029 4.5441 13.5232 4.5441 10.3382C4.5441 7.15323 7.12381 4.57352 10.3088 4.57352C13.4938 4.57352 16.0735 7.15323 16.0735 10.3382C16.0735 13.5232 13.4938 16.1029 10.3088 16.1029Z",fill:e})}),chevronRight:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M4.60986 3.05001L9.55986 8.00001L4.60986 12.95L6.02986 14.36L12.3899 8.00001L6.02986 1.64001L4.60986 3.05001Z",fill:e})}),blueCircle:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1",children:p.jsx("circle",{cx:"7.5",cy:"7.5",r:"7.5",fill:e})}),plus:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6.9 0H5.1V5.09998H0V6.89998H5.1V12H6.9V6.89998H12V5.09998H6.9V0Z",fill:e})}),cross:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M2.04795 1L1 2.04795L4.95205 6L1 9.95205L2.04795 11L6 7.04795L9.95205 11L11 9.95205L7.04795 6L11 2.04795L9.95205 1L6 4.95205L2.04795 1Z",fill:e})}),arrowRight:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M9.06143 0.586914L7.58712 1.93836L12.2268 6.99979H0V8.99979H12.0858L7.08579 13.9998L8.5 15.414L15.8841 8.02987L9.06143 0.586914Z",fill:e})}),website:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M8 0C3.58667 0 0 3.58667 0 8C0 12.4133 3.58667 16 8 16C12.4133 16 16 12.4133 16 8C16 3.58667 12.4133 0 8 0ZM13.8933 7H11.6267C11.5467 5.36 11.2133 3.86667 10.7333 2.69333C12.3867 3.54667 13.5733 5.12 13.8933 7ZM8 13.9733C7.52 13.64 6.56 11.9333 6.37333 9H9.62667C9.44 11.92 8.48 13.64 8 13.9733ZM6.37333 7C6.56 4.08 7.52 2.36 8 2.02667C8.48 2.36 9.44 4.06667 9.62667 7H6.37333ZM5.26667 2.69333C4.78667 3.86667 4.46667 5.36 4.37333 7H2.10667C2.42667 5.12 3.61333 3.54667 5.26667 2.69333ZM2.10667 9H4.37333C4.45333 10.64 4.78667 12.1333 5.26667 13.3067C3.61333 12.4533 2.42667 10.88 2.10667 9ZM10.7333 13.3067C11.2133 12.1333 11.5333 10.64 11.6267 9H13.8933C13.5733 10.88 12.3867 12.4533 10.7333 13.3067Z",fill:e})}),checkmark:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M16 1.73441L5.47931 12.8854L0 7.0778L1.50605 5.65687L5.47931 9.86816L14.4939 0.313477L16 1.73441Z",fill:e})}),info:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12.5H7V10.5H9V12.5ZM9 9H7V3.5H9V9Z",fill:e})}),pen:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M10.5 2L12.5 0L16 3.5L14 5.5L10.5 2Z",fill:e}),p.jsx("path",{d:"M0.5 12L9.5 3L13 6.5L4 15.5L0 16.0016L0.5 12Z",fill:e})]}),diagonalUpArrow:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M10.5858 4H3.00001V2H14V13H12V5.41422L2.70712 14.7071L1.29291 13.2929L10.5858 4Z",fill:e})}),baseOrgDiagonalUpArrow:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M0.414 6.908L5.972 1.35H1.338L2.472 0.215999H7.974V5.732L6.84 6.852V2.218L1.282 7.79L0.414 6.908Z",fill:e})}),basenamesIcon:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.59193 15.3012C1.50194 14.547 1.45383 13.779 1.45383 13C1.45383 12.221 1.50194 11.4545 1.59193 10.6988C-0.211134 9.64368 -0.685953 6.91115 1.2366 5.43859C2.03882 4.82412 2.8907 4.27016 3.78603 3.78604C4.27171 2.89226 4.82412 2.03883 5.43859 1.2366C6.91115 -0.684399 9.64368 -0.211132 10.6988 1.59194C11.453 1.50194 12.221 1.45384 13 1.45384C13.779 1.45384 14.5455 1.50194 15.3012 1.59194C16.3563 -0.211132 19.0889 -0.685951 20.5614 1.2366C21.1759 2.03883 21.7298 2.89071 22.214 3.78604C23.1077 4.27172 23.9612 4.82412 24.7634 5.43859C26.6844 6.91115 26.2111 9.64368 24.4081 10.6988C24.4981 11.453 24.5462 12.221 24.5462 13C24.5462 13.779 24.4981 14.5455 24.4081 15.3012C26.2111 16.3563 26.686 19.0889 24.7634 20.5614C23.9612 21.1759 23.1093 21.7298 22.214 22.214C21.7283 23.1077 21.1759 23.9612 20.5614 24.7634C19.0889 26.6844 16.3563 26.2111 15.3012 24.4081C14.547 24.4981 13.779 24.5462 13 24.5462C12.221 24.5462 11.4545 24.4981 10.6988 24.4081C9.64368 26.2111 6.91115 26.686 5.43859 24.7634C4.82412 23.9612 4.27016 23.1093 3.78603 22.214C2.89226 21.7283 2.03882 21.1759 1.2366 20.5614C-0.684401 19.0889 -0.211134 16.3563 1.59193 15.3012ZM14.1018 13C14.1018 16.0844 15.4639 18.5848 17.1441 18.5848C18.8243 18.5848 20.1864 16.0844 20.1864 13C20.1864 10.0937 18.9771 7.70589 17.4318 7.43983C18.0096 7.6937 18.4392 8.64766 18.4392 9.78571C18.4392 11.1179 17.8506 12.1978 17.1245 12.1978C16.3984 12.1978 15.8098 11.1179 15.8098 9.78571C15.8098 8.66624 16.2254 7.72488 16.7891 7.45282C15.2761 7.77563 14.1018 10.1361 14.1018 13ZM5.8224 13C5.8224 16.0844 7.18449 18.5848 8.86471 18.5848C10.5449 18.5848 11.907 16.0844 11.907 13C11.907 10.1167 10.7168 7.74376 9.18901 7.44658C9.75931 7.71023 10.1815 8.65752 10.1815 9.78571C10.1815 11.1179 9.59286 12.1978 8.86676 12.1978C8.14067 12.1978 7.55205 11.1179 7.55205 9.78571C7.55205 8.65557 7.97567 7.70696 8.54746 7.44523C7.01633 7.73646 5.8224 10.1123 5.8224 13Z",fill:e})}),clock:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24C18.6274 24 24 18.6274 24 12ZM18.5 12V14.5H10.5V4H13V12H18.5Z",fill:e})}),blockchainNetwork:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M8 0H0V8H8V0Z",fill:e}),p.jsx("path",{d:"M8 16H0V24H8V16Z",fill:e}),p.jsx("path",{d:"M10 2.5H14V5.5H10V2.5Z",fill:e}),p.jsx("path",{d:"M14 18.5H10V21.5H14V18.5Z",fill:e}),p.jsx("path",{d:"M21.5 10V14H18.5V10H21.5Z",fill:e}),p.jsx("path",{d:"M5.5 14V10H2.5L2.5 14H5.5Z",fill:e}),p.jsx("path",{d:"M16 0H24V8H16V0Z",fill:e}),p.jsx("path",{d:"M24 16H16V24H24V16Z",fill:e})]}),cash:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M18 6C18 8.20914 19.7909 10 22 10V14C19.7909 14 18 15.7909 18 18H6C6 15.7909 4.20914 14 2 14L2 18V10C4.20914 10 6 8.20914 6 6H18ZM0 4V20H24V4H0ZM15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12Z",fill:e})}),questionMark:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M12 0C5.38 0 0 5.38 0 12C0 18.62 5.38 24 12 24C18.62 24 24 18.62 24 12C24 5.38 18.62 0 12 0ZM11.64 18.76C10.72 18.76 9.98 18.08 9.98 17.2C9.98 16.32 10.72 15.64 11.64 15.64C12.54 15.64 13.28 16.32 13.28 17.2C13.26 18.06 12.54 18.76 11.64 18.76ZM14.74 11.32C13.88 12.14 12.96 12.88 12.86 13.84V14.28H10.44V13.74C10.44 12.34 11.38 11.46 12.22 10.62C12.88 10 13.44 9.42 13.44 8.7C13.44 7.88 13 7.36 12.06 7.36C11.06 7.36 10.4 8.08 10.28 9.22H7.78C7.88 6.72 9.68 5.24 12.22 5.24C14.86 5.24 16.22 6.58 16.22 8.48C16.22 9.74 15.52 10.56 14.74 11.32Z",fill:e})}),dotGrid:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M6.99998 4.99999C6.99998 6.10455 6.10455 6.99998 4.99999 6.99998C3.89543 6.99998 3 6.10455 3 4.99999C3 3.89543 3.89543 3 4.99999 3C6.10455 3 6.99998 3.89543 6.99998 4.99999Z",fill:e}),p.jsx("path",{d:"M6.99998 12C6.99998 13.1046 6.10455 14 4.99999 14C3.89543 14 3 13.1046 3 12C3 10.8954 3.89543 10 4.99999 10C6.10455 10 6.99998 10.8954 6.99998 12Z",fill:e}),p.jsx("path",{d:"M6.99998 19C6.99998 20.1046 6.10455 21 4.99999 21C3.89543 21 3 20.1046 3 19C3 17.8954 3.89543 17 4.99999 17C6.10455 17 6.99998 17.8954 6.99998 19Z",fill:e}),p.jsx("path",{d:"M14 4.99999C14 6.10455 13.1046 6.99998 12 6.99998C10.8954 6.99998 10 6.10455 10 4.99999C10 3.89543 10.8954 3 12 3C13.1046 3 14 3.89543 14 4.99999Z",fill:e}),p.jsx("path",{d:"M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z",fill:e}),p.jsx("path",{d:"M14 19C14 20.1046 13.1046 21 12 21C10.8954 21 10 20.1046 10 19C10 17.8954 10.8954 17 12 17C13.1046 17 14 17.8954 14 19Z",fill:e}),p.jsx("path",{d:"M21 4.99999C21 6.10455 20.1046 6.99998 19 6.99998C17.8954 6.99998 17 6.10455 17 4.99999C17 3.89543 17.8954 3 19 3C20.1046 3 21 3.89543 21 4.99999Z",fill:e}),p.jsx("path",{d:"M21 12C21 13.1046 20.1046 14 19 14C17.8954 14 17 13.1046 17 12C17 10.8954 17.8954 10 19 10C20.1046 10 21 10.8954 21 12Z",fill:e}),p.jsx("path",{d:"M21 19C21 20.1046 20.1046 21 19 21C17.8954 21 17 20.1046 17 19C17 17.8954 17.8954 17 19 17C20.1046 17 21 17.8954 21 19Z",fill:e})]}),people:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M16.5835 6.58333C16.5835 9.11464 14.5315 11.1667 12.0002 11.1667C9.46887 11.1667 7.41684 9.11464 7.41684 6.58333C7.41684 4.05203 9.46887 2 12.0002 2C14.5315 2 16.5835 4.05203 16.5835 6.58333ZM15.3 12C17.35 12.1002 19.15 13.4357 19.8083 15.4057L22 22H2L4.19167 15.4057C4.85 13.4357 6.65 12.1002 8.7 12C8.88333 12.1002 10.2833 12.818 12 12.818C13.7167 12.818 15.1167 12.1002 15.3 12ZM6 9C6 10.6569 4.65685 12 3 12C1.34315 12 0 10.6569 0 9C0 7.34315 1.34315 6 3 6C4.65685 6 6 7.34315 6 9ZM21 12C22.6569 12 24 10.6569 24 9C24 7.34315 22.6569 6 21 6C19.3431 6 18 7.34315 18 9C18 10.6569 19.3431 12 21 12Z",fill:e})}),builderHammer:({color:e,width:t,height:n})=>p.jsxs("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M16.3 11.45L14.3 12.72L12.78 13.69L18.49 22.63C19.06 23.52 20.02 24.01 21.01 24.01C21.58 24.01 22.15 23.85 22.65 23.51C24 22.61 24.39 20.79 23.52 19.42L17.82 10.48L16.3 11.45Z",fill:e}),p.jsx("path",{d:"M11.16 11.16L12.68 10.19L14.69 8.92L16.21 7.95L24 3C24 3 19.96 0 14.28 0C11.02 0 8.88 0.78 6.5 2.25L0 6.5L5.5 14.75L11.16 11.15V11.16Z",fill:e})]}),eye:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M0.131956 12.5505C2.58714 17.4562 7.13762 20.5 12 20.5C16.8624 20.5 21.4049 17.4481 23.868 12.5505C24.044 12.2024 24.044 11.7976 23.868 11.4495C21.4129 6.54381 16.8624 3.5 12 3.5C7.13762 3.5 2.58714 6.54381 0.131956 11.4495C-0.0439853 11.7976 -0.0439853 12.2024 0.131956 12.5505ZM15.5987 11.9999C15.5987 14.0118 13.9875 15.6428 11.9999 15.6428C10.0124 15.6428 8.40117 14.0118 8.40117 11.9999C8.40117 9.98802 10.0124 8.35706 11.9999 8.35706C13.9875 8.35706 15.5987 9.98802 15.5987 11.9999Z",fill:e})}),map:({color:e,width:t,height:n})=>p.jsx("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4424 23.8252L11.5273 23.8726L11.5612 23.8916C11.6958 23.9627 11.8464 24 11.9994 24C12.1524 24 12.303 23.9627 12.4376 23.8916L12.4715 23.8738L12.5576 23.8252C13.0317 23.5503 13.4943 23.2569 13.9442 22.9457C15.1092 22.1415 16.1976 21.2362 17.1964 20.2409C19.5527 17.8822 22 14.3383 22 9.77851C22 7.18509 20.9464 4.69789 19.0711 2.86406C17.1957 1.03023 14.6522 0 12 0C9.34784 0 6.8043 1.03023 4.92893 2.86406C3.05357 4.69789 2 7.18509 2 9.77851C2 14.3371 4.44848 17.8822 6.80364 20.2409C7.80199 21.2362 8.89003 22.1414 10.0545 22.9457C10.5049 23.2569 10.9679 23.5503 11.4424 23.8252ZM12 13.3343C12.9644 13.3343 13.8893 12.9597 14.5713 12.2929C15.2532 11.626 15.6364 10.7216 15.6364 9.77851C15.6364 8.83545 15.2532 7.93101 14.5713 7.26416C13.8893 6.59732 12.9644 6.22269 12 6.22269C11.0356 6.22269 10.1107 6.59732 9.4287 7.26416C8.74675 7.93101 8.36364 8.83545 8.36364 9.77851C8.36364 10.7216 8.74675 11.626 9.4287 12.2929C10.1107 12.9597 11.0356 13.3343 12 13.3343Z",fill:e})})};function nl({name:e,color:t="white",width:n="24",height:r="24"}){const s=tl[e];return s?s({color:t,width:n,height:r}):null}var Vt=(e=>(e.Primary="primary",e.Secondary="secondary",e.Outlined="outlined",e))(Vt||{}),Et=(e=>(e.Medium="medium",e.Large="large",e))(Et||{});const rl={[Vt.Primary]:"bg-blue text-white border border-blue hover:bg-blue-80 active:bg-[#06318E]",[Vt.Secondary]:"bg-white border border-white text-palette-foreground hover:bg-zinc-15 active:bg-zinc-30",[Vt.Outlined]:"bg-transparent text-white border border-white hover:bg-white hover:text-black active:bg-[#E3E7E9]"},sl={[Et.Medium]:"text-md px-4 py-2 gap-3",[Et.Large]:"text-lg px-6 py-4 gap-5"},il={[Et.Medium]:"0.75rem",[Et.Large]:"1rem"};function al({children:e,onClick:t,disabled:n,variant:r=Vt.Primary,size:s=Et.Medium,iconName:i,roundedFull:a=!1,className:o,fullWidth:c=!1}){const u=el("text-md px-4 py-2 whitespace-nowrap","flex items-center justify-center","disabled:opacity-40 disabled:pointer-events-none","transition-all",rl[r],sl[s],a?"rounded-full":"rounded-lg",c?"w-full":"w-auto",o),l=il[s];return p.jsxs("button",{type:"button",onClick:t,disabled:n,className:u,children:[p.jsx("span",{children:e}),i&&p.jsx(nl,{name:i,width:l,height:l,color:"currentColor"})]})}function k(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:i=>t(e,i)}function Ae(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new gl(e.type);return`${e.name}(${or(e.inputs,{includeName:t})})`}function or(e,{includeName:t=!1}={}){return e?e.map(n=>ol(n,{includeName:t})).join(t?", ":","):""}function ol(e,{includeName:t}){return e.type.startsWith("tuple")?`(${or(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function be(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function V(e){return be(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Lo="2.22.17";let Rt={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Lo}`},w=class ns extends Error{constructor(t,n={}){var o;const r=(()=>{var c;return n.cause instanceof ns?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ns&&n.cause.docsPath||n.docsPath,i=(o=Rt.getDocsUrl)==null?void 0:o.call(Rt,{...n,docsPath:s}),a=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Rt.version?[`Version: ${Rt.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Lo}walk(t){return Mo(this,t)}};function Mo(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Mo(e.cause,t):t?null:e}class cl extends w{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class ta extends w{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Bo extends w{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${or(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class yn extends w{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class ul extends w{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class dl extends w{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${V(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class jo extends w{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class To extends w{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class ll extends w{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class $o extends w{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class na extends w{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Hn extends w{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class fl extends w{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class hl extends w{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class pl extends w{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Ae(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Ae(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class No extends w{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class Yt extends w{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${or(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class cr extends w{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ae(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class yl extends w{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ml extends w{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class bl extends w{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class gl extends w{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class wl extends w{constructor(t){super(`Type "${t}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class vl extends w{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Ro=class extends w{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Do=class extends w{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class ra extends w{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Q(e,{dir:t,size:n=32}={}){return typeof e=="string"?Qe(e,{dir:t,size:n}):xl(e,{dir:t,size:n})}function Qe(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Do({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function xl(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Do({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=t==="right";r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}let Uo=class extends w{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class _l extends w{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Cl extends w{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let El=class extends w{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function ut(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function we(e,{size:t}){if(V(e)>t)throw new El({givenSize:V(e),maxSize:t})}function he(e,t={}){const{signed:n}=t;t.size&&we(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Pl(e,t={}){let n=e;if(t.size&&(we(n,{size:t.size}),n=ut(n)),ut(n)==="0x00")return!1;if(ut(n)==="0x01")return!0;throw new Cl(n)}function Ue(e,t={}){return Number(he(e,t))}const Sl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fe(e,t={}){return typeof e=="number"||typeof e=="bigint"?S(e,t):typeof e=="string"?lt(e,t):typeof e=="boolean"?ii(e,t):Z(e,t)}function ii(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(we(n,{size:t.size}),Q(n,{size:t.size})):n}function Z(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Sl[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(we(r,{size:t.size}),Q(r,{dir:"right",size:t.size})):r}function S(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof e=="bigint"?"n":"";throw new Uo({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${e}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Q(o,{size:r}):o}const Al=new TextEncoder;function lt(e,t={}){const n=Al.encode(e);return Z(n,t)}const Il=new TextEncoder;function Bt(e,t={}){return typeof e=="number"||typeof e=="bigint"?Ol(e,t):typeof e=="boolean"?kl(e,t):be(e)?ge(e,t):dt(e,t)}function kl(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(we(n,{size:t.size}),Q(n,{size:t.size})):n}const Oe={zero:48,nine:57,A:65,F:70,a:97,f:102};function sa(e){if(e>=Oe.zero&&e<=Oe.nine)return e-Oe.zero;if(e>=Oe.A&&e<=Oe.F)return e-(Oe.A-10);if(e>=Oe.a&&e<=Oe.f)return e-(Oe.a-10)}function ge(e,t={}){let n=e;t.size&&(we(n,{size:t.size}),n=Q(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=sa(r.charCodeAt(o++)),u=sa(r.charCodeAt(o++));if(c===void 0||u===void 0)throw new w(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+u}return i}function Ol(e,t){const n=S(e,t);return ge(n)}function dt(e,t={}){const n=Il.encode(e);return typeof t.size=="number"?(we(n,{size:t.size}),Q(n,{dir:"right",size:t.size})):n}function ia(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ll(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ai(e,...t){if(!Ll(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function zn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fo(e,t){ai(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Cn=BigInt(2**32-1),aa=BigInt(32);function Ml(e,t=!1){return t?{h:Number(e&Cn),l:Number(e>>aa&Cn)}:{h:Number(e>>aa&Cn)|0,l:Number(e&Cn)|0}}function Bl(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=Ml(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]}const jl=(e,t,n)=>e<<n|t>>>32-n,Tl=(e,t,n)=>t<<n|e>>>32-n,$l=(e,t,n)=>t<<n-32|e>>>64-n,Nl=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Tr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function xe(e,t){return e<<32-t|e>>>t}const oa=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Dl(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function ca(e){for(let t=0;t<e.length;t++)e[t]=Dl(e[t])}function Ul(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function oi(e){return typeof e=="string"&&(e=Ul(e)),ai(e),e}let Go=class{clone(){return this._cloneInto()}};function Ho(e){const t=r=>e().update(oi(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const zo=[],Vo=[],Wo=[],Fl=BigInt(0),Dt=BigInt(1),Gl=BigInt(2),Hl=BigInt(7),zl=BigInt(256),Vl=BigInt(113);for(let e=0,t=Dt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],zo.push(2*(5*r+n)),Vo.push((e+1)*(e+2)/2%64);let s=Fl;for(let i=0;i<7;i++)t=(t<<Dt^(t>>Hl)*Vl)%zl,t&Gl&&(s^=Dt<<(Dt<<BigInt(i))-Dt);Wo.push(s)}const[Wl,ql]=Bl(Wo,!0),ua=(e,t,n)=>n>32?$l(e,t,n):jl(e,t,n),da=(e,t,n)=>n>32?Nl(e,t,n):Tl(e,t,n);function Kl(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],l=n[c+1],d=ua(u,l,1)^n[o],h=da(u,l,1)^n[o+1];for(let f=0;f<50;f+=10)e[a+f]^=d,e[a+f+1]^=h}let s=e[2],i=e[3];for(let a=0;a<24;a++){const o=Vo[a],c=ua(s,i,o),u=da(s,i,o),l=zo[a];s=e[l],i=e[l+1],e[l]=c,e[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=e[a+o];for(let o=0;o<10;o++)e[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}e[0]^=Wl[r],e[1]^=ql[r]}n.fill(0)}let Zl=class qo extends Go{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ia(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Rl(this.state)}keccak(){oa||ca(this.state32),Kl(this.state32,this.rounds),oa||ca(this.state32),this.posOut=0,this.pos=0}update(t){zn(this);const{blockLen:n,state:r}=this;t=oi(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){zn(this,!1),ai(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ia(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Fo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new qo(n,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}};const Yl=(e,t,n)=>Ho(()=>new Zl(t,e,n)),Jl=Yl(1,136,256/8);function G(e,t){const n=t||"hex",r=Jl(be(e,{strict:!1})?Bt(e):e);return n==="bytes"?r:fe(r)}const Xl=e=>G(Bt(e));function Ql(e){return Xl(e)}function e0(e){let t=!0,n="",r=0,s="",i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),o==="("&&r++,o===")"&&r--,!!t){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=o,n+=o}}if(!i)throw new w("Unable to normalize signature.");return s}const t0=e=>{const t=typeof e=="string"?e:Kd(e);return e0(t)};function Ko(e){return Ql(t0(e))}const ur=Ko;class Fe extends w{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class dr extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const $r=new dr(8192);function lr(e,t){if($r.has(`${e}.${t}`))return $r.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=G(dt(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return $r.set(`${e}.${t}`,i),i}function n0(e,t){if(!ne(e,{strict:!1}))throw new Fe({address:e});return lr(e,t)}const r0=/^0x[a-fA-F0-9]{40}$/,Nr=new dr(8192);function ne(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Nr.has(r))return Nr.get(r);const s=r0.test(e)?e.toLowerCase()===e?!0:n?lr(e)===e:!0:!1;return Nr.set(r,s),s}function re(e){return typeof e[0]=="string"?pt(e):s0(e)}function s0(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function pt(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Pt(e,t,n,{strict:r}={}){return be(e,{strict:!1})?Xo(e,t,n,{strict:r}):Jo(e,t,n,{strict:r})}function Zo(e,t){if(typeof t=="number"&&t>0&&t>V(e)-1)throw new Ro({offset:t,position:"start",size:V(e)})}function Yo(e,t,n){if(typeof t=="number"&&typeof n=="number"&&V(e)!==n-t)throw new Ro({offset:n,position:"end",size:V(e)})}function Jo(e,t,n,{strict:r}={}){Zo(e,t);const s=e.slice(t,n);return r&&Yo(s,t,n),s}function Xo(e,t,n,{strict:r}={}){Zo(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Yo(s,t,n),s}const i0=/^(.*)\[([0-9]*)\]$/,Qo=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ci=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function me(e,t){if(e.length!==t.length)throw new jo({expectedLength:e.length,givenLength:t.length});const n=a0({params:e,values:t}),r=di(n);return r.length===0?"0x":r}function a0({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(ui({param:e[r],value:t[r]}));return n}function ui({param:e,value:t}){const n=li(e.type);if(n){const[r,s]=n;return c0(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return h0(t,{param:e});if(e.type==="address")return o0(t);if(e.type==="bool")return d0(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=ci.exec(e.type)??[];return l0(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return u0(t,{param:e});if(e.type==="string")return f0(t);throw new yl(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function di(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=V(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(S(t+s,{size:32})),r.push(o),s+=V(o)):n.push(o)}return re([...n,...r])}function o0(e){if(!ne(e))throw new Fe({address:e});return{dynamic:!1,encoded:Qe(e.toLowerCase())}}function c0(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new bl(e);if(!r&&e.length!==t)throw new ul({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=ui({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=di(i);if(r){const o=S(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?re([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:re(i.map(({encoded:a})=>a))}}function u0(e,{param:t}){const[,n]=t.type.split("bytes"),r=V(e);if(!n){let s=e;return r%32!==0&&(s=Qe(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:re([Qe(S(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new dl({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Qe(e,{dir:"right"})}}function d0(e){if(typeof e!="boolean")throw new w(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Qe(ii(e))}}function l0(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Uo({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:S(e,{size:32,signed:t})}}function f0(e){const t=lt(e),n=Math.ceil(V(t)/32),r=[];for(let s=0;s<n;s++)r.push(Qe(Pt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:re([Qe(S(V(t),{size:32})),...r])}}function h0(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=ui({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?di(r):re(r.map(({encoded:s})=>s))}}function li(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const fr=e=>Pt(Ko(e),0,4);function mn(e){const{abi:t,args:n=[],name:r}=e,s=be(r,{strict:!1}),i=t.filter(o=>s?o.type==="function"?fr(o)===r:o.type==="event"?ur(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in o&&o.inputs[l];return d?rs(u,d):!1})){if(a&&"inputs"in a&&a.inputs){const u=ec(o.inputs,a.inputs,n);if(u)throw new pl({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||i[0]}function rs(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ne(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>rs(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>rs(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ec(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return ec(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?ne(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?ne(n[r],{strict:!1}):!1)return a}}const la="/docs/contract/encodeEventTopics";function bn(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=mn({abi:t,name:n});if(!u)throw new na(n,{docsPath:la});s=u}if(s.type!=="event")throw new na(void 0,{docsPath:la});const i=Ae(s),a=ur(i);let o=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];l.length>0&&(o=(u==null?void 0:u.map((d,h)=>Array.isArray(l[h])?l[h].map((f,y)=>fa({param:d,value:l[h][y]})):typeof l[h]<"u"&&l[h]!==null?fa({param:d,value:l[h]}):null))??[])}return[a,...o]}function fa({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return G(Bt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new vl(e.type);return me([e],[t])}function hr(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:i,response:a,status:o,transport:c})=>{o==="success"&&t===i&&(n[a]=c.request)})),i=>n[i]||e.request}async function tc(e,t){const{address:n,abi:r,args:s,eventName:i,fromBlock:a,strict:o,toBlock:c}=t,u=hr(e,{method:"eth_newFilter"}),l=i?bn({abi:r,args:s,eventName:i}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?S(a):a,toBlock:typeof c=="bigint"?S(c):c,topics:l}]});return{abi:r,args:s,eventName:i,id:d,request:u(d),strict:!!o,type:"event"}}function ce(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const ha="/docs/contract/encodeFunctionData";function p0(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const i=mn({abi:t,args:n,name:r});if(!i)throw new Hn(r,{docsPath:ha});s=i}if(s.type!=="function")throw new Hn(void 0,{docsPath:ha});return{abi:[s],functionName:fr(Ae(s))}}function se(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var o;return e.abi.length===1&&((o=e.functionName)!=null&&o.startsWith("0x"))?e:p0(e)})(),s=n[0],i=r,a="inputs"in s&&s.inputs?me(s.inputs,t??[]):void 0;return pt([i,a??"0x"])}const nc={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},y0={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},m0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class pa extends w{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class rc extends w{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class b0 extends w{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const g0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new b0({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new rc({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new pa({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new pa({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function fi(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(g0);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function w0(e,t={}){typeof t.size<"u"&&we(e,{size:t.size});const n=Z(e,t);return he(n,t)}function v0(e,t={}){let n=e;if(typeof t.size<"u"&&(we(n,{size:t.size}),n=ut(n)),n.length>1||n[0]>1)throw new _l(n);return!!n[0]}function De(e,t={}){typeof t.size<"u"&&we(e,{size:t.size});const n=Z(e,t);return Ue(n,t)}function x0(e,t={}){let n=e;return typeof t.size<"u"&&(we(n,{size:t.size}),n=ut(n,{dir:"right"})),new TextDecoder().decode(n)}function jt(e,t){const n=typeof t=="string"?ge(t):t,r=fi(n);if(V(n)===0&&e.length>0)throw new yn;if(V(t)&&V(t)<32)throw new Bo({data:typeof t=="string"?t:Z(t),params:e,size:V(t)});let s=0;const i=[];for(let a=0;a<e.length;++a){const o=e[a];r.setPosition(s);const[c,u]=vt(r,o,{staticPosition:0});s+=u,i.push(c)}return i}function vt(e,t,{staticPosition:n}){const r=li(t.type);if(r){const[s,i]=r;return C0(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return A0(e,t,{staticPosition:n});if(t.type==="address")return _0(e);if(t.type==="bool")return E0(e);if(t.type.startsWith("bytes"))return P0(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return S0(e,t);if(t.type==="string")return I0(e,{staticPosition:n});throw new ml(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const ya=32,ss=32;function _0(e){const t=e.readBytes(32);return[lr(Z(Jo(t,-20))),32]}function C0(e,t,{length:n,staticPosition:r}){if(!n){const a=De(e.readBytes(ss)),o=r+a,c=o+ya;e.setPosition(o);const u=De(e.readBytes(ya)),l=Jt(t);let d=0;const h=[];for(let f=0;f<u;++f){e.setPosition(c+(l?f*32:d));const[y,m]=vt(e,t,{staticPosition:c});d+=m,h.push(y)}return e.setPosition(r+32),[h,32]}if(Jt(t)){const a=De(e.readBytes(ss)),o=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(o+u*32);const[l]=vt(e,t,{staticPosition:o});c.push(l)}return e.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=vt(e,t,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function E0(e){return[v0(e.readBytes(32),{size:32}),32]}function P0(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=De(e.readBytes(32));e.setPosition(n+a);const o=De(e.readBytes(32));if(o===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(o);return e.setPosition(n+32),[Z(c),32]}return[Z(e.readBytes(Number.parseInt(s),32)),32]}function S0(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?w0(s,{signed:n}):De(s,{signed:n}),32]}function A0(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(Jt(t)){const a=De(e.readBytes(ss)),o=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(o+i);const[l,d]=vt(e,u,{staticPosition:o});i+=d,s[r?c:u==null?void 0:u.name]=l}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const o=t.components[a],[c,u]=vt(e,o,{staticPosition:n});s[r?a:o==null?void 0:o.name]=c,i+=u}return[s,i]}function I0(e,{staticPosition:t}){const n=De(e.readBytes(32)),r=t+n;e.setPosition(r);const s=De(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),a=x0(ut(i));return e.setPosition(t+32),[a,32]}function Jt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Jt);const n=li(e.type);return!!(n&&Jt({...e,type:n[1]}))}function sc(e){const{abi:t,data:n}=e,r=Pt(n,0,4);if(r==="0x")throw new yn;const i=[...t||[],y0,m0].find(a=>a.type==="error"&&r===fr(Ae(a)));if(!i)throw new To(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?jt(i.inputs,Pt(n,4)):void 0,errorName:i.name}}const J=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function ic({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof t[i]=="object"?J(t[i]):t[i]}`).join(", ")})`}const k0={gwei:9,wei:18},ac={ether:-9,wei:9};function oc(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function cc(e,t="wei"){return oc(e,k0[t])}function oe(e,t="wei"){return oc(e,ac[t])}class O0 extends w{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class L0 extends w{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ma(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function M0(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=ma(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=ma(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function gn(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class B0 extends w{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class j0 extends w{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",gn(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class uc extends w{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){let a="Transaction";r&&i!==void 0&&(a=`Transaction at block time "${r}" at index "${i}"`),t&&i!==void 0&&(a=`Transaction at block hash "${t}" at index "${i}"`),n&&i!==void 0&&(a=`Transaction at block number "${n}" at index "${i}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class dc extends w{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class T0 extends w{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const $0=e=>e,hi=e=>e;class lc extends w{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h,stateOverride:f}){var x;const y=n?ce(n):void 0;let m=gn({from:y==null?void 0:y.address,to:d,value:typeof h<"u"&&`${cc(h)} ${((x=s==null?void 0:s.nativeCurrency)==null?void 0:x.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${oe(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l});f&&(m+=`
${M0(f)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class fc extends w{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:a,sender:o}){const c=mn({abi:n,args:r,name:a}),u=c?ic({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Ae(c,{includeName:!0}):void 0,d=gn({address:s&&$0(s),function:l,args:u&&u!=="()"&&`${[...Array((a==null?void 0:a.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:o});super(t.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=a,this.sender=o}}class Vn extends w{constructor({abi:t,data:n,functionName:r,message:s}){let i,a,o,c;if(n&&n!=="0x")try{a=sc({abi:t,data:n});const{abiItem:l,errorName:d,args:h}=a;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=nc[f]}else{const f=l?Ae(l,{includeName:!0}):void 0,y=l&&h?ic({abiItem:l,args:h,includeFunctionName:!1,includeName:!1}):void 0;o=[f?`Error: ${f}`:"",y&&y!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof To&&(u=i.signature,o=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=n,this.reason=c,this.signature=u}}class hc extends w{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class N0 extends w{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class pr extends w{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class Wt extends w{constructor({body:t,cause:n,details:r,headers:s,status:i,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${hi(a)}`,t&&`Request body: ${J(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=i,this.url=a}}class pi extends w{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${hi(r)}`,`Request body: ${J(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class ba extends w{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${hi(n)}`,`Request body: ${J(t)}`],name:"TimeoutError"})}}const R0=-1;class ie extends w{constructor(t,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:a}){super(a,{cause:t,docsPath:r,metaMessages:s||(t==null?void 0:t.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||t.name,this.code=t instanceof pi?t.code:n??R0}}class Tt extends ie{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Xt extends ie{constructor(t){super(t,{code:Xt.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Qt extends ie{constructor(t){super(t,{code:Qt.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class en extends ie{constructor(t,{method:n}={}){super(t,{code:en.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(en,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class tn extends ie{constructor(t){super(t,{code:tn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ft extends ie{constructor(t){super(t,{code:ft.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ht extends ie{constructor(t){super(t,{code:ht.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ht,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class nn extends ie{constructor(t){super(t,{code:nn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class rn extends ie{constructor(t){super(t,{code:rn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class sn extends ie{constructor(t){super(t,{code:sn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ot extends ie{constructor(t,{method:n}={}){super(t,{code:ot.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(ot,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class St extends ie{constructor(t){super(t,{code:St.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class an extends ie{constructor(t){super(t,{code:an.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class xt extends Tt{constructor(t){super(t,{code:xt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class on extends Tt{constructor(t){super(t,{code:on.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(on,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class cn extends Tt{constructor(t,{method:n}={}){super(t,{code:cn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class un extends Tt{constructor(t){super(t,{code:un.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class dn extends Tt{constructor(t){super(t,{code:dn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class ln extends Tt{constructor(t){super(t,{code:ln.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class D0 extends ie{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const U0=3;function At(e,{abi:t,address:n,args:r,docsPath:s,functionName:i,sender:a}){const o=e instanceof pr?e:e instanceof w?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:l,message:d,shortMessage:h}=o,f=e instanceof yn?new hc({functionName:i}):[U0,ft.code].includes(c)&&(u||l||d||h)?new Vn({abi:t,data:typeof u=="object"?u.data:u,functionName:i,message:o instanceof pi?l:h??d}):e;return new fc(f,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:i,sender:a})}function F0(e){const t=G(`0x${e.substring(4)}`).substring(26);return lr(`0x${t}`)}async function G0({hash:e,signature:t}){const n=be(e)?e:fe(e),{secp256k1:r}=await So(async()=>{const{secp256k1:a}=await import("./secp256k1-B-O1ujgT.js").then(o=>o.a);return{secp256k1:a}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:l,v:d,yParity:h}=t,f=Number(h??d),y=ga(f);return new r.Signature(he(u),he(l)).addRecoveryBit(y)}const a=be(t)?t:fe(t),o=Ue(`0x${a.slice(130)}`),c=ga(o);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ga(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function pc({hash:e,signature:t}){return F0(await G0({hash:e,signature:t}))}function H0(e,t="hex"){const n=yc(e),r=fi(new Uint8Array(n.length));return n.encode(r),t==="hex"?Z(r.bytes):r.bytes}function yc(e){return Array.isArray(e)?z0(e.map(t=>yc(t))):V0(e)}function z0(e){const t=e.reduce((s,i)=>s+i.length,0),n=mc(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function V0(e){const t=typeof e=="string"?ge(e):e,n=mc(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function mc(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new w("Length is too large.")}function W0(e){const{chainId:t,contractAddress:n,nonce:r,to:s}=e,i=G(pt(["0x05",H0([t?S(t):"0x",n,r?S(r):"0x"])]));return s==="bytes"?ge(i):i}async function q0(e){const{authorization:t,signature:n}=e;return pc({hash:W0(t),signature:n??t})}class K0 extends w{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){var y;const f=gn({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${cc(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${oe(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}let gt=class extends w{constructor({cause:t,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}};Object.defineProperty(gt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(gt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Wn extends w{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${oe(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(Wn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class is extends w{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${oe(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(is,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class as extends w{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(as,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class os extends w{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(os,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class cs extends w{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(cs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class us extends w{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(us,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ds extends w{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ds,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ls extends w{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ls,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class fs extends w{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(fs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class qn extends w{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${oe(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${oe(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(qn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class yr extends w{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function yi(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof w?e.walk(s=>(s==null?void 0:s.code)===gt.code):e;return r instanceof w?new gt({cause:e,message:r.details}):gt.nodeMessage.test(n)?new gt({cause:e,message:e.details}):Wn.nodeMessage.test(n)?new Wn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):is.nodeMessage.test(n)?new is({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):as.nodeMessage.test(n)?new as({cause:e,nonce:t==null?void 0:t.nonce}):os.nodeMessage.test(n)?new os({cause:e,nonce:t==null?void 0:t.nonce}):cs.nodeMessage.test(n)?new cs({cause:e,nonce:t==null?void 0:t.nonce}):us.nodeMessage.test(n)?new us({cause:e}):ds.nodeMessage.test(n)?new ds({cause:e,gas:t==null?void 0:t.gas}):ls.nodeMessage.test(n)?new ls({cause:e,gas:t==null?void 0:t.gas}):fs.nodeMessage.test(n)?new fs({cause:e}):qn.nodeMessage.test(n)?new qn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new yr({cause:e})}function Z0(e,{docsPath:t,...n}){const r=(()=>{const s=yi(e,n);return s instanceof yr?e:s})();return new K0(r,{docsPath:t,...n})}function mi(e,{format:t}){if(!t)return{};const n={};function r(i){const a=Object.keys(i);for(const o of a)o in e&&(n[o]=e[o]),i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])&&r(i[o])}const s=t(e||{});return r(s),n}const Y0={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function mr(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=J0(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>Z(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=S(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=S(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=S(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=S(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=S(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=S(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Y0[e.type]),typeof e.value<"u"&&(t.value=S(e.value)),t}function J0(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:S(t.chainId),nonce:S(t.nonce),...typeof t.yParity<"u"?{yParity:S(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:S(t.v)}:{}}))}function wa(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new ra({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new ra({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function X0(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:i}=e,a={};if(i!==void 0&&(a.code=i),t!==void 0&&(a.balance=S(t)),n!==void 0&&(a.nonce=S(n)),r!==void 0&&(a.state=wa(r)),s!==void 0){if(a.state)throw new L0;a.stateDiff=wa(s)}return a}function br(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ne(n,{strict:!1}))throw new Fe({address:n});if(t[n])throw new O0({address:n});t[n]=X0(r)}return t}const Q0=2n**256n-1n;function wn(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=e,a=t?ce(t):void 0;if(a&&!ne(a.address))throw new Fe({address:a.address});if(i&&!ne(i))throw new Fe({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new B0;if(r&&r>Q0)throw new Wn({maxFeePerGas:r});if(s&&r&&s>r)throw new qn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class ef extends w{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class bi extends w{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class tf extends w{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${oe(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class bc extends w{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const gc={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function wc(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Ue(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Ue(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?gc[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=nf(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function nf(e){return e.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function vc(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:wc(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Se(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){var l,d,h;const i=r??"latest",a=s??!1,o=n!==void 0?S(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,a]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[o||i,a]},{dedupe:!!o}),!c)throw new bc({blockHash:t,blockNumber:n});return(((h=(d=(l=e.chain)==null?void 0:l.formatters)==null?void 0:d.block)==null?void 0:h.format)||vc)(c)}async function gi(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function rf(e,t){return xc(e,t)}async function xc(e,t){var i,a;const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee);if(typeof o=="function"){const u=n||await k(e,Se,"getBlock")({}),l=await o({block:u,client:e,request:s});if(l===null)throw new Error;return l}if(typeof o<"u")return o;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return he(c)}catch{const[o,c]=await Promise.all([n?Promise.resolve(n):k(e,Se,"getBlock")({}),k(e,gi,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new bi;const u=c-o.baseFeePerGas;return u<0n?0n:u}}async function _c(e,t){return hs(e,t)}async function hs(e,t){var h,f;const{block:n,chain:r=e.chain,request:s,type:i="eip1559"}=t||{},a=await(async()=>{var y,m;return typeof((y=r==null?void 0:r.fees)==null?void 0:y.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(a<1)throw new ef;const c=10**(((h=a.toString().split(".")[1])==null?void 0:h.length)??0),u=y=>y*BigInt(Math.ceil(a*c))/BigInt(c),l=n||await k(e,Se,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const y=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:i});if(y!==null)return y}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new bi;const y=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await xc(e,{block:l,chain:r,request:s}),m=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+y,maxPriorityFeePerGas:y}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await k(e,gi,"getGasPrice")({}))}}async function Cc(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?S(r):n]},{dedupe:!!r});return Ue(s)}function Ec(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>ge(i)):e.blobs,s=[];for(const i of r)s.push(Uint8Array.from(t.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Z(i))}function Pc(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(a=>ge(a)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(a=>ge(a)):e.commitments,i=[];for(let a=0;a<r.length;a++){const o=r[a],c=s[a];i.push(Uint8Array.from(t.computeBlobKzgProof(o,c)))}return n==="bytes"?i:i.map(a=>Z(a))}function sf(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}function af(e,t,n){return e&t^~e&n}function of(e,t,n){return e&t^e&n^t&n}let cf=class extends Go{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Tr(this.buffer)}update(t){zn(this);const{view:n,buffer:r,blockLen:s}=this;t=oi(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Tr(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){zn(this),Fo(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;sf(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Tr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)o.setUint32(4*d,l[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%n&&t.buffer.set(r),t}};const uf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ve=new Uint32Array(64);let df=class extends cf{constructor(){super(64,32,8,!1),this.A=ze[0]|0,this.B=ze[1]|0,this.C=ze[2]|0,this.D=ze[3]|0,this.E=ze[4]|0,this.F=ze[5]|0,this.G=ze[6]|0,this.H=ze[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ve[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ve[d-15],f=Ve[d-2],y=xe(h,7)^xe(h,18)^h>>>3,m=xe(f,17)^xe(f,19)^f>>>10;Ve[d]=m+Ve[d-7]+y+Ve[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=xe(o,6)^xe(o,11)^xe(o,25),f=l+h+af(o,c,u)+uf[d]+Ve[d]|0,m=(xe(r,2)^xe(r,13)^xe(r,22))+of(r,s,i)|0;l=u,u=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,a,o,c,u,l)}roundClean(){Ve.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const lf=Ho(()=>new df);function ff(e,t){return lf(be(e,{strict:!1})?Bt(e):e)}function hf(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=ff(t);return s.set([n],0),r==="bytes"?s:Z(s)}function pf(e){const{commitments:t,version:n}=e,r=e.to,s=[];for(const i of t)s.push(hf({commitment:i,to:r,version:n}));return s}const va=6,Sc=32,wi=4096,Ac=Sc*wi,xa=Ac*va-1-1*wi*va;class yf extends w{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class mf extends w{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function bf(e){const t=typeof e.data=="string"?ge(e.data):e.data,n=V(t);if(!n)throw new mf;if(n>xa)throw new yf({maxSize:xa,size:n});const r=[];let s=!0,i=0;for(;s;){const a=fi(new Uint8Array(Ac));let o=0;for(;o<wi;){const c=t.slice(i,i+(Sc-1));if(a.pushByte(0),a.pushBytes(c),c.length<31){a.pushByte(128),s=!1;break}o++,i+=31}r.push(a)}return r.map(a=>Z(a.bytes))}function gf(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??bf({data:t}),i=e.commitments??Ec({blobs:s,kzg:n,to:r}),a=e.proofs??Pc({blobs:s,commitments:i,kzg:n,to:r}),o=[];for(let c=0;c<s.length;c++)o.push({blob:s[c],commitment:i[c],proof:a[c]});return o}function wf(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new j0({transaction:e})}async function gr(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Ue(t)}const vf=["blobVersionedHashes","chainId","fees","gas","nonce","type"],_a=new Map;async function Ic(e,t){const{account:n=e.account,blobs:r,chain:s,gas:i,kzg:a,nonce:o,nonceManager:c,parameters:u=vf,type:l}=t,d=n&&ce(n),h={...t,...d?{from:d==null?void 0:d.address}:{}};let f;async function y(){return f||(f=await k(e,Se,"getBlock")({blockTag:"latest"}),f)}let m;async function x(){return m||(s?s.id:typeof t.chainId<"u"?t.chainId:(m=await k(e,gr,"getChainId")({}),m))}if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&a){const b=Ec({blobs:r,kzg:a});if(u.includes("blobVersionedHashes")){const g=pf({commitments:b,to:"hex"});h.blobVersionedHashes=g}if(u.includes("sidecars")){const g=Pc({blobs:r,commitments:b,kzg:a}),_=gf({blobs:r,commitments:b,proofs:g,to:"hex"});h.sidecars=_}}if(u.includes("chainId")&&(h.chainId=await x()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{h.type=wf(h)}catch{let b=_a.get(e.uid);if(typeof b>"u"){const g=await y();b=typeof(g==null?void 0:g.baseFeePerGas)=="bigint",_a.set(e.uid,b)}h.type=b?"eip1559":"legacy"}if(u.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const b=await y(),{maxFeePerGas:g,maxPriorityFeePerGas:_}=await hs(e,{block:b,chain:s,request:h});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<_)throw new tf({maxPriorityFeePerGas:_});h.maxPriorityFeePerGas=_,h.maxFeePerGas=g}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new bi;if(typeof t.gasPrice>"u"){const b=await y(),{gasPrice:g}=await hs(e,{block:b,chain:s,request:h,type:"legacy"});h.gasPrice=g}}if(u.includes("gas")&&typeof i>"u"&&(h.gas=await k(e,vi,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),u.includes("nonce")&&typeof o>"u"&&d)if(c){const b=await x();h.nonce=await c.consume({address:d.address,chainId:b,client:e})}else h.nonce=await k(e,Cc,"getTransactionCount")({address:d.address,blockTag:"pending"});return wn(h),delete h.parameters,h}async function kc(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?S(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(i)}async function vi(e,t){var s,i,a;const{account:n=e.account}=t,r=n?ce(n):void 0;try{let R=function(N){const{block:F,request:ee,rpcStateOverride:ue}=N;return e.request({method:"eth_estimateGas",params:ue?[ee,F??"latest",ue]:F?[ee,F]:[ee]})};const{accessList:o,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:h,data:f,gas:y,gasPrice:m,maxFeePerBlobGas:x,maxFeePerGas:b,maxPriorityFeePerGas:g,nonce:_,value:E,stateOverride:M,...C}=await Ic(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),I=(d?S(d):void 0)||h,L=br(M),j=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await q0({authorization:c[0]}).catch(()=>{throw new w("`to` is required. Could not infer from `authorizationList`")})})();wn(t);const T=(a=(i=(s=e.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:a.format,A=(T||mr)({...mi(C,{format:T}),from:r==null?void 0:r.address,accessList:o,authorizationList:c,blobs:u,blobVersionedHashes:l,data:f,gas:y,gasPrice:m,maxFeePerBlobGas:x,maxFeePerGas:b,maxPriorityFeePerGas:g,nonce:_,to:j,value:E});let $=BigInt(await R({block:I,request:A,rpcStateOverride:L}));if(c){const N=await kc(e,{address:A.from}),F=await Promise.all(c.map(async ee=>{const{contractAddress:ue}=ee,ve=await R({block:I,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:ue,value:S(N)},rpcStateOverride:L}).catch(()=>100000n);return 2n*BigInt(ve)}));$+=F.reduce((ee,ue)=>ee+ue,0n)}return $}catch(o){throw Z0(o,{...t,account:r,chain:e.chain})}}async function xf(e,t){const{abi:n,address:r,args:s,functionName:i,dataSuffix:a,...o}=t,c=se({abi:n,args:s,functionName:i});try{return await k(e,vi,"estimateGas")({data:`${c}${a?a.replace("0x",""):""}`,to:r,...o})}catch(u){const l=o.account?ce(o.account):void 0;throw At(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l==null?void 0:l.address})}}function xi(e,t){if(!ne(e,{strict:!1}))throw new Fe({address:e});if(!ne(t,{strict:!1}))throw new Fe({address:t});return e.toLowerCase()===t.toLowerCase()}const Ca="/docs/contract/decodeEventLog";function _i(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[a,...o]=s;if(!a)throw new ll({docsPath:Ca});const c=t.length===1?t[0]:t.find(m=>m.type==="event"&&a===ur(Ae(m)));if(!(c&&"name"in c)||c.type!=="event")throw new $o(a,{docsPath:Ca});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(m=>!("name"in m&&m.name));let h=d?[]:{};const f=l.filter(m=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const x=f[m],b=o[m];if(!b)throw new cr({abiItem:c,param:x});h[d?m:x.name||m]=_f({param:x,value:b})}const y=l.filter(m=>!("indexed"in m&&m.indexed));if(y.length>0){if(n&&n!=="0x")try{const m=jt(y,n);if(m)if(d)h=[...h,...m];else for(let x=0;x<y.length;x++)h[y[x].name]=m[x]}catch(m){if(i)throw m instanceof Bo||m instanceof rc?new Yt({abiItem:c,data:n,params:y,size:V(n)}):m}else if(i)throw new Yt({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(h).length>0?h:void 0}}function _f({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(jt([e],t)||[])[0]}function Ci(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{var o;try{const c=t.find(l=>l.type==="event"&&a.topics[0]===ur(l));if(!c)return null;const u=_i({...a,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!Cf({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,l;if(c instanceof $o)return null;if(c instanceof Yt||c instanceof cr){if(s)return null;u=c.abiItem.name,l=(o=c.abiItem.inputs)==null?void 0:o.some(d=>!("name"in d&&d.name))}return{...a,args:l?[]:{},eventName:u}}}).filter(Boolean)}function Cf(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,a,o){try{return i.type==="address"?xi(a,o):i.type==="string"||i.type==="bytes"?G(Bt(a))===o:a===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,a)=>{if(i==null)return!0;const o=n[a];return o?(Array.isArray(i)?i:[i]).some(u=>s(o,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(a==null)return!0;const o=n.find(u=>u.name===i);return o?(Array.isArray(a)?a:[a]).some(u=>s(o,u,t[i])):!1}):!1}function Ie(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Ei(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:i,events:a,args:o,strict:c}={}){const u=c??!1,l=a??(i?[i]:void 0);let d=[];l&&(d=[l.flatMap(m=>bn({abi:[m],eventName:m.name,args:a?void 0:o}))],i&&(d=d[0]));let h;n?h=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):h=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?S(r):r,toBlock:typeof s=="bigint"?S(s):s}]});const f=h.map(y=>Ie(y));return l?Ci({abi:l,args:o,logs:f,strict:u}):f}async function Oc(e,t){const{abi:n,address:r,args:s,blockHash:i,eventName:a,fromBlock:o,toBlock:c,strict:u}=t,l=a?mn({abi:n,name:a}):void 0,d=l?void 0:n.filter(h=>h.type==="event");return k(e,Ei,"getLogs")({address:r,args:s,blockHash:i,event:l,events:d,fromBlock:o,toBlock:c,strict:u})}const Rr="/docs/contract/decodeFunctionResult";function yt(e){const{abi:t,args:n,functionName:r,data:s}=e;let i=t[0];if(r){const o=mn({abi:t,args:n,name:r});if(!o)throw new Hn(r,{docsPath:Rr});i=o}if(i.type!=="function")throw new Hn(void 0,{docsPath:Rr});if(!i.outputs)throw new fl(i.name,{docsPath:Rr});const a=jt(i.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const ps=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Lc=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Mc=[...Lc,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Ef=[...Lc,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Ea=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Pa=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Sa=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Pf="0x82ad56cb",Sf="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Af="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",If="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class ys extends w{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Bc extends w{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Dr="/docs/contract/encodeDeployData";function Pi(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new cl({docsPath:Dr});if(!("inputs"in s))throw new ta({docsPath:Dr});if(!s.inputs||s.inputs.length===0)throw new ta({docsPath:Dr});const i=me(s.inputs,n);return pt([r,i])}function $t({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new ys({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new ys({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function jc(e,{docsPath:t,...n}){const r=(()=>{const s=yi(e,n);return s instanceof yr?e:s})();return new lc(r,{docsPath:t,...n})}function Tc(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const Ur=new Map;function $c({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();a();const d=l.map(({args:h})=>h);d.length!==0&&e(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<l.length;f++){const{resolve:y}=l[f];y==null||y([h[f],h])}}).catch(h=>{for(let f=0;f<l.length;f++){const{reject:y}=l[f];y==null||y(h)}})},a=()=>Ur.delete(t),o=()=>c().map(({args:l})=>l),c=()=>Ur.get(t)||[],u=l=>Ur.set(t,[...c(),l]);return{flush:a,async schedule(l){const{promise:d,resolve:h,reject:f}=Tc();return(n==null?void 0:n([...o(),l]))&&i(),c().length>0?(u({args:l,resolve:h,reject:f}),d):(u({args:l,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function wr(e,t){var T,v,A,R;const{account:n=e.account,batch:r=!!((T=e.batch)!=null&&T.multicall),blockNumber:s,blockTag:i="latest",accessList:a,blobs:o,code:c,data:u,factory:l,factoryData:d,gas:h,gasPrice:f,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:x,nonce:b,to:g,value:_,stateOverride:E,...M}=t,C=n?ce(n):void 0;if(c&&(l||d))throw new w("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&g)throw new w("Cannot provide both `code` & `to` as parameters.");const P=c&&u,I=l&&d&&g&&u,L=P||I,j=P?Lf({code:c,data:u}):I?Mf({data:u,factory:l,factoryData:d,to:g}):u;try{wn(t);const N=(s?S(s):void 0)||i,F=br(E),ee=(R=(A=(v=e.chain)==null?void 0:v.formatters)==null?void 0:A.transactionRequest)==null?void 0:R.format,ve=(ee||mr)({...mi(M,{format:ee}),from:C==null?void 0:C.address,accessList:a,blobs:o,data:j,gas:h,gasPrice:f,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:x,nonce:b,to:L?void 0:g,value:_});if(r&&kf({request:ve})&&!F)try{return await Of(e,{...ve,blockNumber:s,blockTag:i})}catch(jr){if(!(jr instanceof Bc)&&!(jr instanceof ys))throw jr}const Xi=await e.request({method:"eth_call",params:F?[ve,N,F]:[ve,N]});return Xi==="0x"?{data:void 0}:{data:Xi}}catch($){const N=Bf($),{offchainLookup:F,offchainLookupSignature:ee}=await So(async()=>{const{offchainLookup:ue,offchainLookupSignature:ve}=await import("./ccip-Dm4ndQX6.js");return{offchainLookup:ue,offchainLookupSignature:ve}},__vite__mapDeps([2,1,3,4,5,6,7,8,0,9]));if(e.ccipRead!==!1&&(N==null?void 0:N.slice(0,10))===ee&&g)return{data:await F(e,{data:N,to:g})};throw L&&(N==null?void 0:N.slice(0,10))==="0x101bb98d"?new N0({factory:l}):jc($,{...t,account:C,chain:e.chain})}}function kf({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Pf)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Of(e,t){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=e.batch)==null?void 0:m.multicall)=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:a,multicallAddress:o,to:c}=t;let u=o;if(!u){if(!e.chain)throw new Bc;u=$t({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=(s?S(s):void 0)||i,{schedule:h}=$c({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(x){return x.reduce((g,{data:_})=>g+(_.length-2),0)>n*2},fn:async x=>{const b=x.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),g=se({abi:ps,args:[b],functionName:"aggregate3"}),_=await e.request({method:"eth_call",params:[{data:g,to:u},d]});return yt({abi:ps,args:[b],functionName:"aggregate3",data:_||"0x"})}}),[{returnData:f,success:y}]=await h({data:a,to:c});if(!y)throw new pr({data:f});return f==="0x"?{data:void 0}:{data:f}}function Lf(e){const{code:t,data:n}=e;return Pi({abi:si(["constructor(bytes, bytes)"]),bytecode:Sf,args:[t,n]})}function Mf(e){const{data:t,factory:n,factoryData:r,to:s}=e;return Pi({abi:si(["constructor(address, bytes, address, bytes)"]),bytecode:Af,args:[s,t,n,r]})}function Bf(e){var n;if(!(e instanceof w))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function pe(e,t){const{abi:n,address:r,args:s,functionName:i,...a}=t,o=se({abi:n,args:s,functionName:i});try{const{data:c}=await k(e,wr,"call")({...a,data:o,to:r});return yt({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw At(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function jf(e,t){const{abi:n,address:r,args:s,dataSuffix:i,functionName:a,...o}=t,c=o.account?ce(o.account):e.account,u=se({abi:n,args:s,functionName:a});try{const{data:l}=await k(e,wr,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...o,account:c}),d=yt({abi:n,args:s,functionName:a,data:l||"0x"}),h=n.filter(f=>"name"in f&&f.name===t.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:a,...o,account:c}}}catch(l){throw At(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:c==null?void 0:c.address})}}const Fr=new Map,Aa=new Map;let Tf=0;function Ge(e,t,n){const r=++Tf,s=()=>Fr.get(e)||[],i=()=>{const l=s();Fr.set(e,l.filter(d=>d.id!==r))},a=()=>{const l=s();if(!l.some(h=>h.id===r))return;const d=Aa.get(e);l.length===1&&d&&d(),i()},o=s();if(Fr.set(e,[...o,{id:r,fns:t}]),o&&o.length>0)return a;const c={};for(const l in t)c[l]=(...d)=>{var f,y;const h=s();if(h.length!==0)for(const m of h)(y=(f=m.fns)[l])==null||y.call(f,...d)};const u=n(c);return typeof u=="function"&&Aa.set(e,u),a}async function ms(e){return new Promise(t=>setTimeout(t,e))}function Nt(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let o;t&&(o=await e({unpoll:i}));const c=await(n==null?void 0:n(o))??r;await ms(c);const u=async()=>{s&&(await e({unpoll:i}),await ms(r),u())};u()})(),i}const $f=new Map,Nf=new Map;function Rf(e){const t=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:a=>i.set(s,a)}),n=t(e,$f),r=t(e,Nf);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Df(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Rf(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=e(),r.promise.set(i));try{const a=await i;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const Uf=e=>`blockNumber.${e}`;async function vn(e,{cacheTime:t=e.cacheTime}={}){const n=await Df(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Uf(e.uid),cacheTime:t});return BigInt(n)}async function vr(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Ie(i));return!("abi"in t)||!t.abi?s:Ci({abi:t.abi,logs:s,strict:n})}async function xr(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Ff(e,t){const{abi:n,address:r,args:s,batch:i=!0,eventName:a,fromBlock:o,onError:c,onLogs:u,poll:l,pollingInterval:d=e.pollingInterval,strict:h}=t;return(typeof l<"u"?l:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const x=h??!1,b=J(["watchContractEvent",r,s,i,e.uid,a,d,x,o]);return Ge(b,{onLogs:u,onError:c},g=>{let _;o!==void 0&&(_=o-1n);let E,M=!1;const C=Nt(async()=>{var P;if(!M){try{E=await k(e,tc,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:x,fromBlock:o})}catch{}M=!0;return}try{let I;if(E)I=await k(e,vr,"getFilterChanges")({filter:E});else{const L=await k(e,vn,"getBlockNumber")({});_&&_<L?I=await k(e,Oc,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:_+1n,toBlock:L,strict:x}):I=[],_=L}if(I.length===0)return;if(i)g.onLogs(I);else for(const L of I)g.onLogs([L])}catch(I){E&&I instanceof ht&&(M=!1),(P=g.onError)==null||P.call(g,I)}},{emitOnBegin:!0,interval:d});return async()=>{E&&await k(e,xr,"uninstallFilter")({filter:E}),C()}})})():(()=>{const x=h??!1,b=J(["watchContractEvent",r,s,i,e.uid,a,d,x]);let g=!0,_=()=>g=!1;return Ge(b,{onLogs:u,onError:c},E=>((async()=>{try{const M=(()=>{if(e.transport.type==="fallback"){const I=e.transport.transports.find(L=>L.config.type==="webSocket");return I?I.value:e.transport}return e.transport})(),C=a?bn({abi:n,eventName:a,args:s}):[],{unsubscribe:P}=await M.subscribe({params:["logs",{address:r,topics:C}],onData(I){var j;if(!g)return;const L=I.result;try{const{eventName:T,args:v}=_i({abi:n,data:L.data,topics:L.topics,strict:h}),A=Ie(L,{args:v,eventName:T});E.onLogs([A])}catch(T){let v,A;if(T instanceof Yt||T instanceof cr){if(h)return;v=T.abiItem.name,A=(j=T.abiItem.inputs)==null?void 0:j.some($=>!("name"in $&&$.name))}const R=Ie(L,{args:A?[]:{},eventName:v});E.onLogs([R])}},onError(I){var L;(L=E.onError)==null||L.call(E,I)}});_=P,g||_()}catch(M){c==null||c(M)}})(),()=>_()))})()}class Si extends w{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}async function Gf(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}class Hf extends w{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function zf(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[i,a,o,c,u,l,d]=await k(e,pe,"readContract")({abi:Vf,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:o,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:i}}catch(i){const a=i;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new Hf({address:n}):a}}const Vf=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}],bs=256;let En=bs,Pn;function Nc(e=11){if(!Pn||En+e>bs*2){Pn="",En=0;for(let t=0;t<bs;t++)Pn+=(256+Math.random()*256|0).toString(16).substring(1)}return Pn.substring(En,En+++e)}function Ai(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:s="base",name:i="Base Client",pollingInterval:a=4e3,type:o="base"}=e,c=e.chain,u=e.account?ce(e.account):void 0,{config:l,request:d,value:h}=e.transport({chain:c,pollingInterval:a}),f={...l,...h},y={account:u,batch:t,cacheTime:n,ccipRead:r,chain:c,key:s,name:i,pollingInterval:a,request:d,transport:f,type:o,uid:Nc()};function m(x){return b=>{const g=b(x);for(const E in y)delete g[E];const _={...x,...g};return Object.assign(_,{extend:m(_)})}}return Object.assign(y,{extend:m(y)})}const Sn=new dr(8192);function Wf(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(Sn.get(n))return Sn.get(n);const r=e().finally(()=>Sn.delete(n));return Sn.set(n,r),r}function gs(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const a=async({count:o=0}={})=>{const c=async({error:u})=>{const l=typeof t=="function"?t({count:o,error:u}):t;l&&await ms(l),a({count:o+1})};try{const u=await e();s(u)}catch(u){if(o<n&&await r({count:o,error:u}))return c({error:u});i(u)}};a()})}function qf(e,t={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:a=150,retryCount:o=3,uid:c}={...t,...r},{method:u}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(u))throw new ot(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new ot(new Error("method not supported"),{method:u});const l=s?lt(`${c}.${J(n)}`):void 0;return Wf(()=>gs(async()=>{try{return await e(n)}catch(h){const f=h;switch(f.code){case Xt.code:throw new Xt(f);case Qt.code:throw new Qt(f);case en.code:throw new en(f,{method:n.method});case tn.code:throw new tn(f);case ft.code:throw new ft(f);case ht.code:throw new ht(f);case nn.code:throw new nn(f);case rn.code:throw new rn(f);case sn.code:throw new sn(f);case ot.code:throw new ot(f,{method:n.method});case St.code:throw new St(f);case an.code:throw new an(f);case xt.code:throw new xt(f);case on.code:throw new on(f);case cn.code:throw new cn(f);case un.code:throw new un(f);case dn.code:throw new dn(f);case ln.code:throw new ln(f);case 5e3:throw new xt(f);default:throw h instanceof w?h:new D0(f)}}},{delay:({count:h,error:f})=>{var y;if(f&&f instanceof Wt){const m=(y=f==null?void 0:f.headers)==null?void 0:y.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<h)*a},retryCount:o,shouldRetry:({error:h})=>Kf(h)}),{enabled:s,id:l})}}function Kf(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===St.code||e.code===ft.code:e instanceof Wt&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function Zf({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:a,type:o},c){const u=Nc();return{config:{key:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:a,type:o},request:qf(r,{methods:t,retryCount:s,retryDelay:i,uid:u}),value:c}}class Yf extends w{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Jf(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout(()=>{r&&o.abort()},n)),s(await e({signal:(o==null?void 0:o.signal)||null}))}catch(o){(o==null?void 0:o.name)==="AbortError"&&i(t),i(o)}finally{clearTimeout(a)}})()})}function Xf(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Ia=Xf();function Qf(e,t={}){return{async request(n){var d;const{body:r,onRequest:s=t.onRequest,onResponse:i=t.onResponse,timeout:a=t.timeout??1e4}=n,o={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:l}=o;try{const h=await Jf(async({signal:y})=>{const m={...o,body:Array.isArray(r)?J(r.map(_=>({jsonrpc:"2.0",id:_.id??Ia.take(),..._}))):J({jsonrpc:"2.0",id:r.id??Ia.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(a>0?y:null)},x=new Request(e,m),b=await(s==null?void 0:s(x,m))??{...m,url:e};return await fetch(b.url??e,b)},{errorInstance:new ba({body:r,url:e}),timeout:a,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(y){if(h.ok)throw y;f={error:f}}}if(!h.ok)throw new Wt({body:r,details:J(f.error)||h.statusText,headers:h.headers,status:h.status,url:e});return f}catch(h){throw h instanceof Wt||h instanceof ba?h:new Wt({body:r,cause:h,url:e})}}}}function ws(e,t={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:c,retryDelay:u}=t;return({chain:l,retryCount:d,timeout:h})=>{const{batchSize:f=1e3,wait:y=0}=typeof n=="object"?n:{},m=t.retryCount??d,x=h??t.timeout??1e4,b=e||(l==null?void 0:l.rpcUrls.default.http[0]);if(!b)throw new Yf;const g=Qf(b,{fetchOptions:r,onRequest:o,onResponse:c,timeout:x});return Zf({key:s,methods:i,name:a,async request({method:_,params:E}){const M={method:_,params:E},{schedule:C}=$c({id:b,wait:y,shouldSplitBatch(j){return j.length>f},fn:j=>g.request({body:j}),sort:(j,T)=>j.id-T.id}),P=async j=>n?C(j):[await g.request({body:j})],[{error:I,result:L}]=await P(M);if(I)throw new pi({body:M,error:I,url:b});return L},retryCount:m,retryDelay:u,timeout:x,type:"http"},{fetchOptions:r,url:b})}}function Ii(e,t){var r,s,i,a,o,c;if(!(e instanceof w))return!1;const n=e.walk(u=>u instanceof Vn);return n instanceof Vn?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((a=n.data)==null?void 0:a.errorName)==="ResolverError"||((o=n.data)==null?void 0:o.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===nc[50]):!1}function Rc(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return be(t)?t:null}function $n(e){let t=new Uint8Array(32).fill(0);if(!e)return Z(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Rc(n[r]),i=s?Bt(s):G(dt(n[r]),"bytes");t=G(re([t,i]),"bytes")}return Z(t)}function eh(e){return`[${e.slice(2)}]`}function th(e){const t=new Uint8Array(32).fill(0);return e?Rc(e)||G(dt(e)):Z(t)}function _r(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(dt(t).byteLength+2);let r=0;const s=t.split(".");for(let i=0;i<s.length;i++){let a=dt(s[i]);a.byteLength>255&&(a=dt(eh(th(s[i])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function nh(e,{blockNumber:t,blockTag:n,coinType:r,name:s,gatewayUrls:i,strict:a,universalResolverAddress:o}){let c=o;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=$t({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u=se({abi:Pa,functionName:"addr",...r!=null?{args:[$n(s),BigInt(r)]}:{args:[$n(s)]}}),l={address:c,abi:Mc,functionName:"resolve",args:[fe(_r(s)),u],blockNumber:t,blockTag:n},d=k(e,pe,"readContract"),h=i?await d({...l,args:[...l.args,i]}):await d(l);if(h[0]==="0x")return null;const f=yt({abi:Pa,args:r!=null?[$n(s),BigInt(r)]:void 0,functionName:"addr",data:h[0]});return f==="0x"||ut(f)==="0x00"?null:f}catch(u){if(a)throw u;if(Ii(u,"resolve"))return null;throw u}}class rh extends w{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class Ut extends w{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class ki extends w{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class sh extends w{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const ih=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,ah=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,oh=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,ch=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function uh(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function ka(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Dc({uri:e,gatewayUrls:t}){const n=oh.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=ka(t==null?void 0:t.ipfs,"https://ipfs.io"),s=ka(t==null?void 0:t.arweave,"https://arweave.net"),i=e.match(ih),{protocol:a,subpath:o,target:c,subtarget:u=""}=(i==null?void 0:i.groups)||{},l=a==="ipns:/"||o==="ipns/",d=a==="ipfs:/"||o==="ipfs/"||ah.test(e);if(e.startsWith("http")&&!l&&!d){let f=e;return t!=null&&t.arweave&&(f=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let h=e.replace(ch,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new ki({uri:e})}function Uc(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new rh({data:e});return e.image||e.image_url||e.image_data}async function dh({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Oi({gatewayUrls:e,uri:Uc(n)})}catch{throw new ki({uri:t})}}async function Oi({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Dc({uri:t,gatewayUrls:e});if(r||await uh(n))return n;throw new ki({uri:t})}function lh(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[i,a]=n.split(":"),[o,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Ut({reason:"Only EIP-155 supported"});if(!a)throw new Ut({reason:"Chain ID not found"});if(!c)throw new Ut({reason:"Contract address not found"});if(!s)throw new Ut({reason:"Token ID not found"});if(!o)throw new Ut({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:o.toLowerCase(),contractAddress:c,tokenID:s}}async function fh(e,{nft:t}){if(t.namespace==="erc721")return pe(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return pe(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new sh({namespace:t.namespace})}async function hh(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?ph(e,{gatewayUrls:t,record:n}):Oi({uri:n,gatewayUrls:t})}async function ph(e,{gatewayUrls:t,record:n}){const r=lh(n),s=await fh(e,{nft:r}),{uri:i,isOnChain:a,isEncoded:o}=Dc({uri:s,gatewayUrls:t});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=o?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return Oi({uri:Uc(l),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),dh({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}async function Fc(e,{blockNumber:t,blockTag:n,name:r,key:s,gatewayUrls:i,strict:a,universalResolverAddress:o}){let c=o;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=$t({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u={address:c,abi:Mc,functionName:"resolve",args:[fe(_r(r)),se({abi:Ea,functionName:"text",args:[$n(r),s]})],blockNumber:t,blockTag:n},l=k(e,pe,"readContract"),d=i?await l({...u,args:[...u.args,i]}):await l(u);if(d[0]==="0x")return null;const h=yt({abi:Ea,functionName:"text",data:d[0]});return h===""?null:h}catch(u){if(a)throw u;if(Ii(u,"resolve"))return null;throw u}}async function yh(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:a,universalResolverAddress:o}){const c=await k(e,Fc,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:o,gatewayUrls:i,strict:a});if(!c)return null;try{return await hh(e,{record:c,gatewayUrls:r})}catch{return null}}async function mh(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:a}){let o=a;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=$t({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:o,abi:Ef,functionName:"reverse",args:[fe(_r(c))],blockNumber:n,blockTag:r},l=k(e,pe,"readContract"),[d,h]=s?await l({...u,args:[...u.args,s]}):await l(u);return t.toLowerCase()!==h.toLowerCase()?null:d}catch(u){if(i)throw u;if(Ii(u,"reverse"))return null;throw u}}async function bh(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let i=s;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=$t({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await k(e,pe,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[fe(_r(r))],blockNumber:t,blockTag:n});return a}async function gh(e,t){var x,b,g;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:i,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:h,value:f,...y}=t,m=n?ce(n):void 0;try{wn(t);const E=(r?S(r):void 0)||s,M=(g=(b=(x=e.chain)==null?void 0:x.formatters)==null?void 0:b.transactionRequest)==null?void 0:g.format,P=(M||mr)({...mi(y,{format:M}),from:m==null?void 0:m.address,blobs:i,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:h,value:f}),I=await e.request({method:"eth_createAccessList",params:[P,E]});return{accessList:I.accessList,gasUsed:BigInt(I.gasUsed)}}catch(_){throw jc(_,{...t,account:m,chain:e.chain})}}async function wh(e){const t=hr(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Gc(e,{address:t,args:n,event:r,events:s,fromBlock:i,strict:a,toBlock:o}={}){const c=s??(r?[r]:void 0),u=hr(e,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(f=>bn({abi:[f],eventName:f.name,args:n}))],r&&(l=l[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof i=="bigint"?S(i):i,toBlock:typeof o=="bigint"?S(o):o,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:u(d),strict:!!a,toBlock:o,type:"event"}}async function Hc(e){const t=hr(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function vh(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function xh(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?S(n):void 0;let i;return t?i=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):i=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Ue(i)}async function Kn(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?S(n):void 0,i=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(i!=="0x")return i}function _h(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function Ch(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=n?S(n):void 0,a=await e.request({method:"eth_feeHistory",params:[S(t),i||r,s]},{dedupe:!!i});return _h(a)}async function Eh(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(i=>Ie(i));return t.abi?Ci({abi:t.abi,logs:s,strict:n}):s}function Ph(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class Sh extends w{constructor({domain:t}){super(`Invalid domain "${J(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ah extends w{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Ih extends w{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Cr(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Bh({domain:t}),...e.types};Mh({domain:t,message:n,primaryType:r,types:s});const i=["0x1901"];return t&&i.push(kh({domain:t,types:s})),r!=="EIP712Domain"&&i.push(zc({data:n,primaryType:r,types:s})),G(re(i))}function kh({domain:e,types:t}){return zc({data:e,primaryType:"EIP712Domain",types:t})}function zc({data:e,primaryType:t,types:n}){const r=Vc({data:e,primaryType:t,types:n});return G(r)}function Vc({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[Oh({primaryType:t,types:n})];for(const i of n[t]){const[a,o]=qc({types:n,name:i.name,type:i.type,value:e[i.name]});r.push(a),s.push(o)}return me(r,s)}function Oh({primaryType:e,types:t}){const n=fe(Lh({primaryType:e,types:t}));return G(n)}function Lh({primaryType:e,types:t}){let n="";const r=Wc({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const i of s)n+=`${i}(${t[i].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return n}function Wc({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const i of t[s])Wc({primaryType:i.type,types:t},n);return n}function qc({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},G(Vc({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},G(r)];if(n==="string")return[{type:"bytes32"},G(fe(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>qc({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},G(me(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}function Mh(e){const{domain:t,message:n,primaryType:r,types:s}=e,i=(a,o)=>{for(const c of a){const{name:u,type:l}=c,d=o[u],h=l.match(ci);if(h&&(typeof d=="number"||typeof d=="bigint")){const[m,x,b]=h;S(d,{signed:x==="int",size:Number.parseInt(b)/8})}if(l==="address"&&typeof d=="string"&&!ne(d))throw new Fe({address:d});const f=l.match(Qo);if(f){const[m,x]=f;if(x&&V(d)!==Number.parseInt(x))throw new No({expectedSize:Number.parseInt(x),givenSize:V(d)})}const y=s[l];y&&(jh(l),i(y,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new Sh({domain:t});i(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Ah({primaryType:r,types:s})}function Bh({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function jh(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Ih({type:e})}function Th(e){const{abi:t,data:n}=e,r=Pt(n,0,4),s=t.find(i=>i.type==="function"&&r===fr(Ae(i)));if(!s)throw new hl(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?jt(s.inputs,Pt(n,4)):void 0}}function $h(e,t){if(e.length!==t.length)throw new jo({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r];n.push(Kc(s,i))}return pt(n)}function Kc(e,t,n=!1){if(e==="address"){const a=t;if(!ne(a))throw new Fe({address:a});return Q(a.toLowerCase(),{size:n?32:null})}if(e==="string")return lt(t);if(e==="bytes")return t;if(e==="bool")return Q(ii(t),{size:n?32:1});const r=e.match(ci);if(r){const[a,o,c="256"]=r,u=Number.parseInt(c)/8;return S(t,{size:n?32:u,signed:o==="int"})}const s=e.match(Qo);if(s){const[a,o]=s;if(Number.parseInt(o)!==(t.length-2)/2)throw new No({expectedSize:Number.parseInt(o),givenSize:(t.length-2)/2});return Q(t,{dir:"right",size:n?32:null})}const i=e.match(i0);if(i&&Array.isArray(t)){const[a,o]=i,c=[];for(let u=0;u<t.length;u++)c.push(Kc(o,t[u],!0));return c.length===0?"0x":pt(c)}throw new wl(e)}const Nh={"0x0":"reverted","0x1":"success"};function Zc(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>Ie(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Ue(e.transactionIndex):null,status:e.status?Nh[e.status]:null,type:e.type?gc[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const Rh=`Ethereum Signed Message:
`;function Dh(e){const t=typeof e=="string"?lt(e):typeof e.raw=="string"?e.raw:Z(e.raw),n=lt(`${Rh}${V(t)}`);return re([n,t])}function Er(e,t){return G(Dh(e),t)}const Yc="0x6492649264926492649264926492649264926492649264926492649264926492";function Uh(e){return Xo(e,-32)===Yc}function Nn(e){const{address:t,data:n,signature:r,to:s="hex"}=e,i=pt([me([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Yc]);return s==="hex"?i:ge(i)}class Fh extends w{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Gh(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Fh({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[i,a,o]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${a}.${o}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function Oa(e,t="wei"){return Gh(e,ac[t])}function Hh(e){const{source:t}=e,n=new Map,r=new dr(8192),s=new Map,i=({address:a,chainId:o})=>`${a}.${o}`;return{async consume({address:a,chainId:o,client:c}){const u=i({address:a,chainId:o}),l=this.get({address:a,chainId:o,client:c});this.increment({address:a,chainId:o});const d=await l;return await t.set({address:a,chainId:o},d),r.set(u,d),d},async increment({address:a,chainId:o}){const c=i({address:a,chainId:o}),u=n.get(c)??0;n.set(c,u+1)},async get({address:a,chainId:o,client:c}){const u=i({address:a,chainId:o});let l=s.get(u);return l||(l=(async()=>{try{const h=await t.get({address:a,chainId:o,client:c}),f=r.get(u)??0;return f>0&&h<=f?f+1:(r.delete(u),h)}finally{this.reset({address:a,chainId:o})}})(),s.set(u,l)),(n.get(u)??0)+await l},reset({address:a,chainId:o}){const c=i({address:a,chainId:o});n.delete(c),s.delete(c)}}}function zh(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function Vh(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Ue(e.nonce):void 0,storageProof:e.storageProof?zh(e.storageProof):void 0}}async function Wh(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",a=n!==void 0?S(n):void 0,o=await e.request({method:"eth_getProof",params:[t,s,a||i]});return Vh(o)}async function qh(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?S(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,i||r]})}async function Li(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){var l,d,h;const a=r||"latest",o=n!==void 0?S(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,S(i)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,S(i)]},{dedupe:!!o}),!c)throw new uc({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:i});return(((h=(d=(l=e.chain)==null?void 0:l.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||wc)(c)}async function Kh(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([k(e,vn,"getBlockNumber")({}),t?k(e,Li,"getTransaction")({hash:t}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function vs(e,{hash:t}){var s,i,a;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new dc({hash:t});return(((a=(i=(s=e.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:a.format)||Zc)(n)}async function Zh(e,t){var x;const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:i,multicallAddress:a,stateOverride:o}=t,c=t.contracts,u=r??(typeof((x=e.batch)==null?void 0:x.multicall)=="object"&&e.batch.multicall.batchSize||1024);let l=a;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=$t({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=[[]];let h=0,f=0;for(let b=0;b<c.length;b++){const{abi:g,address:_,args:E,functionName:M}=c[b];try{const C=se({abi:g,args:E,functionName:M});f+=(C.length-2)/2,u>0&&f>u&&d[h].length>0&&(h++,f=(C.length-2)/2,d[h]=[]),d[h]=[...d[h],{allowFailure:!0,callData:C,target:_}]}catch(C){const P=At(C,{abi:g,address:_,args:E,docsPath:"/docs/contract/multicall",functionName:M});if(!n)throw P;d[h]=[...d[h],{allowFailure:!0,callData:"0x",target:_}]}}const y=await Promise.allSettled(d.map(b=>k(e,pe,"readContract")({abi:ps,address:l,args:[b],blockNumber:s,blockTag:i,functionName:"aggregate3",stateOverride:o}))),m=[];for(let b=0;b<y.length;b++){const g=y[b];if(g.status==="rejected"){if(!n)throw g.reason;for(let E=0;E<d[b].length;E++)m.push({status:"failure",error:g.reason,result:void 0});continue}const _=g.value;for(let E=0;E<_.length;E++){const{returnData:M,success:C}=_[E],{callData:P}=d[b][E],{abi:I,address:L,functionName:j,args:T}=c[m.length];try{if(P==="0x")throw new yn;if(!C)throw new pr({data:M});const v=yt({abi:I,args:T,data:M,functionName:j});m.push(n?{result:v,status:"success"}:v)}catch(v){const A=At(v,{abi:I,address:L,args:T,docsPath:"/docs/contract/multicall",functionName:j});if(!n)throw A;m.push({error:A,result:void 0,status:"failure"})}}}if(m.length!==c.length)throw new w("multicall results mismatch");return m}const Yh="0.1.1";function Jh(){return Yh}let Jc=class xs extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof xs){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof xs&&n.cause.docsPath||n.docsPath,a=`https://oxlib.sh${s??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Jh()}`}),this.cause=n.cause,this.details=r,this.docs=a,this.docsPath=s,this.shortMessage=t}walk(t){return Xc(this,t)}};function Xc(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Xc(e.cause,t):t?null:e}function Xh(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new tp({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Be(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const u=typeof e=="bigint"?"n":"";throw new ep({max:i?`${i}${u}`:void 0,min:`${a}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Qh(c,r):c}function Qh(e,t){return Xh(e,{dir:"left",size:t})}let ep=class extends Jc{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},tp=class extends Jc{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function np(e){return{address:e.address,amount:Be(e.amount),index:Be(e.index),validatorIndex:Be(e.validatorIndex)}}function rp(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:Be(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:Be(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:Be(e.gasLimit)},...typeof e.number=="bigint"&&{number:Be(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:Be(e.prevRandao)},...typeof e.time=="bigint"&&{time:Be(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(np)}}}async function sp(e,t){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:a,validation:o}=t;try{const c=[];for(const h of s){const f=h.blockOverrides?rp(h.blockOverrides):void 0,y=h.calls.map(x=>{const b=x,g=b.account?ce(b.account):void 0,_={...b,data:b.abi?se(b):b.data,from:b.from??(g==null?void 0:g.address)};return wn(_),mr(_)}),m=h.stateOverrides?br(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:y,stateOverrides:m})}const l=(n?S(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:a,validation:o},l]})).map((h,f)=>({...vc(h),calls:h.calls.map((y,m)=>{var j,T;const{abi:x,args:b,functionName:g,to:_}=s[f].calls[m],E=((j=y.error)==null?void 0:j.data)??y.returnData,M=BigInt(y.gasUsed),C=(T=y.logs)==null?void 0:T.map(v=>Ie(v)),P=y.status==="0x1"?"success":"failure",I=x?yt({abi:x,data:E,functionName:g}):null,L=(()=>{var A;if(P==="success")return;let v;if(((A=y.error)==null?void 0:A.data)==="0x"?v=new yn:y.error&&(v=new pr(y.error)),!!v)return At(v,{abi:x??[],address:_,args:b,functionName:g??"<unknown>"})})();return{data:E,gasUsed:M,logs:C,status:P,...P==="success"?{result:I}:{error:L}}})}))}catch(c){const u=c,l=yi(u,{});throw l instanceof yr?u:l}}function ip({r:e,s:t,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new Io.Signature(he(e),he(t)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?a:ge(a)}async function Mi(e,t){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:a,universalSignatureVerifierAddress:o=(f=(h=(d=e.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=t,u=be(a)?a:typeof a=="object"&&"r"in a&&"s"in a?ip(a):Z(a),l=await(async()=>!r&&!s||Uh(u)?u:Nn({address:r,data:s,signature:u}))();try{const y=o?{to:o,data:se({abi:Sa,functionName:"isValidSig",args:[n,i,l]}),...c}:{data:Pi({abi:Sa,args:[n,i,l],bytecode:If}),...c},{data:m}=await k(e,wr,"call")(y);return Pl(m??"0x0")}catch(y){try{if(xi(n0(n),await pc({hash:i,signature:a})))return!0}catch{}if(y instanceof lc)return!1;throw y}}async function ap(e,{address:t,message:n,factory:r,factoryData:s,signature:i,...a}){const o=Er(n);return Mi(e,{address:t,factory:r,factoryData:s,hash:o,signature:i,...a})}async function op(e,t){const{address:n,factory:r,factoryData:s,signature:i,message:a,primaryType:o,types:c,domain:u,...l}=t,d=Cr({message:a,primaryType:o,types:c,domain:u});return Mi(e,{address:n,factory:r,factoryData:s,hash:d,signature:i,...l})}function Qc(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:a=e.pollingInterval}){const o=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let c;return o?(()=>{const d=J(["watchBlockNumber",e.uid,t,n,a]);return Ge(d,{onBlockNumber:r,onError:s},h=>Nt(async()=>{var f;try{const y=await k(e,vn,"getBlockNumber")({cacheTime:0});if(c){if(y===c)return;if(y-c>1&&n)for(let m=c+1n;m<y;m++)h.onBlockNumber(m,c),c=m}(!c||y>c)&&(h.onBlockNumber(y,c),c=y)}catch(y){(f=h.onError)==null||f.call(h,y)}},{emitOnBegin:t,interval:a}))})():(()=>{const d=J(["watchBlockNumber",e.uid,t,n]);return Ge(d,{onBlockNumber:r,onError:s},h=>{let f=!0,y=()=>f=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const b=e.transport.transports.find(g=>g.config.type==="webSocket");return b?b.value:e.transport}return e.transport})(),{unsubscribe:x}=await m.subscribe({params:["newHeads"],onData(b){var _;if(!f)return;const g=he((_=b.result)==null?void 0:_.number);h.onBlockNumber(g,c),c=g},onError(b){var g;(g=h.onError)==null||g.call(h,b)}});y=x,f||y()}catch(m){s==null||s(m)}})(),()=>y()})})()}async function cp(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,retryCount:i=6,retryDelay:a=({count:c})=>~~(1<<c)*200,timeout:o=18e4}){const c=J(["waitForTransactionReceipt",e.uid,n]);let u,l,d,h=!1;const{promise:f,resolve:y,reject:m}=Tc(),x=o?setTimeout(()=>m(new T0({hash:n})),o):void 0,b=Ge(c,{onReplaced:r,resolve:y,reject:m},g=>{const _=k(e,Qc,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const M=P=>{clearTimeout(x),_(),P(),b()};let C=E;if(!h)try{if(d){if(t>1&&(!d.blockNumber||C-d.blockNumber+1n<t))return;M(()=>g.resolve(d));return}if(u||(h=!0,await gs(async()=>{u=await k(e,Li,"getTransaction")({hash:n}),u.blockNumber&&(C=u.blockNumber)},{delay:a,retryCount:i}),h=!1),d=await k(e,vs,"getTransactionReceipt")({hash:n}),t>1&&(!d.blockNumber||C-d.blockNumber+1n<t))return;M(()=>g.resolve(d))}catch(P){if(P instanceof uc||P instanceof dc){if(!u){h=!1;return}try{l=u,h=!0;const I=await gs(()=>k(e,Se,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:T})=>T instanceof bc});h=!1;const L=I.transactions.find(({from:T,nonce:v})=>T===l.from&&v===l.nonce);if(!L||(d=await k(e,vs,"getTransactionReceipt")({hash:L.hash}),t>1&&(!d.blockNumber||C-d.blockNumber+1n<t)))return;let j="replaced";L.to===l.to&&L.value===l.value&&L.input===l.input?j="repriced":L.from===L.to&&L.value===0n&&(j="cancelled"),M(()=>{var T;(T=g.onReplaced)==null||T.call(g,{reason:j,replacedTransaction:l,transaction:L,transactionReceipt:d}),g.resolve(d)})}catch(I){M(()=>g.reject(I))}}else M(()=>g.reject(P))}}})});return f}function up(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:a,poll:o,pollingInterval:c=e.pollingInterval}){const u=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),l=a??!1;let d;return u?(()=>{const y=J(["watchBlocks",e.uid,t,n,r,l,c]);return Ge(y,{onBlock:s,onError:i},m=>Nt(async()=>{var x;try{const b=await k(e,Se,"getBlock")({blockTag:t,includeTransactions:l});if(b.number&&(d!=null&&d.number)){if(b.number===d.number)return;if(b.number-d.number>1&&n)for(let g=(d==null?void 0:d.number)+1n;g<b.number;g++){const _=await k(e,Se,"getBlock")({blockNumber:g,includeTransactions:l});m.onBlock(_,d),d=_}}(!(d!=null&&d.number)||t==="pending"&&!(b!=null&&b.number)||b.number&&b.number>d.number)&&(m.onBlock(b,d),d=b)}catch(b){(x=m.onError)==null||x.call(m,b)}},{emitOnBegin:r,interval:c}))})():(()=>{let y=!0,m=!0,x=()=>y=!1;return(async()=>{try{r&&k(e,Se,"getBlock")({blockTag:t,includeTransactions:l}).then(_=>{y&&m&&(s(_,void 0),m=!1)});const b=(()=>{if(e.transport.type==="fallback"){const _=e.transport.transports.find(E=>E.config.type==="webSocket");return _?_.value:e.transport}return e.transport})(),{unsubscribe:g}=await b.subscribe({params:["newHeads"],async onData(_){if(!y)return;const E=await k(e,Se,"getBlock")({blockNumber:_.blockNumber,includeTransactions:l}).catch(()=>{});y&&(s(E,d),m=!1,d=E)},onError(_){i==null||i(_)}});x=g,y||x()}catch(b){i==null||i(b)}})(),()=>x()})()}function dp(e,{address:t,args:n,batch:r=!0,event:s,events:i,fromBlock:a,onError:o,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:d}){const h=typeof u<"u"?u:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),f=d??!1;return h?(()=>{const x=J(["watchEvent",t,n,r,e.uid,s,l,a]);return Ge(x,{onLogs:c,onError:o},b=>{let g;a!==void 0&&(g=a-1n);let _,E=!1;const M=Nt(async()=>{var C;if(!E){try{_=await k(e,Gc,"createEventFilter")({address:t,args:n,event:s,events:i,strict:f,fromBlock:a})}catch{}E=!0;return}try{let P;if(_)P=await k(e,vr,"getFilterChanges")({filter:_});else{const I=await k(e,vn,"getBlockNumber")({});g&&g!==I?P=await k(e,Ei,"getLogs")({address:t,args:n,event:s,events:i,fromBlock:g+1n,toBlock:I}):P=[],g=I}if(P.length===0)return;if(r)b.onLogs(P);else for(const I of P)b.onLogs([I])}catch(P){_&&P instanceof ht&&(E=!1),(C=b.onError)==null||C.call(b,P)}},{emitOnBegin:!0,interval:l});return async()=>{_&&await k(e,xr,"uninstallFilter")({filter:_}),M()}})})():(()=>{let x=!0,b=()=>x=!1;return(async()=>{try{const g=(()=>{if(e.transport.type==="fallback"){const C=e.transport.transports.find(P=>P.config.type==="webSocket");return C?C.value:e.transport}return e.transport})(),_=i??(s?[s]:void 0);let E=[];_&&(E=[_.flatMap(P=>bn({abi:[P],eventName:P.name,args:n}))],s&&(E=E[0]));const{unsubscribe:M}=await g.subscribe({params:["logs",{address:t,topics:E}],onData(C){var I;if(!x)return;const P=C.result;try{const{eventName:L,args:j}=_i({abi:_??[],data:P.data,topics:P.topics,strict:f}),T=Ie(P,{args:j,eventName:L});c([T])}catch(L){let j,T;if(L instanceof Yt||L instanceof cr){if(d)return;j=L.abiItem.name,T=(I=L.abiItem.inputs)==null?void 0:I.some(A=>!("name"in A&&A.name))}const v=Ie(P,{args:T?[]:{},eventName:j});c([v])}},onError(C){o==null||o(C)}});b=M,x||b()}catch(g){o==null||o(g)}})(),()=>b()})()}function lp(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const u=J(["watchPendingTransactions",e.uid,t,i]);return Ge(u,{onTransactions:r,onError:n},l=>{let d;const h=Nt(async()=>{var f;try{if(!d)try{d=await k(e,Hc,"createPendingTransactionFilter")({});return}catch(m){throw h(),m}const y=await k(e,vr,"getFilterChanges")({filter:d});if(y.length===0)return;if(t)l.onTransactions(y);else for(const m of y)l.onTransactions([m])}catch(y){(f=l.onError)==null||f.call(l,y)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await k(e,xr,"uninstallFilter")({filter:d}),h()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!u)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});l=d,u||l()}catch(d){n==null||n(d)}})(),()=>l()})()}function fp(e){var d,h,f;const{scheme:t,statement:n,...r}=((d=e.match(hp))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:a,notBefore:o,requestId:c,...u}=((h=e.match(pp))==null?void 0:h.groups)??{},l=(f=e.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...a?{issuedAt:new Date(a)}:{},...o?{notBefore:new Date(o)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const hp=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,pp=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function yp(e){const{address:t,domain:n,message:r,nonce:s,scheme:i,time:a=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||t&&!xi(r.address,t))return!1}catch{return!1}return!0}async function mp(e,t){const{address:n,domain:r,message:s,nonce:i,scheme:a,signature:o,time:c=new Date,...u}=t,l=fp(s);if(!l.address||!yp({address:n,domain:r,message:l,nonce:i,scheme:a,time:c}))return!1;const h=Er(s);return Mi(e,{address:l.address,hash:h,signature:o,...u})}function bp(e){return{call:t=>wr(e,t),createAccessList:t=>gh(e,t),createBlockFilter:()=>wh(e),createContractEventFilter:t=>tc(e,t),createEventFilter:t=>Gc(e,t),createPendingTransactionFilter:()=>Hc(e),estimateContractGas:t=>xf(e,t),estimateGas:t=>vi(e,t),getBalance:t=>kc(e,t),getBlobBaseFee:()=>vh(e),getBlock:t=>Se(e,t),getBlockNumber:t=>vn(e,t),getBlockTransactionCount:t=>xh(e,t),getBytecode:t=>Kn(e,t),getChainId:()=>gr(e),getCode:t=>Kn(e,t),getContractEvents:t=>Oc(e,t),getEip712Domain:t=>zf(e,t),getEnsAddress:t=>nh(e,t),getEnsAvatar:t=>yh(e,t),getEnsName:t=>mh(e,t),getEnsResolver:t=>bh(e,t),getEnsText:t=>Fc(e,t),getFeeHistory:t=>Ch(e,t),estimateFeesPerGas:t=>_c(e,t),getFilterChanges:t=>vr(e,t),getFilterLogs:t=>Eh(e,t),getGasPrice:()=>gi(e),getLogs:t=>Ei(e,t),getProof:t=>Wh(e,t),estimateMaxPriorityFeePerGas:t=>rf(e,t),getStorageAt:t=>qh(e,t),getTransaction:t=>Li(e,t),getTransactionConfirmations:t=>Kh(e,t),getTransactionCount:t=>Cc(e,t),getTransactionReceipt:t=>vs(e,t),multicall:t=>Zh(e,t),prepareTransactionRequest:t=>Ic(e,t),readContract:t=>pe(e,t),sendRawTransaction:t=>Gf(e,t),simulate:t=>sp(e,t),simulateContract:t=>jf(e,t),verifyMessage:t=>ap(e,t),verifySiweMessage:t=>mp(e,t),verifyTypedData:t=>op(e,t),uninstallFilter:t=>xr(e,t),waitForTransactionReceipt:t=>cp(e,t),watchBlocks:t=>up(e,t),watchBlockNumber:t=>Qc(e,t),watchContractEvent:t=>Ff(e,t),watchEvent:t=>dp(e,t),watchPendingTransactions:t=>lp(e,t)}}function gp(e){const{key:t="public",name:n="Public Client"}=e;return Ai({...e,key:t,name:n,type:"publicClient"}).extend(bp)}function wp(e){const{r:t,s:n}=Io.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:S(t,{size:32}),s:S(n,{size:32}),v:s,yParity:i}:{r:S(t,{size:32}),s:S(n,{size:32}),yParity:i}}class ke{constructor(t,n){this.scope=t,this.module=n}storeObject(t,n){this.setItem(t,JSON.stringify(n))}loadObject(t){const n=this.getItem(t);return n?JSON.parse(n):void 0}setItem(t,n){localStorage.setItem(this.scopedKey(t),n)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),n=[];for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);typeof s=="string"&&s.startsWith(t)&&n.push(s)}n.forEach(r=>localStorage.removeItem(r))}scopedKey(t){return`-${this.scope}${this.module?`:${this.module}`:""}:${t}`}static clearAll(){new ke("CBWSDK").clear(),new ke("walletlink").clear()}}const W={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},_s={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},eu="Unspecified error message.",vp="Unspecified server error.";function Bi(e,t=eu){if(e&&Number.isInteger(e)){const n=e.toString();if(Cs(_s,n))return _s[n].message;if(tu(e))return vp}return t}function xp(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!(_s[t]||tu(e))}function _p(e,{shouldIncludeStack:t=!1}={}){const n={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Cs(e,"code")&&xp(e.code)){const r=e;n.code=r.code,r.message&&typeof r.message=="string"?(n.message=r.message,Cs(r,"data")&&(n.data=r.data)):(n.message=Bi(n.code),n.data={originalError:La(e)})}else n.code=W.rpc.internal,n.message=Ma(e,"message")?e.message:eu,n.data={originalError:La(e)};return t&&(n.stack=Ma(e,"stack")?e.stack:void 0),n}function tu(e){return e>=-32099&&e<=-32e3}function La(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Cs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ma(e,t){return typeof e=="object"&&e!==null&&t in e&&typeof e[t]=="string"}const O={rpc:{parse:e=>de(W.rpc.parse,e),invalidRequest:e=>de(W.rpc.invalidRequest,e),invalidParams:e=>de(W.rpc.invalidParams,e),methodNotFound:e=>de(W.rpc.methodNotFound,e),internal:e=>de(W.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return de(t,e)},invalidInput:e=>de(W.rpc.invalidInput,e),resourceNotFound:e=>de(W.rpc.resourceNotFound,e),resourceUnavailable:e=>de(W.rpc.resourceUnavailable,e),transactionRejected:e=>de(W.rpc.transactionRejected,e),methodNotSupported:e=>de(W.rpc.methodNotSupported,e),limitExceeded:e=>de(W.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>mt(W.provider.userRejectedRequest,e),unauthorized:e=>mt(W.provider.unauthorized,e),unsupportedMethod:e=>mt(W.provider.unsupportedMethod,e),disconnected:e=>mt(W.provider.disconnected,e),chainDisconnected:e=>mt(W.provider.chainDisconnected,e),unsupportedChain:e=>mt(W.provider.unsupportedChain,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new su(t,n,r)}}};function de(e,t){const[n,r]=nu(t);return new ru(e,n||Bi(e),r)}function mt(e,t){const[n,r]=nu(t);return new su(e,n||Bi(e),r)}function nu(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}class ru extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}}class su extends ru{constructor(t,n,r){if(!Cp(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,n,r)}}function Cp(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function iu(){return e=>e}const fn=iu(),Ep=iu();function je(e){return Math.floor(e)}var Gr=["buffer","Buffer"];const au=/^[0-9]*$/,ou=/^[a-f0-9]*$/;function st(e){return ji(crypto.getRandomValues(new Uint8Array(e)))}function ji(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}function Rn(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>Number.parseInt(t,16)))}function qt(e,t=!1){const n=e.toString("hex");return fn(t?`0x${n}`:n)}function Hr(e){return qt(Es(e),!0)}function _e(e){return Ep(e.toString(10))}function wt(e){return fn(`0x${BigInt(e).toString(16)}`)}function cu(e){return e.startsWith("0x")||e.startsWith("0X")}function Ti(e){return cu(e)?e.slice(2):e}function uu(e){return cu(e)?`0x${e.slice(2)}`:`0x${e}`}function Pr(e){if(typeof e!="string")return!1;const t=Ti(e).toLowerCase();return ou.test(t)}function Pp(e,t=!1){if(typeof e=="string"){const n=Ti(e).toLowerCase();if(ou.test(n))return fn(t?`0x${n}`:n)}throw O.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function $i(e,t=!1){let n=Pp(e,!1);return n.length%2===1&&(n=fn(`0${n}`)),t?fn(`0x${n}`):n}function We(e){if(typeof e=="string"){const t=Ti(e).toLowerCase();if(Pr(t)&&t.length===40)return uu(t)}throw O.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}function Es(e){if(Gr.isBuffer(e))return e;if(typeof e=="string"){if(Pr(e)){const t=$i(e,!1);return Gr.from(t,"hex")}return Gr.from(e,"utf8")}throw O.rpc.invalidParams(`Not binary data: ${String(e)}`)}function Kt(e){if(typeof e=="number"&&Number.isInteger(e))return je(e);if(typeof e=="string"){if(au.test(e))return je(Number(e));if(Pr(e))return je(Number(BigInt($i(e,!0))))}throw O.rpc.invalidParams(`Not an integer: ${String(e)}`)}function Ft(e){if(e!==null&&(typeof e=="bigint"||Ap(e)))return BigInt(e.toString(10));if(typeof e=="number")return BigInt(Kt(e));if(typeof e=="string"){if(au.test(e))return BigInt(e);if(Pr(e))return BigInt($i(e,!0))}throw O.rpc.invalidParams(`Not an integer: ${String(e)}`)}function Sp(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw O.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}function Ap(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}async function Ip(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function kp(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function Op(e,t){const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,new TextEncoder().encode(t));return{iv:n,cipherText:r}}async function Lp(e,{iv:t,cipherText:n}){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n);return new TextDecoder().decode(r)}function du(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function lu(e,t){const n=du(e),r=await crypto.subtle.exportKey(n,t);return ji(new Uint8Array(r))}async function fu(e,t){const n=du(e),r=Rn(t).buffer;return await crypto.subtle.importKey(n,new Uint8Array(r),{name:"ECDH",namedCurve:"P-256"},!0,e==="private"?["deriveKey"]:[])}async function Mp(e,t){const n=JSON.stringify(e,(r,s)=>{if(!(s instanceof Error))return s;const i=s;return Object.assign(Object.assign({},i.code?{code:i.code}:{}),{message:i.message})});return Op(t,n)}async function Bp(e,t){return JSON.parse(await Lp(t,e))}const zr={storageKey:"ownPrivateKey",keyType:"private"},Vr={storageKey:"ownPublicKey",keyType:"public"},Wr={storageKey:"peerPublicKey",keyType:"public"};class jp{constructor(){this.storage=new ke("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(t){this.sharedSecret=null,this.peerPublicKey=t,await this.storeKey(Wr,t),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(Vr.storageKey),this.storage.removeItem(zr.storageKey),this.storage.removeItem(Wr.storageKey)}async generateKeyPair(){const t=await Ip();this.ownPrivateKey=t.privateKey,this.ownPublicKey=t.publicKey,await this.storeKey(zr,t.privateKey),await this.storeKey(Vr,t.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(zr)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(Vr)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(Wr)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await kp(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(t){const n=this.storage.getItem(t.storageKey);return n?fu(t.keyType,n):null}async storeKey(t,n){const r=await lu(t.keyType,n);this.storage.setItem(t.storageKey,r)}}function Ba(e){var t;if(!Array.isArray(e.params))return null;switch(e.method){case"personal_sign":return e.params[1];case"eth_signTypedData_v4":return e.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return(t=e.params[0])===null||t===void 0?void 0:t.from;default:return null}}function Tp(e,t){if(!Array.isArray(e.params))throw O.rpc.invalidParams();const n=[...e.params];switch(e.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":n[0].from=t;break;case"eth_signTypedData_v4":n[0]=t;break;case"personal_sign":n[1]=t;break}return Object.assign(Object.assign({},e),{params:n})}function ja(e){var t;if(!e||!Array.isArray(e)||!(!((t=e[0])===null||t===void 0)&&t.chainId)||typeof e[0].chainId!="string"&&typeof e[0].chainId!="number")throw O.rpc.invalidParams()}const $p=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Np(e){const{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,s=e.userOperation,{callData:i,callGasLimit:a,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,paymasterAndData:d,preVerificationGas:h,sender:f,verificationGasLimit:y}=s,m=(()=>{if(r==="0.6")return me([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[f,l,G(o??"0x"),G(i??"0x"),a,y,h,c,u,G(d??"0x")]);if(r==="0.7"){const x=re([Q(S(s.verificationGasLimit),{size:16}),Q(S(s.callGasLimit),{size:16})]),b=G(i),g=re([Q(S(s.maxPriorityFeePerGas),{size:16}),Q(S(s.maxFeePerGas),{size:16})]),_=G(s.factory&&s.factoryData?re([s.factory,s.factoryData]):"0x"),E=G(s.paymaster?re([s.paymaster,Q(S(s.paymasterVerificationGasLimit||0),{size:16}),Q(S(s.paymasterPostOpGasLimit||0),{size:16}),s.paymasterData||"0x"]):"0x");return me([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[f,l,_,b,x,h,g,E])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return G(me([{type:"bytes32"},{type:"address"},{type:"uint256"}],[G(m),n,BigInt(t)]))}async function Rp(e){const{extend:t,nonceKeyManager:n=Hh({source:{get(){return Date.now()},set(){}}}),...r}=e;let s=!1;const i=await e.getAddress();return{...t,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(a){const o=(a==null?void 0:a.key)??BigInt(await n.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...a,key:o}):await pe(e.client,{abi:si(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,o]})},async isDeployed(){return s?!0:(s=!!await k(e.client,Kn,"getCode")({address:i}),s)},...e.sign?{async sign(a){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.sign(a)]);return o&&c?Nn({address:o,data:c,signature:u}):u}}:{},async signMessage(a){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(a)]);return o&&c?Nn({address:o,data:c,signature:u}):u},async signTypedData(a){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(a)]);return o&&c?Nn({address:o,data:c,signature:u}):u},type:"smart"}}class Ps extends w{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(Ps,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class It extends w{constructor({cause:t,data:n,message:r}={}){var i;const s=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${s?`with reason: ${s}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(It,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ss extends w{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(Ss,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class As extends w{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(As,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class Is extends w{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(Is,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class ks extends w{constructor({cause:t,factory:n,factoryData:r,initCode:s}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,s&&`initCode: ${s}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(ks,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class Os extends w{constructor({cause:t,factory:n,factoryData:r,initCode:s}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,s&&`initCode: ${s}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(Os,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class Ls extends w{constructor({cause:t,factory:n,factoryData:r,initCode:s,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,s&&`initCode: ${s}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(Ls,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class Ms extends w{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(Ms,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class Bs extends w{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(Bs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class js extends w{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(js,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class Ts extends w{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(Ts,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class $s extends w{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty($s,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class Zn extends w{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ns extends w{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Ns,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class ct extends w{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(ct,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class Rs extends w{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(Rs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Ds extends w{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Ds,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class Yn extends w{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Jn extends w{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Us extends w{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Us,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Fs extends w{constructor({cause:t,factory:n,factoryData:r,initCode:s}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",s&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Fs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class Xn extends w{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(Xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Gs extends w{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Gs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class Qn extends w{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class Hs extends w{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(Hs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class zs extends w{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(zs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Vs extends w{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Vs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Ws extends w{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Ws,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class er extends w{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(er,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class tr extends w{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class nr extends w{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class rr extends w{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(rr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class Dp extends w{constructor({cause:t}){super(`An error occurred while executing user operation: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class qs extends w{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(qs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class Ks extends w{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(Ks,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class Up extends w{constructor(t,{callData:n,callGasLimit:r,docsPath:s,factory:i,factoryData:a,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,paymaster:d,paymasterAndData:h,paymasterData:f,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:m,preVerificationGas:x,sender:b,signature:g,verificationGasLimit:_}){const E=gn({callData:n,callGasLimit:r,factory:i,factoryData:a,initCode:o,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l,paymaster:d,paymasterAndData:h,paymasterData:f,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:m,preVerificationGas:x,sender:b,signature:g,verificationGasLimit:_});super(t.shortMessage,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",E].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Fp extends w{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class Gp extends w{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class Ta extends w{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const Hp=[It,Zn,ct,Yn,Jn,Xn,Qn,rr,er,tr,nr];function zp(e,t){const n=(e.details||"").toLowerCase();if(Ps.message.test(n))return new Ps({cause:e});if(Ss.message.test(n))return new Ss({cause:e});if(As.message.test(n))return new As({cause:e});if(Is.message.test(n))return new Is({cause:e});if(ks.message.test(n))return new ks({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Os.message.test(n))return new Os({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ls.message.test(n))return new Ls({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(Ms.message.test(n))return new Ms({cause:e});if(Bs.message.test(n))return new Bs({cause:e});if(Ts.message.test(n))return new Ts({cause:e,nonce:t.nonce});if(js.message.test(n))return new js({cause:e});if($s.message.test(n))return new $s({cause:e});if(Ns.message.test(n))return new Ns({cause:e});if(ct.message.test(n))return new ct({cause:e});if(Rs.message.test(n))return new Rs({cause:e});if(Ds.message.test(n))return new Ds({cause:e});if(Us.message.test(n))return new Us({cause:e});if(Gs.message.test(n))return new Gs({cause:e});if(Fs.message.test(n))return new Fs({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Hs.message.test(n))return new Hs({cause:e});if(zs.message.test(n))return new zs({cause:e});if(Ws.message.test(n))return new Ws({cause:e});if(Vs.message.test(n))return new Vs({cause:e});if(qs.message.test(n))return new qs({cause:e});if(Ks.message.test(n))return new Ks({cause:e});const r=e.walk(s=>Hp.some(i=>i.code===s.code));if(r){if(r.code===It.code)return new It({cause:e,data:r.data,message:r.details});if(r.code===Zn.code)return new Zn({cause:e});if(r.code===ct.code)return new ct({cause:e});if(r.code===Yn.code)return new Yn({cause:e});if(r.code===Jn.code)return new Jn({cause:e});if(r.code===Xn.code)return new Xn({cause:e});if(r.code===Qn.code)return new Qn({cause:e});if(r.code===rr.code)return new rr({cause:e});if(r.code===er.code)return new er({cause:e});if(r.code===tr.code)return new tr({cause:e});if(r.code===nr.code)return new nr({cause:e})}return new Dp({cause:e})}function hu(e,{calls:t,docsPath:n,...r}){const s=(()=>{const i=zp(e,r);if(t&&i instanceof It){const a=Vp(i),o=t==null?void 0:t.filter(c=>c.abi);if(a&&o.length>0)return Wp({calls:o,revertData:a})}return i})();return new Up(s,{docsPath:n,...r})}function Vp(e){let t;return e.walk(n=>{var s,i,a,o;const r=n;if(typeof r.data=="string"||typeof((s=r.data)==null?void 0:s.revertData)=="string"||!(r instanceof w)&&typeof r.message=="string"){const c=(o=(a=((i=r.data)==null?void 0:i.revertData)||r.data||r.message).match)==null?void 0:o.call(a,/(0x[A-Za-z0-9]*)/);if(c)return t=c[1],!0}return!1}),t}function Wp(e){const{calls:t,revertData:n}=e,{abi:r,functionName:s,args:i,to:a}=(()=>{const c=t==null?void 0:t.filter(l=>!!l.abi);if(c.length===1)return c[0];const u=c.filter(l=>{try{return!!sc({abi:l.abi,data:n})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:c.reduce((l,d)=>`${l?`${l} | `:""}${d.functionName}`,""),args:void 0,to:void 0}})(),o=n==="0x"?new hc({functionName:s}):new Vn({abi:r,data:n,functionName:s});return new fc(o,{abi:r,args:i,contractAddress:a,functionName:s})}function qp(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function Sr(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=S(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=S(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=S(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=S(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=S(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=S(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=S(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=S(e.verificationGasLimit)),t}async function pu(e,t){const{chainId:n,entryPointAddress:r,context:s,...i}=t,a=Sr(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...a,callGasLimit:a.callGasLimit??"0x0",verificationGasLimit:a.verificationGasLimit??"0x0",preVerificationGas:a.preVerificationGas??"0x0"},r,S(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:he(o)},...c&&{paymasterVerificationGasLimit:he(c)}}}async function yu(e,t){const{chainId:n,entryPointAddress:r,context:s,...i}=t,a=Sr(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...a,callGasLimit:a.callGasLimit??"0x0",verificationGasLimit:a.verificationGasLimit??"0x0",preVerificationGas:a.preVerificationGas??"0x0"},r,S(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:he(o)},...c&&{paymasterVerificationGasLimit:he(c)}}}const Kp=["factory","fees","gas","paymaster","nonce","signature"];async function Ni(e,t){var M;const n=t,{account:r=e.account,parameters:s=Kp,stateOverride:i}=n;if(!r)throw new Si;const a=ce(r),o=e,c=n.paymaster??(o==null?void 0:o.paymaster),u=typeof c=="string"?c:void 0,{getPaymasterStubData:l,getPaymasterData:d}=(()=>{if(c===!0)return{getPaymasterStubData:C=>k(o,yu,"getPaymasterStubData")(C),getPaymasterData:C=>k(o,pu,"getPaymasterData")(C)};if(typeof c=="object"){const{getPaymasterStubData:C,getPaymasterData:P}=c;return{getPaymasterStubData:P&&C?C:P,getPaymasterData:P&&C?P:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),h=n.paymasterContext?n.paymasterContext:o==null?void 0:o.paymasterContext;let f={...n,paymaster:u,sender:a.address};const[y,m,x,b]=await Promise.all([(async()=>n.calls?a.encodeCalls(n.calls.map(C=>{const P=C;return P.abi?{data:se(P),to:P.to,value:P.value}:P})):n.callData)(),(async()=>{if(!s.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:C,factoryData:P}=await a.getFactoryArgs();return a.entryPoint.version==="0.6"?{initCode:C&&P?re([C,P]):void 0}:{factory:C,factoryData:P}})(),(async()=>{var C;if(s.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return f;if((C=o==null?void 0:o.userOperation)!=null&&C.estimateFeesPerGas){const P=await o.userOperation.estimateFeesPerGas({account:a,bundlerClient:o,userOperation:f});return{...f,...P}}try{const P=o.client??e,I=await k(P,_c,"estimateFeesPerGas")({chain:P.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(Math.max(Number(2n*I.maxFeePerGas),Number(Oa("3")))),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(Math.max(Number(2n*I.maxPriorityFeePerGas),Number(Oa("1"))))}}catch{return}}})(),(async()=>{if(s.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:a.getNonce()})()]);typeof y<"u"&&(f.callData=y),typeof m<"u"&&(f={...f,...m}),typeof x<"u"&&(f={...f,...x}),typeof b<"u"&&(f.nonce=b),s.includes("signature")&&(typeof n.signature<"u"?f.signature=n.signature:f.signature=await a.getStubSignature(f)),a.entryPoint.version==="0.6"&&!f.initCode&&(f.initCode="0x");let g;async function _(){return g||(e.chain?e.chain.id:(g=await k(e,gr,"getChainId")({}),g))}let E=!1;if(s.includes("paymaster")&&l&&!u&&!n.paymasterAndData){const{isFinal:C=!1,sponsor:P,...I}=await l({chainId:await _(),entryPointAddress:a.entryPoint.address,context:h,...f});E=C,f={...f,...I}}if(a.entryPoint.version==="0.6"&&!f.paymasterAndData&&(f.paymasterAndData="0x"),s.includes("gas")){if((M=a.userOperation)!=null&&M.estimateGas){const C=await a.userOperation.estimateGas(f);f={...f,...C}}if(typeof f.callGasLimit>"u"||typeof f.preVerificationGas>"u"||typeof f.verificationGasLimit>"u"||f.paymaster&&typeof f.paymasterPostOpGasLimit>"u"||f.paymaster&&typeof f.paymasterVerificationGasLimit>"u"){const C=await k(o,mu,"estimateUserOperationGas")({account:a,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...f.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...f});f={...f,callGasLimit:f.callGasLimit??C.callGasLimit,preVerificationGas:f.preVerificationGas??C.preVerificationGas,verificationGasLimit:f.verificationGasLimit??C.verificationGasLimit,paymasterPostOpGasLimit:f.paymasterPostOpGasLimit??C.paymasterPostOpGasLimit,paymasterVerificationGasLimit:f.paymasterVerificationGasLimit??C.paymasterVerificationGasLimit}}}if(s.includes("paymaster")&&d&&!u&&!n.paymasterAndData&&!E){const C=await d({chainId:await _(),entryPointAddress:a.entryPoint.address,context:h,...f});f={...f,...C}}return delete f.calls,delete f.parameters,delete f.paymasterContext,typeof f.paymaster!="string"&&delete f.paymaster,f}async function mu(e,t){var c;const{account:n=e.account,entryPointAddress:r,stateOverride:s}=t;if(!n&&!t.sender)throw new Si;const i=n?ce(n):void 0,a=br(s),o=i?await k(e,Ni,"prepareUserOperation")({...t,parameters:["factory","nonce","paymaster","signature"]}):t;try{const u=[Sr(o),r??((c=i==null?void 0:i.entryPoint)==null?void 0:c.address)],l=await e.request({method:"eth_estimateUserOperationGas",params:a?[...u,a]:[...u]});return qp(l)}catch(u){const l=t.calls;throw hu(u,{...o,...l?{calls:l}:{}})}}function Zp(e){return e.request({method:"eth_supportedEntryPoints"})}function Yp(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function Jp(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new Gp({hash:t});const{blockHash:r,blockNumber:s,entryPoint:i,transactionHash:a,userOperation:o}=n;return{blockHash:r,blockNumber:BigInt(s),entryPoint:i,transactionHash:a,userOperation:Yp(o)}}function Xp(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>Ie(n))),e.receipt&&(t.receipt=Zc(t.receipt)),t}async function bu(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new Fp({hash:t});return Xp(n)}async function Qp(e,t){const{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new Si;const s=n?ce(n):void 0,i=s?await k(e,Ni,"prepareUserOperation")(t):t,a=t.signature||await(s==null?void 0:s.signUserOperation(i)),o=Sr({...i,signature:a});try{return await e.request({method:"eth_sendUserOperation",params:[o,r??(s==null?void 0:s.entryPoint.address)]},{retryCount:0})}catch(c){const u=t.calls;throw hu(c,{...i,...u?{calls:u}:{},signature:a})}}function e1(e,t){const{hash:n,pollingInterval:r=e.pollingInterval,retryCount:s,timeout:i=12e4}=t;let a=0;const o=J(["waitForUserOperationReceipt",e.uid,n]);return new Promise((c,u)=>{const l=Ge(o,{resolve:c,reject:u},d=>{const h=y=>{f(),y(),l()},f=Nt(async()=>{s&&a>=s&&h(()=>d.reject(new Ta({hash:n})));try{const y=await k(e,bu,"getUserOperationReceipt")({hash:n});h(()=>d.resolve(y))}catch(y){const m=y;m.name!=="UserOperationReceiptNotFoundError"&&h(()=>d.reject(m))}a++},{emitOnBegin:!0,interval:r});return i&&setTimeout(()=>h(()=>d.reject(new Ta({hash:n}))),i),f})})}function t1(e){return{estimateUserOperationGas:t=>mu(e,t),getChainId:()=>gr(e),getSupportedEntryPoints:()=>Zp(e),getUserOperation:t=>Jp(e,t),getUserOperationReceipt:t=>bu(e,t),prepareUserOperation:t=>Ni(e,t),sendUserOperation:t=>Qp(e,t),waitForUserOperationReceipt:t=>e1(e,t)}}function n1(e){return{getPaymasterData:t=>pu(e,t),getPaymasterStubData:t=>yu(e,t)}}function r1(e){const{client:t,key:n="bundler",name:r="Bundler Client",paymaster:s,paymasterContext:i,transport:a,userOperation:o}=e;return Object.assign(Ai({...e,chain:e.chain??(t==null?void 0:t.chain),key:n,name:r,transport:a,type:"bundlerClient"}),{client:t,paymaster:s,paymasterContext:i,userOperation:o}).extend(t1)}function s1(e){const{key:t="bundler",name:n="Bundler Client",transport:r}=e;return Ai({...e,key:t,name:n,transport:r,type:"PaymasterClient"}).extend(n1)}const i1="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",a1="0.1.1";function o1(){return a1}class z extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof z){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof z&&n.cause.docsPath||n.docsPath,a=`https://oxlib.sh${s??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${o1()}`}),this.cause=n.cause,this.details=r,this.docs=a,this.docsPath=s,this.shortMessage=t}walk(t){return gu(this,t)}}function gu(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?gu(e.cause,t):t?null:e}const c1="#__bigint";function Ar(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+c1:s,n)}function u1(e,t){if(Ot(e)>t)throw new P1({givenSize:Ot(e),maxSize:t})}function d1(e,t){if(typeof t=="number"&&t>0&&t>Ot(e)-1)throw new Au({offset:t,position:"start",size:Ot(e)})}function l1(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Ot(e)!==n-t)throw new Au({offset:n,position:"end",size:Ot(e)})}const Le={zero:48,nine:57,A:65,F:70,a:97,f:102};function $a(e){if(e>=Le.zero&&e<=Le.nine)return e-Le.zero;if(e>=Le.A&&e<=Le.F)return e-(Le.A-10);if(e>=Le.a&&e<=Le.f)return e-(Le.a-10)}function Ri(e,t){if(tt(e)>t)throw new x1({givenSize:tt(e),maxSize:t})}function f1(e,t){if(typeof t=="number"&&t>0&&t>tt(e)-1)throw new Cu({offset:t,position:"start",size:tt(e)})}function h1(e,t,n){if(typeof t=="number"&&typeof n=="number"&&tt(e)!==n-t)throw new Cu({offset:n,position:"end",size:tt(e)})}function wu(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new _1({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const p1=new TextEncoder,y1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function m1(e,t={}){const{strict:n=!1}=t;if(!e)throw new Na(e);if(typeof e!="string")throw new Na(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Ra(e);if(!e.startsWith("0x"))throw new Ra(e)}function Ir(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function vu(e){return e instanceof Uint8Array?kt(e):Array.isArray(e)?kt(new Uint8Array(e)):e}function kt(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=y1[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ri(r,t.size),_u(r,t.size)):r}function et(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const u=typeof e=="bigint"?"n":"";throw new v1({max:i?`${i}${u}`:void 0,min:`${a}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?b1(c,r):c}function xu(e,t={}){return kt(p1.encode(e),t)}function b1(e,t){return wu(e,{dir:"left",size:t})}function _u(e,t){return wu(e,{dir:"right",size:t})}function le(e,t,n,r={}){const{strict:s}=r;f1(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&h1(i,t,n),i}function tt(e){return Math.ceil((e.length-2)/2)}function g1(e,t={}){const{signed:n}=t;t.size&&Ri(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,a=i>>1n;return r<=a?r:r-i-1n}function w1(e,t={}){const{strict:n=!1}=t;try{return m1(e,{strict:n}),!0}catch{return!1}}class v1 extends z{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Na extends z{constructor(t){super(`Value \`${typeof t=="object"?Ar(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Ra extends z{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let x1=class extends z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},Cu=class extends z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class _1 extends z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function C1(e){if(!(e instanceof Uint8Array)){if(!e)throw new An(e);if(typeof e!="object")throw new An(e);if(!("BYTES_PER_ELEMENT"in e))throw new An(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new An(e)}}function Eu(e){return e instanceof Uint8Array?e:typeof e=="string"?Su(e):Pu(e)}function Pu(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Su(e,t={}){const{size:n}=t;let r=e;n&&(Ri(e,n),r=_u(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const u=$a(s.charCodeAt(c++)),l=$a(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new z(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[o]=u*16+l}return a}function Ot(e){return e.length}function Da(e,t,n,r={}){const{strict:s}=r;d1(e,t);const i=e.slice(t,n);return s&&l1(i,t,n),i}function Ua(e,t={}){const{size:n}=t;typeof n<"u"&&u1(e,n);const r=kt(e,t);return g1(r,t)}function E1(e){try{return C1(e),!0}catch{return!1}}class An extends z{constructor(t){super(`Value \`${typeof t=="object"?Ar(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class P1 extends z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class Au extends z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}const Fa=2n**256n-1n;function S1(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new qr({signature:e});if(typeof e.s>"u")throw new qr({signature:e});if(n&&typeof e.yParity>"u")throw new qr({signature:e});if(e.r<0n||e.r>Fa)throw new M1({value:e.r});if(e.s<0n||e.s>Fa)throw new B1({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new Di({value:e.yParity})}function A1(e){if(e.length!==130&&e.length!==132)throw new L1({signature:e});const t=BigInt(le(e,0,32)),n=BigInt(le(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return k1(s)}catch{throw new Di({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function I1(e){S1(e);const t=e.r,n=e.s;return Ir(et(t,{size:32}),et(n,{size:32}),typeof e.yParity=="number"?et(O1(e.yParity),{size:1}):"0x")}function k1(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new j1({value:e})}function O1(e){if(e===0)return 27;if(e===1)return 28;throw new Di({value:e})}let L1=class extends z{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${tt(vu(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}};class qr extends z{constructor({signature:t}){super(`Signature \`${Ar(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class M1 extends z{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class B1 extends z{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Di extends z{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class j1 extends z{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const T1="0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a",Je=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],$1=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];var N1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};async function R1(e){const{owner:t,ownerIndex:n,address:r,client:s,factoryData:i}=e,a={abi:$p,address:i1,version:"0.6"},o={abi:$1,address:T1};return Rp({client:s,entryPoint:a,extend:{abi:Je,factory:o},async decodeCalls(c){const u=Th({abi:Je,data:c});if(u.functionName==="execute")return[{to:u.args[0],value:u.args[1],data:u.args[2]}];if(u.functionName==="executeBatch")return u.args[0].map(l=>({to:l.target,value:l.value,data:l.data}));throw new w(`unable to decode calls for "${u.functionName}"`)},async encodeCalls(c){var u,l;return c.length===1?se({abi:Je,functionName:"execute",args:[c[0].to,(u=c[0].value)!==null&&u!==void 0?u:BigInt(0),(l=c[0].data)!==null&&l!==void 0?l:"0x"]}):se({abi:Je,functionName:"executeBatch",args:[c.map(d=>{var h,f;return{data:(h=d.data)!==null&&h!==void 0?h:"0x",target:d.to,value:(f=d.value)!==null&&f!==void 0?f:BigInt(0)}})]})},async getAddress(){return r},async getFactoryArgs(){return i?{factory:o.address,factoryData:i}:{factory:o.address,factoryData:i}},async getStubSignature(){return t.type==="webAuthn"?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":Gt({ownerIndex:n,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"})},async sign(c){const u=await this.getAddress(),l=Kr({address:u,chainId:s.chain.id,hash:c.hash}),d=await In({hash:l,owner:t});return Gt({ownerIndex:n,signature:d})},async signMessage(c){const{message:u}=c,l=await this.getAddress(),d=Kr({address:l,chainId:s.chain.id,hash:Er(u)}),h=await In({hash:d,owner:t});return Gt({ownerIndex:n,signature:h})},async signTypedData(c){const{domain:u,types:l,primaryType:d,message:h}=c,f=await this.getAddress(),y=Kr({address:f,chainId:s.chain.id,hash:Cr({domain:u,message:h,primaryType:d,types:l})}),m=await In({hash:y,owner:t});return Gt({ownerIndex:n,signature:m})},async signUserOperation(c){const{chainId:u=s.chain.id}=c,l=N1(c,["chainId"]),d=await this.getAddress(),h=Np({chainId:u,entryPointAddress:a.address,entryPointVersion:a.version,userOperation:Object.assign(Object.assign({},l),{sender:d})}),f=await In({hash:h,owner:t});return Gt({ownerIndex:n,signature:f})},userOperation:{async estimateGas(c){var u;if(t.type==="webAuthn")return{verificationGasLimit:BigInt(Math.max(Number((u=c.verificationGasLimit)!==null&&u!==void 0?u:BigInt(0)),8e5))}}}})}async function In({hash:e,owner:t}){if(t.type==="webAuthn"){const{signature:n,webauthn:r}=await t.sign({hash:e});return D1({signature:n,webauthn:r})}if(t.sign)return t.sign({hash:e});throw new w("`owner` does not support raw sign.")}function Kr({address:e,chainId:t,hash:n}){return Cr({domain:{chainId:t,name:"Coinbase Smart Wallet",verifyingContract:e,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:n}})}function D1({webauthn:e,signature:t}){const{r:n,s:r}=A1(t);return me([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:e.authenticatorData,clientDataJSON:lt(e.clientDataJSON),challengeIndex:BigInt(e.challengeIndex),typeIndex:BigInt(e.typeIndex),r:n,s:r}])}function Gt(e){const{ownerIndex:t=0}=e,n=(()=>{if(V(e.signature)!==65)return e.signature;const r=wp(e.signature);return $h(["bytes32","bytes32","uint8"],[r.r,r.s,r.yParity===0?27:28])})();return me([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:t,signatureData:n}])}async function U1({address:e,client:t,publicKey:n}){const r=await pe(t,{address:e,abi:Je,functionName:"ownerCount"});for(let s=Number(r)-1;s>=0;s--){const i=await pe(t,{address:e,abi:Je,functionName:"ownerAtIndex",args:[BigInt(s)]}),a=F1(n);if(i.toLowerCase()===a.toLowerCase())return s}throw O.rpc.internal("account owner not found")}function F1(e){return ne(e)?Q(e):e}const Ga=e=>{let t;const n=new Set,r=(u,l)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=l??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(f=>f(t,h))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,s,o);return o},Iu=e=>e?Ga(e):Ga,Ui=Iu(()=>({}));function Ha(e){e.forEach(t=>{var n,r,s,i,a,o,c,u;if(!t.rpcUrl)return;const l=Ph({id:t.id,rpcUrls:{default:{http:[t.rpcUrl]}},name:(r=(n=t.nativeCurrency)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",nativeCurrency:{name:(i=(s=t.nativeCurrency)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:"",symbol:(o=(a=t.nativeCurrency)===null||a===void 0?void 0:a.symbol)!==null&&o!==void 0?o:"",decimals:(u=(c=t.nativeCurrency)===null||c===void 0?void 0:c.decimal)!==null&&u!==void 0?u:18}}),d=gp({chain:l,transport:ws(t.rpcUrl)}),h=r1({client:d,transport:ws(t.rpcUrl)});Ui.setState({[t.id]:{client:d,bundlerClient:h}})})}function G1(e){var t;return(t=Ui.getState()[e])===null||t===void 0?void 0:t.client}function H1(e){var t;return(t=Ui.getState()[e])===null||t===void 0?void 0:t.bundlerClient}function ku(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const a=c=>c===null?null:JSON.parse(c,void 0),o=(i=n.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Zs=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Zs(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Zs(r)(n)}}}},z1=(e,t)=>(n,r,s)=>{let i={storage:ku(()=>localStorage),partialize:m=>m,version:0,merge:(m,x)=>({...x,...m}),...t},a=!1;const o=new Set,c=new Set;let u=i.storage;if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const l=()=>{const m=i.partialize({...r()});return u.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,x)=>{d(m,x),l()};const h=e((...m)=>{n(...m),l()},r,s);s.getInitialState=()=>h;let f;const y=()=>{var m,x;if(!u)return;a=!1,o.forEach(g=>{var _;return g((_=r())!=null?_:h)});const b=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(m=r())!=null?m:h))||void 0;return Zs(u.getItem.bind(u))(i.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate){const _=i.migrate(g.state,g.version);return _ instanceof Promise?_.then(E=>[!0,E]):[!0,_]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var _;const[E,M]=g;if(f=i.merge(M,(_=r())!=null?_:h),n(f,!0),E)return l()}).then(()=>{b==null||b(f,void 0),f=r(),a=!0,c.forEach(g=>g(f))}).catch(g=>{b==null||b(void 0,g)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||y(),f||h},V1=z1,ae=Iu(V1(()=>({universalAccount:null,getSigner:null}),{name:"cbwsdk.subaccount",storage:ku(()=>localStorage),partialize:e=>({account:e.account})}));function rt(e,t,n){if(e==null)throw t??O.rpc.invalidParams({message:"value must be present",data:e})}function kn(e,t){if(!Array.isArray(e))throw O.rpc.invalidParams({message:"value must be an array",data:e})}function Dn(e,t){if(!(typeof e!="object"||e===null))return t.split(/[.[\]]+/).filter(Boolean).reduce((n,r)=>{if(typeof n=="object"&&n!==null)return n[r]},e)}async function W1({chainId:e}){const t=G1(e);rt(t,O.rpc.internal("client not found"));const{account:n,getSigner:r}=ae.getState();rt(n,O.rpc.internal("subaccount not found")),rt(r,O.rpc.internal("signer not found"));const{account:s}=await r();rt(s,O.rpc.internal("signer not found"));const i=await Kn(t,{address:n.address});let a=1;i&&(a=await U1({address:n.address,publicKey:s.publicKey||s.address,client:t}));const o=await R1({owner:s,ownerIndex:a,address:n.address,client:t,factoryData:n.factoryData});return{request:async c=>{switch(c.method){case"wallet_addSubAccount":return n;case"eth_accounts":return[n.address];case"eth_coinbase":return n.address;case"net_version":return e.toString();case"eth_chainId":return S(e);case"eth_sendTransaction":return kn(c.params),o.sign(c.params[0]);case"wallet_sendCalls":{kn(c.params);const u=Dn(c.params[0],"capabilities.paymasterService.url");let l;u&&(l=s1({transport:ws(u)}));const d=Dn(c.params[0],"chainId");rt(d,O.rpc.invalidParams("chainId is required"));const h=H1(d);rt(h,O.rpc.invalidParams("bundler client not found"));const f=Dn(c.params[0],"calls");return await h.sendUserOperation({account:o,calls:f,paymaster:l})}case"wallet_sendPreparedCalls":throw new Error("Not implemented");case"personal_sign":return kn(c.params),o.signMessage({message:c.params[0]});case"eth_signTypedData_v4":return kn(c.params),o.signTypedData(c.params[1]);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"wallet_addEthereumChain":case"wallet_switchEthereumChain":default:throw O.rpc.methodNotSupported()}}}}function za(e){if(typeof e!="object"||e===null)throw O.rpc.internal("sub account info is not an object");if(!("address"in e))throw O.rpc.internal("sub account is invalid");if("address"in e&&typeof e.address=="string"&&!ne(e.address))throw O.rpc.internal("sub account address is invalid");if("factory"in e&&typeof e.factory=="string"&&!ne(e.factory))throw O.rpc.internal("sub account factory address is invalid");if("factoryData"in e&&typeof e.factoryData=="string"&&!be(e.factoryData))throw O.rpc.internal("sub account factory data is invalid")}const xn="4.4.0-canary.1",Ou="@coinbase/wallet-sdk";async function Fi(e,t){const n=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),r=await window.fetch(t,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":xn,"X-Cbw-Sdk-Platform":Ou}}),{result:s,error:i}=await r.json();if(i)throw i;return s}function q1(){return globalThis.coinbaseWalletExtension}function K1(){var e,t;try{const n=globalThis;return(e=n.ethereum)!==null&&e!==void 0?e:(t=n.top)===null||t===void 0?void 0:t.ethereum}catch{return}}function Z1({metadata:e,preference:t}){var n,r;const{appName:s,appLogoUrl:i,appChainIds:a}=e;if(t.options!=="smartWalletOnly"){const c=q1();if(c)return(n=c.setAppInfo)===null||n===void 0||n.call(c,s,i,a,t),c}const o=K1();if(o!=null&&o.isCoinbaseBrowser)return(r=o.setAppInfo)===null||r===void 0||r.call(o,s,i,a,t),o}function Y1(e){if(!e||typeof e!="object"||Array.isArray(e))throw O.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw O.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw O.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw O.provider.unsupportedMethod()}}const Zr="accounts",Va="activeChain",Yr="availableChains",Wa="walletCapabilities";class J1{constructor(t){var n,r,s;this.metadata=t.metadata,this.communicator=t.communicator,this.callback=t.callback,this.keyManager=new jp,this.storage=new ke("CBWSDK","SCWStateManager"),this.accounts=(n=this.storage.loadObject(Zr))!==null&&n!==void 0?n:[],this.chain=this.storage.loadObject(Va)||{id:(s=(r=t.metadata.appChainIds)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this),ae.persist.rehydrate();const i=this.storage.loadObject(Yr);i&&Ha(i)}async handshake(t){var n,r,s;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const i=await this.createRequestMessage({handshake:{method:t.method,params:(s=t.params)!==null&&s!==void 0?s:[]}}),a=await this.communicator.postRequestAndWaitForResponse(i);if("failure"in a.content)throw a.content.failure;const o=await fu("public",a.sender);await this.keyManager.setPeerPublicKey(o);const c=await this.decryptResponseMessage(a);this.handleResponse(t,c)}async request(t){var n;if(this.accounts.length===0)switch(t.method){case"wallet_switchEthereumChain":return ja(t.params),this.chain.id=Number(t.params[0].chainId);case"wallet_connect":case"wallet_sendCalls":return this.sendRequestToPopup(t);default:throw O.provider.unauthorized()}if(this.shouldRequestUseSubAccountSigner(t))return this.sendRequestToSubAccountSigner(t);switch(t.method){case"eth_requestAccounts":return(n=this.callback)===null||n===void 0||n.call(this,"connect",{chainId:S(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return S(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(Wa);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(t);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":case"wallet_connect":return this.sendRequestToPopup(t);case"wallet_addSubAccount":return this.addSubAccount(t);default:if(!this.chain.rpcUrl)throw O.rpc.internal("No RPC URL set for chain");return Fi(t,this.chain.rpcUrl)}}async sendRequestToPopup(t){var n,r;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const s=await this.sendEncryptedRequest(t),i=await this.decryptResponseMessage(s);return this.handleResponse(t,i)}async handleResponse(t,n){var r,s,i,a;const o=n.result;if("error"in o)throw o.error;switch(t.method){case"eth_requestAccounts":{const c=o.value;this.accounts=c,this.storage.storeObject(Zr,c),(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",c);break}case"wallet_connect":{const c=o.value,u=c.accounts.map(y=>y.address);this.accounts=u,this.storage.storeObject(Zr,u);const l=c.accounts.at(0),d=l==null?void 0:l.capabilities;if(d!=null&&d.addSubAccount||d!=null&&d.getSubAccounts){const y=(s=d==null?void 0:d.addSubAccount)!==null&&s!==void 0?s:(i=d==null?void 0:d.getSubAccounts)===null||i===void 0?void 0:i[0];za(y),ae.setState({account:y,universalAccount:this.accounts[0]})}const h=[this.accounts[0]],f=ae.getState().account;f&&h.push(f.address),(a=this.callback)===null||a===void 0||a.call(this,"accountsChanged",h);break}}return o.value}async cleanup(){var t,n;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:(n=(t=this.metadata.appChainIds)===null||t===void 0?void 0:t[0])!==null&&n!==void 0?n:1}}async handleSwitchChainRequest(t){ja(t.params);const n=Kt(t.params[0].chainId);if(this.updateChain(n))return null;const s=await this.sendRequestToPopup(t);return s===null&&this.updateChain(n),s}async sendEncryptedRequest(t){const n=await this.keyManager.getSharedSecret();if(!n)throw O.provider.unauthorized("No valid session found, try requestAccounts before other methods");const r=await Mp({action:t,chainId:this.chain.id},n),s=await this.createRequestMessage({encrypted:r});return this.communicator.postRequestAndWaitForResponse(s)}async createRequestMessage(t){const n=await lu("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:n,content:t,timestamp:new Date}}async decryptResponseMessage(t){var n,r,s;const i=t.content;if("failure"in i)throw i.failure;const a=await this.keyManager.getSharedSecret();if(!a)throw O.provider.unauthorized("Invalid session");const o=await Bp(i.encrypted,a),c=(n=o.data)===null||n===void 0?void 0:n.chains;if(c){const l=(r=o.data)===null||r===void 0?void 0:r.nativeCurrencies,d=Object.entries(c).map(([h,f])=>{const y=l==null?void 0:l[Number(h)];return Object.assign({id:Number(h),rpcUrl:f},y?{nativeCurrency:y}:{})});this.storage.storeObject(Yr,d),this.updateChain(this.chain.id,d),Ha(d)}const u=(s=o.data)===null||s===void 0?void 0:s.capabilities;return u&&this.storage.storeObject(Wa,u),o}updateChain(t,n){var r;const s=n??this.storage.loadObject(Yr),i=s==null?void 0:s.find(a=>a.id===t);return i?(i!==this.chain&&(this.chain=i,this.storage.storeObject(Va,i),(r=this.callback)===null||r===void 0||r.call(this,"chainChanged",wt(i.id))),!0):!1}async addSubAccount(t){var n,r,s,i;const a=ae.getState();if(a.account)return(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",[this.accounts[0],a.account.address]),a.account;if(await((s=(r=this.communicator).waitForPopupLoaded)===null||s===void 0?void 0:s.call(r)),Dn(t,"params[0].address"))throw O.rpc.invalidParams("importing an address is not yet supported");const c=await this.sendRequestToPopup(t);return za(c),ae.setState({account:c,universalAccount:this.accounts[0]}),(i=this.callback)===null||i===void 0||i.call(this,"accountsChanged",[this.accounts[0],c.address]),c}shouldRequestUseSubAccountSigner(t){var n;const r=Ba(t),s=ae.getState();return r?r===((n=s.account)===null||n===void 0?void 0:n.address):!1}async sendRequestToSubAccountSigner(t){const n=ae.getState();return rt(n.account,O.provider.unauthorized("no active sub account")),Ba(t)===void 0&&(t=Tp(t,n.account.address)),(await W1({chainId:this.chain.id})).request(t)}}var U={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.output=Y.exists=Y.hash=Y.bytes=Y.bool=Y.number=Y.isBytes=void 0;function sr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}Y.number=sr;function Lu(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}Y.bool=Lu;function Mu(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}Y.isBytes=Mu;function Gi(e,...t){if(!Mu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}Y.bytes=Gi;function Bu(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sr(e.outputLen),sr(e.blockLen)}Y.hash=Bu;function ju(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Y.exists=ju;function Tu(e,t){Gi(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Y.output=Tu;const X1={number:sr,bool:Lu,bytes:Gi,hash:Bu,exists:ju,output:Tu};Y.default=X1;var B={};Object.defineProperty(B,"__esModule",{value:!0});B.add5L=B.add5H=B.add4H=B.add4L=B.add3H=B.add3L=B.add=B.rotlBL=B.rotlBH=B.rotlSL=B.rotlSH=B.rotr32L=B.rotr32H=B.rotrBL=B.rotrBH=B.rotrSL=B.rotrSH=B.shrSL=B.shrSH=B.toBig=B.split=B.fromBig=void 0;const On=BigInt(2**32-1),Ys=BigInt(32);function Hi(e,t=!1){return t?{h:Number(e&On),l:Number(e>>Ys&On)}:{h:Number(e>>Ys&On)|0,l:Number(e&On)|0}}B.fromBig=Hi;function $u(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=Hi(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]}B.split=$u;const Nu=(e,t)=>BigInt(e>>>0)<<Ys|BigInt(t>>>0);B.toBig=Nu;const Ru=(e,t,n)=>e>>>n;B.shrSH=Ru;const Du=(e,t,n)=>e<<32-n|t>>>n;B.shrSL=Du;const Uu=(e,t,n)=>e>>>n|t<<32-n;B.rotrSH=Uu;const Fu=(e,t,n)=>e<<32-n|t>>>n;B.rotrSL=Fu;const Gu=(e,t,n)=>e<<64-n|t>>>n-32;B.rotrBH=Gu;const Hu=(e,t,n)=>e>>>n-32|t<<64-n;B.rotrBL=Hu;const zu=(e,t)=>t;B.rotr32H=zu;const Vu=(e,t)=>e;B.rotr32L=Vu;const Wu=(e,t,n)=>e<<n|t>>>32-n;B.rotlSH=Wu;const qu=(e,t,n)=>t<<n|e>>>32-n;B.rotlSL=qu;const Ku=(e,t,n)=>t<<n-32|e>>>64-n;B.rotlBH=Ku;const Zu=(e,t,n)=>e<<n-32|t>>>64-n;B.rotlBL=Zu;function Yu(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}B.add=Yu;const Ju=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);B.add3L=Ju;const Xu=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;B.add3H=Xu;const Qu=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);B.add4L=Qu;const ed=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0;B.add4H=ed;const td=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0);B.add5L=td;const nd=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0;B.add5H=nd;const Q1={fromBig:Hi,split:$u,toBig:Nu,shrSH:Ru,shrSL:Du,rotrSH:Uu,rotrSL:Fu,rotrBH:Gu,rotrBL:Hu,rotr32H:zu,rotr32L:Vu,rotlSH:Wu,rotlSL:qu,rotlBH:Ku,rotlBL:Zu,add:Yu,add3L:Ju,add3H:Xu,add4L:Qu,add4H:ed,add5H:nd,add5L:td};B.default=Q1;var rd={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.crypto=void 0;kr.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;const t=kr,n=Y;function r(v){return v instanceof Uint8Array||v!=null&&typeof v=="object"&&v.constructor.name==="Uint8Array"}e.isBytes=r;const s=v=>new Uint8Array(v.buffer,v.byteOffset,v.byteLength);e.u8=s;const i=v=>new Uint32Array(v.buffer,v.byteOffset,Math.floor(v.byteLength/4));e.u32=i;const a=v=>new DataView(v.buffer,v.byteOffset,v.byteLength);e.createView=a;const o=(v,A)=>v<<32-A|v>>>A;e.rotr=o;const c=(v,A)=>v<<A|v>>>32-A>>>0;e.rotl=c,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const u=v=>v<<24&4278190080|v<<8&16711680|v>>>8&65280|v>>>24&255;e.byteSwap=u,e.byteSwapIfBE=e.isLE?v=>v:v=>(0,e.byteSwap)(v);function l(v){for(let A=0;A<v.length;A++)v[A]=(0,e.byteSwap)(v[A])}e.byteSwap32=l;const d=Array.from({length:256},(v,A)=>A.toString(16).padStart(2,"0"));function h(v){(0,n.bytes)(v);let A="";for(let R=0;R<v.length;R++)A+=d[v[R]];return A}e.bytesToHex=h;const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function y(v){if(v>=f._0&&v<=f._9)return v-f._0;if(v>=f._A&&v<=f._F)return v-(f._A-10);if(v>=f._a&&v<=f._f)return v-(f._a-10)}function m(v){if(typeof v!="string")throw new Error("hex string expected, got "+typeof v);const A=v.length,R=A/2;if(A%2)throw new Error("padded hex string expected, got unpadded hex of length "+A);const $=new Uint8Array(R);for(let N=0,F=0;N<R;N++,F+=2){const ee=y(v.charCodeAt(F)),ue=y(v.charCodeAt(F+1));if(ee===void 0||ue===void 0){const ve=v[F]+v[F+1];throw new Error('hex string expected, got non-hex character "'+ve+'" at index '+F)}$[N]=ee*16+ue}return $}e.hexToBytes=m;const x=async()=>{};e.nextTick=x;async function b(v,A,R){let $=Date.now();for(let N=0;N<v;N++){R(N);const F=Date.now()-$;F>=0&&F<A||(await(0,e.nextTick)(),$+=F)}}e.asyncLoop=b;function g(v){if(typeof v!="string")throw new Error(`utf8ToBytes expected string, got ${typeof v}`);return new Uint8Array(new TextEncoder().encode(v))}e.utf8ToBytes=g;function _(v){return typeof v=="string"&&(v=g(v)),(0,n.bytes)(v),v}e.toBytes=_;function E(...v){let A=0;for(let $=0;$<v.length;$++){const N=v[$];(0,n.bytes)(N),A+=N.length}const R=new Uint8Array(A);for(let $=0,N=0;$<v.length;$++){const F=v[$];R.set(F,N),N+=F.length}return R}e.concatBytes=E;class M{clone(){return this._cloneInto()}}e.Hash=M;const C={}.toString;function P(v,A){if(A!==void 0&&C.call(A)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(v,A)}e.checkOpts=P;function I(v){const A=$=>v().update(_($)).digest(),R=v();return A.outputLen=R.outputLen,A.blockLen=R.blockLen,A.create=()=>v(),A}e.wrapConstructor=I;function L(v){const A=($,N)=>v(N).update(_($)).digest(),R=v({});return A.outputLen=R.outputLen,A.blockLen=R.blockLen,A.create=$=>v($),A}e.wrapConstructorWithOpts=L;function j(v){const A=($,N)=>v(N).update(_($)).digest(),R=v({});return A.outputLen=R.outputLen,A.blockLen=R.blockLen,A.create=$=>v($),A}e.wrapXOFConstructorWithOpts=j;function T(v=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(v));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=T})(rd);Object.defineProperty(U,"__esModule",{value:!0});U.shake256=U.shake128=U.keccak_512=U.keccak_384=U.keccak_256=U.keccak_224=U.sha3_512=U.sha3_384=U.sha3_256=U.sha3_224=U.Keccak=U.keccakP=void 0;const bt=Y,hn=B,Me=rd,sd=[],id=[],ad=[],ey=BigInt(0),Ht=BigInt(1),ty=BigInt(2),ny=BigInt(7),ry=BigInt(256),sy=BigInt(113);for(let e=0,t=Ht,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],sd.push(2*(5*r+n)),id.push((e+1)*(e+2)/2%64);let s=ey;for(let i=0;i<7;i++)t=(t<<Ht^(t>>ny)*sy)%ry,t&ty&&(s^=Ht<<(Ht<<BigInt(i))-Ht);ad.push(s)}const[iy,ay]=(0,hn.split)(ad,!0),qa=(e,t,n)=>n>32?(0,hn.rotlBH)(e,t,n):(0,hn.rotlSH)(e,t,n),Ka=(e,t,n)=>n>32?(0,hn.rotlBL)(e,t,n):(0,hn.rotlSL)(e,t,n);function od(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],l=n[c+1],d=qa(u,l,1)^n[o],h=Ka(u,l,1)^n[o+1];for(let f=0;f<50;f+=10)e[a+f]^=d,e[a+f+1]^=h}let s=e[2],i=e[3];for(let a=0;a<24;a++){const o=id[a],c=qa(s,i,o),u=Ka(s,i,o),l=sd[a];s=e[l],i=e[l+1],e[l]=c,e[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=e[a+o];for(let o=0;o<10;o++)e[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}e[0]^=iy[r],e[1]^=ay[r]}n.fill(0)}U.keccakP=od;class _n extends Me.Hash{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,bt.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Me.u32)(this.state)}keccak(){Me.isLE||(0,Me.byteSwap32)(this.state32),od(this.state32,this.rounds),Me.isLE||(0,Me.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,bt.exists)(this);const{blockLen:n,state:r}=this;t=(0,Me.toBytes)(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){(0,bt.exists)(this,!1),(0,bt.bytes)(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,bt.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,bt.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new _n(n,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}U.Keccak=_n;const nt=(e,t,n)=>(0,Me.wrapConstructor)(()=>new _n(t,e,n));U.sha3_224=nt(6,144,224/8);U.sha3_256=nt(6,136,256/8);U.sha3_384=nt(6,104,384/8);U.sha3_512=nt(6,72,512/8);U.keccak_224=nt(1,144,224/8);U.keccak_256=nt(1,136,256/8);U.keccak_384=nt(1,104,384/8);U.keccak_512=nt(1,72,512/8);const cd=(e,t,n)=>(0,Me.wrapXOFConstructorWithOpts)((r={})=>new _n(t,e,r.dkLen===void 0?n:r.dkLen,!0));U.shake128=cd(31,168,128/8);U.shake256=cd(31,136,256/8);var Te=["buffer","Buffer"];const{keccak_256:oy}=U;function ud(e){return Te.allocUnsafe(e).fill(0)}function cy(e){return e.toString(2).length}function dd(e,t){let n=e.toString(16);n.length%2!==0&&(n="0"+n);const r=n.match(/.{1,2}/g).map(s=>parseInt(s,16));for(;r.length<t;)r.unshift(0);return Te.from(r)}function uy(e,t){const n=e<0n;let r;if(n){const s=(1n<<BigInt(t))-1n;r=(~e&s)+1n}else r=e;return r&=(1n<<BigInt(t))-1n,r}function ld(e,t,n){const r=ud(t);return e=Or(e),n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)}function dy(e,t){return ld(e,t,!0)}function Or(e){if(!Te.isBuffer(e))if(Array.isArray(e))e=Te.from(e);else if(typeof e=="string")fd(e)?e=Te.from(hy(hd(e)),"hex"):e=Te.from(e);else if(typeof e=="number")e=intToBuffer(e);else if(e==null)e=Te.allocUnsafe(0);else if(typeof e=="bigint")e=dd(e);else if(e.toArray)e=Te.from(e.toArray());else throw new Error("invalid type");return e}function ly(e){return e=Or(e),"0x"+e.toString("hex")}function fy(e,t){if(e=Or(e),t||(t=256),t!==256)throw new Error("unsupported");return Te.from(oy(new Uint8Array(e)))}function hy(e){return e.length%2?"0"+e:e}function fd(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function hd(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var pd={zeros:ud,setLength:ld,setLengthRight:dy,isHexString:fd,stripHexPrefix:hd,toBuffer:Or,bufferToHex:ly,keccak:fy,bitLengthFromBigInt:cy,bufferBEFromBigInt:dd,twosFromBigInt:uy},Ne=["buffer","Buffer"];const te=pd;function yd(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function _t(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Za(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function md(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":Number.parseInt(t[2],10):null}function it(e){var t=typeof e;if(t==="string"||t==="number")return BigInt(e);if(t==="bigint")return e;throw new Error("Argument is not a number")}function Pe(e,t){var n,r,s,i;if(e==="address")return Pe("uint160",it(t));if(e==="bool")return Pe("uint8",t?1:0);if(e==="string")return Pe("bytes",new Ne(t,"utf8"));if(yy(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(n=md(e),n!=="dynamic"&&n!==0&&t.length>n)throw new Error("Elements exceed array size: "+n);s=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(i in t)s.push(Pe(e,t[i]));if(n==="dynamic"){var a=Pe("uint256",t.length);s.unshift(a)}return Ne.concat(s)}else{if(e==="bytes")return t=new Ne(t),s=Ne.concat([Pe("uint256",t.length),t]),t.length%32!==0&&(s=Ne.concat([s,te.zeros(32-t.length%32)])),s;if(e.startsWith("bytes")){if(n=_t(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return te.setLengthRight(t,32)}else if(e.startsWith("uint")){if(n=_t(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);r=it(t);const o=te.bitLengthFromBigInt(r);if(o>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+o);if(r<0)throw new Error("Supplied uint is negative");return te.bufferBEFromBigInt(r,32)}else if(e.startsWith("int")){if(n=_t(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);r=it(t);const o=te.bitLengthFromBigInt(r);if(o>n)throw new Error("Supplied int exceeds width: "+n+" vs "+o);const c=te.twosFromBigInt(r,256);return te.bufferBEFromBigInt(c,32)}else if(e.startsWith("ufixed")){if(n=Za(e),r=it(t),r<0)throw new Error("Supplied ufixed is negative");return Pe("uint256",r*BigInt(2)**BigInt(n[1]))}else if(e.startsWith("fixed"))return n=Za(e),Pe("int256",it(t)*BigInt(2)**BigInt(n[1]))}throw new Error("Unsupported or invalid type: "+e)}function py(e){return e==="string"||e==="bytes"||md(e)==="dynamic"}function yy(e){return e.lastIndexOf("]")===e.length-1}function my(e,t){var n=[],r=[],s=32*e.length;for(var i in e){var a=yd(e[i]),o=t[i],c=Pe(a,o);py(a)?(n.push(Pe("uint256",s)),r.push(c),s+=c.length):n.push(c)}return Ne.concat(n.concat(r))}function bd(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var n,r,s=[],i=0;i<e.length;i++){var a=yd(e[i]),o=t[i];if(a==="bytes")s.push(o);else if(a==="string")s.push(new Ne(o,"utf8"));else if(a==="bool")s.push(new Ne(o?"01":"00","hex"));else if(a==="address")s.push(te.setLength(o,20));else if(a.startsWith("bytes")){if(n=_t(a),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);s.push(te.setLengthRight(o,n))}else if(a.startsWith("uint")){if(n=_t(a),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);r=it(o);const c=te.bitLengthFromBigInt(r);if(c>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+c);s.push(te.bufferBEFromBigInt(r,n/8))}else if(a.startsWith("int")){if(n=_t(a),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);r=it(o);const c=te.bitLengthFromBigInt(r);if(c>n)throw new Error("Supplied int exceeds width: "+n+" vs "+c);const u=te.twosFromBigInt(r,n);s.push(te.bufferBEFromBigInt(u,n/8))}else throw new Error("Unsupported or invalid type: "+a)}return Ne.concat(s)}function by(e,t){return te.keccak(bd(e,t))}var gy={rawEncode:my,solidityPack:bd,soliditySHA3:by},Ln=["buffer","Buffer"];const ye=pd,Zt=gy,gd={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Jr={encodeData(e,t,n,r=!0){const s=["bytes32"],i=[this.hashType(e,n)];if(r){const a=(o,c,u)=>{if(n[c]!==void 0)return["bytes32",u==null?"0x0000000000000000000000000000000000000000000000000000000000000000":ye.keccak(this.encodeData(c,u,n,r))];if(u===void 0)throw new Error(`missing value for field ${o} of type ${c}`);if(c==="bytes")return["bytes32",ye.keccak(u)];if(c==="string")return typeof u=="string"&&(u=Ln.from(u,"utf8")),["bytes32",ye.keccak(u)];if(c.lastIndexOf("]")===c.length-1){const l=c.slice(0,c.lastIndexOf("[")),d=u.map(h=>a(o,l,h));return["bytes32",ye.keccak(Zt.rawEncode(d.map(([h])=>h),d.map(([,h])=>h)))]}return[c,u]};for(const o of n[e]){const[c,u]=a(o.name,o.type,t[o.name]);s.push(c),i.push(u)}}else for(const a of n[e]){let o=t[a.name];if(o!==void 0)if(a.type==="bytes")s.push("bytes32"),o=ye.keccak(o),i.push(o);else if(a.type==="string")s.push("bytes32"),typeof o=="string"&&(o=Ln.from(o,"utf8")),o=ye.keccak(o),i.push(o);else if(n[a.type]!==void 0)s.push("bytes32"),o=ye.keccak(this.encodeData(a.type,o,n,r)),i.push(o);else{if(a.type.lastIndexOf("]")===a.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");s.push(a.type),i.push(o)}}return Zt.rawEncode(s,i)},encodeType(e,t){let n="",r=this.findTypeDependencies(e,t).filter(s=>s!==e);r=[e].concat(r.sort());for(const s of r){if(!t[s])throw new Error("No type definition specified: "+s);n+=s+"("+t[s].map(({name:a,type:o})=>o+" "+a).join(",")+")"}return n},findTypeDependencies(e,t,n=[]){if(e=e.match(/^\w*/)[0],n.includes(e)||t[e]===void 0)return n;n.push(e);for(const r of t[e])for(const s of this.findTypeDependencies(r.type,t,n))!n.includes(s)&&n.push(s);return n},hashStruct(e,t,n,r=!0){return ye.keccak(this.encodeData(e,t,n,r))},hashType(e,t){return ye.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in gd.properties)e[n]&&(t[n]=e[n]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const n=this.sanitizeData(e),r=[Ln.from("1901","hex")];return r.push(this.hashStruct("EIP712Domain",n.domain,n.types,t)),n.primaryType!=="EIP712Domain"&&r.push(this.hashStruct(n.primaryType,n.message,n.types,t)),ye.keccak(Ln.concat(r))}};var wy={TYPED_MESSAGE_SCHEMA:gd,TypedDataUtils:Jr,hashForSignTypedDataLegacy:function(e){return vy(e.data)},hashForSignTypedData_v3:function(e){return Jr.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return Jr.hash(e.data)}};function vy(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const n=e.map(function(i){return i.type==="bytes"?ye.toBuffer(i.value):i.value}),r=e.map(function(i){return i.type}),s=e.map(function(i){if(!i.name)throw t;return i.type+" "+i.name});return Zt.soliditySHA3(["bytes32","bytes32"],[Zt.soliditySHA3(new Array(e.length).fill("string"),s),Zt.soliditySHA3(r,n)])}const Mn=Po(wy),xy="walletUsername",Js="Addresses",_y="AppVersion";function X(e){return e.errorMessage!==void 0}class Cy{constructor(t){this.secret=t}async encrypt(t){const n=this.secret;if(n.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.importKey("raw",Rn(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,i.encode(t)),o=16,c=a.slice(a.byteLength-o),u=a.slice(0,a.byteLength-o),l=new Uint8Array(c),d=new Uint8Array(u),h=new Uint8Array([...r,...l,...d]);return ji(h)}async decrypt(t){const n=this.secret;if(n.length!==64)throw Error("secret must be 256 bits");return new Promise((r,s)=>{(async function(){const i=await crypto.subtle.importKey("raw",Rn(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=Rn(t),o=a.slice(0,12),c=a.slice(12,28),u=a.slice(28),l=new Uint8Array([...u,...c]),d={name:"AES-GCM",iv:new Uint8Array(o)};try{const h=await window.crypto.subtle.decrypt(d,i,l),f=new TextDecoder;r(f.decode(h))}catch(h){s(h)}})()})}}class Ey{constructor(t,n,r){this.linkAPIUrl=t,this.sessionId=n;const s=`${n}:${r}`;this.auth=`Basic ${btoa(s)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map(n=>fetch(`${this.linkAPIUrl}/events/${n.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(n=>console.error("Unable to mark events as seen:",n))}async fetchUnseenEvents(){var t;const n=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(n.ok){const{events:r,error:s}=await n.json();if(s)throw new Error(`Check unseen events failed: ${s}`);const i=(t=r==null?void 0:r.filter(a=>a.event==="Web3Response").map(a=>({type:"Event",sessionId:this.sessionId,eventId:a.id,event:a.event,data:a.data})))!==null&&t!==void 0?t:[];return this.markUnseenEventsAsSeen(i),i}throw new Error(`Check unseen events failed: ${n.status}`)}}var Re;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"})(Re||(Re={}));class Py{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,n=WebSocket){this.WebSocketClass=n,this.webSocket=null,this.pendingData=[],this.url=t.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((t,n)=>{var r;let s;try{this.webSocket=s=new this.WebSocketClass(this.url)}catch(i){n(i);return}(r=this.connectionStateListener)===null||r===void 0||r.call(this,Re.CONNECTING),s.onclose=i=>{var a;this.clearWebSocket(),n(new Error(`websocket error ${i.code}: ${i.reason}`)),(a=this.connectionStateListener)===null||a===void 0||a.call(this,Re.DISCONNECTED)},s.onopen=i=>{var a;t(),(a=this.connectionStateListener)===null||a===void 0||a.call(this,Re.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(c=>this.sendData(c)),this.pendingData=[])},s.onmessage=i=>{var a,o;if(i.data==="h")(a=this.incomingDataListener)===null||a===void 0||a.call(this,{type:"Heartbeat"});else try{const c=JSON.parse(i.data);(o=this.incomingDataListener)===null||o===void 0||o.call(this,c)}catch{}}})}disconnect(){var t;const{webSocket:n}=this;if(n){this.clearWebSocket(),(t=this.connectionStateListener)===null||t===void 0||t.call(this,Re.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{n.close()}catch{}}}sendData(t){const{webSocket:n}=this;if(!n){this.pendingData.push(t),this.connect();return}n.send(t)}clearWebSocket(){const{webSocket:t}=this;t&&(this.webSocket=null,t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null)}}const Ya=1e4,Sy=6e4;class Ay{constructor({session:t,linkAPIUrl:n,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=je(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=i=>{if(!i)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",o=>i.JsonRpcUrl&&this.handleChainUpdated(o,i.JsonRpcUrl)]]).forEach((o,c)=>{const u=i[c];u!==void 0&&o(u)})},this.handleDestroyed=i=>{var a;i==="1"&&((a=this.listener)===null||a===void 0||a.resetAndReload())},this.handleAccountUpdated=async i=>{var a;const o=await this.cipher.decrypt(i);(a=this.listener)===null||a===void 0||a.accountUpdated(o)},this.handleMetadataUpdated=async(i,a)=>{var o;const c=await this.cipher.decrypt(a);(o=this.listener)===null||o===void 0||o.metadataUpdated(i,c)},this.handleWalletUsernameUpdated=async i=>{this.handleMetadataUpdated(xy,i)},this.handleAppVersionUpdated=async i=>{this.handleMetadataUpdated(_y,i)},this.handleChainUpdated=async(i,a)=>{var o;const c=await this.cipher.decrypt(i),u=await this.cipher.decrypt(a);(o=this.listener)===null||o===void 0||o.chainUpdated(c,u)},this.session=t,this.cipher=new Cy(t.secret),this.listener=r;const s=new Py(`${n}/rpc`,WebSocket);s.setConnectionStateListener(async i=>{let a=!1;switch(i){case Re.DISCONNECTED:if(!this.destroyed){const o=async()=>{await new Promise(c=>setTimeout(c,5e3)),this.destroyed||s.connect().catch(()=>{o()})};o()}break;case Re.CONNECTED:a=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},Ya),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case Re.CONNECTING:break}this.connected!==a&&(this.connected=a)}),s.setIncomingDataListener(i=>{var a;switch(i.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const o=i.type==="IsLinkedOK"?i.linked:void 0;this.linked=o||i.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(i.metadata);break}case"Event":{this.handleIncomingEvent(i);break}}i.id!==void 0&&((a=this.requestResolutions.get(i.id))===null||a===void 0||a(i))}),this.ws=s,this.http=new Ey(n,t.id,t.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:je(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(t){this._connected=t}get linked(){return this._linked}set linked(t){var n,r;this._linked=t,t&&((n=this.onceLinked)===null||n===void 0||n.call(this)),(r=this.listener)===null||r===void 0||r.linkedUpdated(t)}setOnceLinked(t){return new Promise(n=>{this.linked?t().then(n):this.onceLinked=()=>{t().then(n),this.onceLinked=void 0}})}async handleIncomingEvent(t){var n;if(t.type!=="Event"||t.event!=="Web3Response")return;const r=await this.cipher.decrypt(t.data),s=JSON.parse(r);if(s.type!=="WEB3_RESPONSE")return;const{id:i,response:a}=s;(n=this.listener)===null||n===void 0||n.handleWeb3ResponseMessage(i,a)}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(t=>setTimeout(t,250));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(n=>this.handleIncomingEvent(n))}async publishEvent(t,n,r=!1){const s=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),i={type:"PublishEvent",id:je(this.nextReqId++),sessionId:this.session.id,event:t,data:s,callWebhook:r};return this.setOnceLinked(async()=>{const a=await this.makeRequest(i);if(a.type==="Fail")throw new Error(a.error||"failed to publish event");return a.eventId})}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>Ya*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(t,n={timeout:Sy}){const r=t.id;this.sendData(t);let s;return Promise.race([new Promise((i,a)=>{s=window.setTimeout(()=>{a(new Error(`request ${r} timed out`))},n.timeout)}),new Promise(i=>{this.requestResolutions.set(r,a=>{clearTimeout(s),i(a),this.requestResolutions.delete(r)})})])}async handleConnected(){return(await this.makeRequest({type:"HostSession",id:je(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type==="Fail"?!1:(this.sendData({type:"IsLinked",id:je(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:je(this.nextReqId++),sessionId:this.session.id}),!0)}}class Iy{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,n=uu(t.toString(16));return this.callbacks.get(n)&&this.callbacks.delete(n),t}}function ky(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function zi(e,...t){if(!ky(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ja(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Oy(e,t){zi(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ce=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const Ly=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function My(e){zi(e);let t="";for(let n=0;n<e.length;n++)t+=Ly[e[n]];return t}function By(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function wd(e){return typeof e=="string"&&(e=By(e)),zi(e),e}let jy=class{clone(){return this._cloneInto()}};function Ty(e){const t=r=>e().update(wd(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function $y(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}const Ny=(e,t,n)=>e&t^~e&n,Ry=(e,t,n)=>e&t^e&n^t&n;let Dy=class extends jy{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Xr(this.buffer)}update(t){Ja(this);const{view:n,buffer:r,blockLen:s}=this;t=wd(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Xr(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ja(this),Oy(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;$y(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Xr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)o.setUint32(4*d,l[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%n&&t.buffer.set(r),t}};const Uy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ke=new Uint32Array(64);let Fy=class extends Dy{constructor(){super(64,32,8,!1),this.A=qe[0]|0,this.B=qe[1]|0,this.C=qe[2]|0,this.D=qe[3]|0,this.E=qe[4]|0,this.F=qe[5]|0,this.G=qe[6]|0,this.H=qe[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ke[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ke[d-15],f=Ke[d-2],y=Ce(h,7)^Ce(h,18)^h>>>3,m=Ce(f,17)^Ce(f,19)^f>>>10;Ke[d]=m+Ke[d-7]+y+Ke[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=Ce(o,6)^Ce(o,11)^Ce(o,25),f=l+h+Ny(o,c,u)+Uy[d]+Ke[d]|0,m=(Ce(r,2)^Ce(r,13)^Ce(r,22))+Ry(r,s,i)|0;l=u,u=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,a,o,c,u,l)}roundClean(){Ke.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Gy=Ty(()=>new Fy),Xa="session:id",Qa="session:secret",eo="session:linked";class Ct{constructor(t,n,r,s=!1){this.storage=t,this.id=n,this.secret=r,this.key=My(Gy(`${n}, ${r} WalletLink`)),this._linked=!!s}static create(t){const n=st(16),r=st(32);return new Ct(t,n,r).save()}static load(t){const n=t.getItem(Xa),r=t.getItem(eo),s=t.getItem(Qa);return n&&s?new Ct(t,n,s,r==="1"):null}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this.storage.setItem(Xa,this.id),this.storage.setItem(Qa,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(eo,this._linked?"1":"0")}}function Hy(){try{return window.frameElement!==null}catch{return!1}}function zy(){try{return Hy()&&window.top?window.top.location:window.location}catch{return window.location}}function Vy(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((e=window==null?void 0:window.navigator)===null||e===void 0?void 0:e.userAgent)}function vd(){var e,t;return(t=(e=window==null?void 0:window.matchMedia)===null||e===void 0?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)!==null&&t!==void 0?t:!1}const Wy='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';function xd(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(Wy)),document.documentElement.appendChild(e)}var Lr,H,_d,at,to,Cd,Xs,Vi,Qs,ei,pn={},Ed=[],qy=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Wi=Array.isArray;function Xe(e,t){for(var n in t)e[n]=t[n];return e}function Pd(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function D(e,t,n){var r,s,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?Lr.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Un(e,a,r,s,null)}function Un(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++_d,__i:-1,__u:0};return s==null&&H.vnode!=null&&H.vnode(i),i}function Mr(e){return e.children}function Fn(e,t){this.props=e,this.context=t}function Lt(e,t){if(t==null)return e.__?Lt(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Lt(e):null}function Sd(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Sd(e)}}function no(e){(!e.__d&&(e.__d=!0)&&at.push(e)&&!ir.__r++||to!==H.debounceRendering)&&((to=H.debounceRendering)||Cd)(ir)}function ir(){var e,t,n,r,s,i,a,o;for(at.sort(Xs);e=at.shift();)e.__d&&(t=at.length,r=void 0,i=(s=(n=e).__v).__e,a=[],o=[],n.__P&&((r=Xe({},s)).__v=s.__v+1,H.vnode&&H.vnode(r),qi(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,a,i??Lt(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,kd(a,r,o),r.__e!=i&&Sd(r)),at.length>t&&at.sort(Xs));ir.__r=0}function Ad(e,t,n,r,s,i,a,o,c,u,l){var d,h,f,y,m,x=r&&r.__k||Ed,b=t.length;for(n.__d=c,Ky(n,t,x),c=n.__d,d=0;d<b;d++)(f=n.__k[d])!=null&&(h=f.__i===-1?pn:x[f.__i]||pn,f.__i=d,qi(e,f,h,s,i,a,o,c,u,l),y=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Ki(h.ref,null,f),l.push(f.ref,f.__c||y,f)),m==null&&y!=null&&(m=y),65536&f.__u||h.__k===f.__k?c=Id(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:y&&(c=y.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=m}function Ky(e,t,n){var r,s,i,a,o,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)(s=t[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=r+d,(s=e.__k[r]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Un(null,s,null,null,null):Wi(s)?Un(Mr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Un(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,i=null,(o=s.__i=Zy(s,n,a,l))!==-1&&(l--,(i=n[o])&&(i.__u|=131072)),i==null||i.__v===null?(o==-1&&d--,typeof s.type!="function"&&(s.__u|=65536)):o!==a&&(o==a-1?d--:o==a+1?d++:(o>a?d--:d++,s.__u|=65536))):s=e.__k[r]=null;if(l)for(r=0;r<u;r++)(i=n[r])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Lt(i)),Od(i,i))}function Id(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Id(r[s],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Lt(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Zy(e,t,n,r){var s=e.key,i=e.type,a=n-1,o=n+1,c=t[n];if(c===null||c&&s==c.key&&i===c.type&&!(131072&c.__u))return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;a>=0||o<t.length;){if(a>=0){if((c=t[a])&&!(131072&c.__u)&&s==c.key&&i===c.type)return a;a--}if(o<t.length){if((c=t[o])&&!(131072&c.__u)&&s==c.key&&i===c.type)return o;o++}}return-1}function ro(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||qy.test(t)?n:n+"px"}function Bn(e,t,n,r,s){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ro(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ro(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Vi,e.addEventListener(t,i?ei:Qs,i)):e.removeEventListener(t,i?ei:Qs,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function so(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Vi++;else if(t.t<n.u)return;return n(H.event?H.event(t):t)}}}function qi(e,t,n,r,s,i,a,o,c,u){var l,d,h,f,y,m,x,b,g,_,E,M,C,P,I,L,j=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[o=t.__e=n.__e]),(l=H.__b)&&l(t);e:if(typeof j=="function")try{if(b=t.props,g="prototype"in j&&j.prototype.render,_=(l=j.contextType)&&r[l.__c],E=l?_?_.props.value:l.__:r,n.__c?x=(d=t.__c=n.__c).__=d.__E:(g?t.__c=d=new j(b,E):(t.__c=d=new Fn(b,E),d.constructor=j,d.render=Jy),_&&_.sub(d),d.props=b,d.state||(d.state={}),d.context=E,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),g&&d.__s==null&&(d.__s=d.state),g&&j.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Xe({},d.__s)),Xe(d.__s,j.getDerivedStateFromProps(b,d.__s))),f=d.props,y=d.state,d.__v=t,h)g&&j.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),g&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(g&&j.getDerivedStateFromProps==null&&b!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,E),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,E)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(T){T&&(T.__=t)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,E),g&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,y,m)})}if(d.context=E,d.props=b,d.__P=e,d.__e=!1,C=H.__r,P=0,g){for(d.state=d.__s,d.__d=!1,C&&C(t),l=d.render(d.props,d.state,d.context),I=0;I<d._sb.length;I++)d.__h.push(d._sb[I]);d._sb=[]}else do d.__d=!1,C&&C(t),l=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++P<25);d.state=d.__s,d.getChildContext!=null&&(r=Xe(Xe({},r),d.getChildContext())),g&&!h&&d.getSnapshotBeforeUpdate!=null&&(m=d.getSnapshotBeforeUpdate(f,y)),Ad(e,Wi(L=l!=null&&l.type===Mr&&l.key==null?l.props.children:l)?L:[L],t,n,r,s,i,a,o,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),x&&(d.__E=d.__=null)}catch(T){if(t.__v=null,c||i!=null){for(t.__u|=c?160:32;o&&o.nodeType===8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,t.__e=o}else t.__e=n.__e,t.__k=n.__k;H.__e(T,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Yy(n.__e,t,n,r,s,i,a,c,u);(l=H.diffed)&&l(t)}function kd(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Ki(n[r],n[++r],n[++r]);H.__c&&H.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){H.__e(i,s.__v)}})}function Yy(e,t,n,r,s,i,a,o,c){var u,l,d,h,f,y,m,x=n.props,b=t.props,g=t.type;if(g==="svg"?s="http://www.w3.org/2000/svg":g==="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((f=i[u])&&"setAttribute"in f==!!g&&(g?f.localName===g:f.nodeType===3)){e=f,i[u]=null;break}}if(e==null){if(g===null)return document.createTextNode(b);e=document.createElementNS(s,g,b.is&&b),o&&(H.__m&&H.__m(t,i),o=!1),i=null}if(g===null)x===b||o&&e.data===b||(e.data=b);else{if(i=i&&Lr.call(e.childNodes),x=n.props||pn,!o&&i!=null)for(x={},u=0;u<e.attributes.length;u++)x[(f=e.attributes[u]).name]=f.value;for(u in x)if(f=x[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=f;else if(!(u in b)){if(u=="value"&&"defaultValue"in b||u=="checked"&&"defaultChecked"in b)continue;Bn(e,u,null,f,s)}}for(u in b)f=b[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?l=f:u=="value"?y=f:u=="checked"?m=f:o&&typeof f!="function"||x[u]===f||Bn(e,u,f,x[u],s);if(l)o||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),Ad(e,Wi(h)?h:[h],t,n,r,g==="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&Lt(n,0),o,c),i!=null)for(u=i.length;u--;)Pd(i[u]);o||(u="value",g==="progress"&&y==null?e.removeAttribute("value"):y!==void 0&&(y!==e[u]||g==="progress"&&!y||g==="option"&&y!==x[u])&&Bn(e,u,y,x[u],s),u="checked",m!==void 0&&m!==e[u]&&Bn(e,u,m,x[u],s))}return e}function Ki(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){H.__e(s,n)}}function Od(e,t,n){var r,s;if(H.unmount&&H.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ki(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){H.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Od(r[s],t,n||typeof e.type!="function");n||Pd(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Jy(e,t,n){return this.constructor(e,n)}function ti(e,t,n){var r,s,i,a;H.__&&H.__(e,t),s=(r=!1)?null:t.__k,i=[],a=[],qi(t,e=t.__k=D(Mr,null,[e]),s||pn,pn,t.namespaceURI,s?null:t.firstChild?Lr.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,a),kd(i,e,a)}Lr=Ed.slice,H={__e:function(e,t,n,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(o){e=o}throw e}},_d=0,Fn.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xe({},this.state),typeof e=="function"&&(e=e(Xe({},n),this.props)),e&&Xe(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),no(this))},Fn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),no(this))},Fn.prototype.render=Mr,at=[],Cd=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xs=function(e,t){return e.__v.__b-t.__v.__b},ir.__r=0,Vi=0,Qs=so(!1),ei=so(!0);var ar,q,Qr,io,ni=0,Ld=[],K=H,ao=K.__b,oo=K.__r,co=K.diffed,uo=K.__c,lo=K.unmount,fo=K.__;function Md(e,t){K.__h&&K.__h(q,e,ni||t),ni=0;var n=q.__H||(q.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ho(e){return ni=1,Xy(Bd,e)}function Xy(e,t,n){var r=Md(ar++,2);if(r.t=e,!r.__c&&(r.__=[Bd(void 0,t),function(o){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,o);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=q,!q.u)){var s=function(o,c,u){if(!r.__c.__H)return!0;var l=r.__c.__H.__.filter(function(h){return!!h.__c});if(l.every(function(h){return!h.__N}))return!i||i.call(this,o,c,u);var d=!1;return l.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(d=!0)}}),!(!d&&r.__c.props===o)&&(!i||i.call(this,o,c,u))};q.u=!0;var i=q.shouldComponentUpdate,a=q.componentWillUpdate;q.componentWillUpdate=function(o,c,u){if(this.__e){var l=i;i=void 0,s(o,c,u),i=l}a&&a.call(this,o,c,u)},q.shouldComponentUpdate=s}return r.__N||r.__}function Qy(e,t){var n=Md(ar++,3);!K.__s&&nm(n.__H,t)&&(n.__=e,n.i=t,q.__H.__h.push(n))}function em(){for(var e;e=Ld.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Gn),e.__H.__h.forEach(ri),e.__H.__h=[]}catch(t){e.__H.__h=[],K.__e(t,e.__v)}}K.__b=function(e){q=null,ao&&ao(e)},K.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),fo&&fo(e,t)},K.__r=function(e){oo&&oo(e),ar=0;var t=(q=e.__c).__H;t&&(Qr===q?(t.__h=[],q.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(Gn),t.__h.forEach(ri),t.__h=[],ar=0)),Qr=q},K.diffed=function(e){co&&co(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ld.push(t)!==1&&io===K.requestAnimationFrame||((io=K.requestAnimationFrame)||tm)(em)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Qr=q=null},K.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Gn),n.__h=n.__h.filter(function(r){return!r.__||ri(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],K.__e(r,n.__v)}}),uo&&uo(e,t)},K.unmount=function(e){lo&&lo(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Gn(r)}catch(s){t=s}}),n.__H=void 0,t&&K.__e(t,n.__v))};var po=typeof requestAnimationFrame=="function";function tm(e){var t,n=function(){clearTimeout(r),po&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);po&&(t=requestAnimationFrame(n))}function Gn(e){var t=q,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),q=t}function ri(e){var t=q;e.__c=e.__(),q=t}function nm(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Bd(e,t){return typeof t=="function"?t(e):t}const rm=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}",sm="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",im="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class jd{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=vd()}attach(t){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",t.appendChild(this.root),this.render()}presentItem(t){const n=this.nextItemKey++;return this.items.set(n,t),this.render(),()=>{this.items.delete(n),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&ti(D("div",null,D(Td,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([t,n])=>D(am,Object.assign({},n,{key:t}))))),this.root)}}const Td=e=>D("div",{class:zt("-cbwsdk-snackbar-container")},D("style",null,rm),D("div",{class:"-cbwsdk-snackbar"},e.children)),am=({autoExpand:e,message:t,menuItems:n})=>{const[r,s]=ho(!0),[i,a]=ho(e??!1);Qy(()=>{const c=[window.setTimeout(()=>{s(!1)},1),window.setTimeout(()=>{a(!0)},1e4)];return()=>{c.forEach(window.clearTimeout)}});const o=()=>{a(!i)};return D("div",{class:zt("-cbwsdk-snackbar-instance",r&&"-cbwsdk-snackbar-instance-hidden",i&&"-cbwsdk-snackbar-instance-expanded")},D("div",{class:"-cbwsdk-snackbar-instance-header",onClick:o},D("img",{src:sm,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",D("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),D("div",{class:"-gear-container"},!i&&D("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),D("img",{src:im,class:"-gear-icon",title:"Expand"}))),n&&n.length>0&&D("div",{class:"-cbwsdk-snackbar-instance-menu"},n.map((c,u)=>D("div",{class:zt("-cbwsdk-snackbar-instance-menu-item",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:c.onClick,key:u},D("svg",{width:c.svgWidth,height:c.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D("path",{"fill-rule":c.defaultFillRule,"clip-rule":c.defaultClipRule,d:c.path,fill:"#AAAAAA"})),D("span",{class:zt("-cbwsdk-snackbar-instance-menu-item-info",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},c.info)))))},$d="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class om{constructor(){this.attached=!1,this.snackbar=new jd}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,n=document.createElement("div");n.className="-cbwsdk-css-reset",t.appendChild(n),this.snackbar.attach(n),this.attached=!0,xd()}showConnecting(t){let n;return t.isUnlinkedErrorState?n={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:n={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:$d,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(n)}}const cm=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";class um{constructor(){this.root=null,this.darkMode=vd()}attach(){const t=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",t.appendChild(this.root),xd()}present(t){this.render(t)}clear(){this.render(null)}render(t){this.root&&(ti(null,this.root),t&&ti(D(dm,Object.assign({},t,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const dm=({title:e,buttonText:t,darkMode:n,onButtonClick:r,onDismiss:s})=>{const i=n?"dark":"light";return D(Td,{darkMode:n},D("div",{class:"-cbwsdk-redirect-dialog"},D("style",null,cm),D("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:s}),D("div",{class:zt("-cbwsdk-redirect-dialog-box",i)},D("p",null,e),D("button",{onClick:r},t))))},lm="https://keys.coinbase.com/connect",fm="http://rpc.wallet.coinbase.com",yo="https://www.walletlink.org",hm="https://go.cb-w.com/walletlink";class mo{constructor(){this.attached=!1,this.redirectDialog=new um}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(t){const n=new URL(hm);n.searchParams.append("redirect_url",zy().href),t&&n.searchParams.append("wl_url",t);const r=document.createElement("a");r.target="cbw-opener",r.href=n.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(t){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(t)},99)}showConnecting(t){return()=>{this.redirectDialog.clear()}}}class $e{constructor(t){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=Vy(),this.linkedUpdated=i=>{this.isLinked=i;const a=this.storage.getItem(Js);if(i&&(this._session.linked=i),this.isUnlinkedErrorState=!1,a){const o=a.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";o[0]!==""&&!i&&this._session.linked&&!c&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(i,a)=>{this.storage.setItem(i,a)},this.chainUpdated=(i,a)=>{this.chainCallbackParams.chainId===i&&this.chainCallbackParams.jsonRpcUrl===a||(this.chainCallbackParams={chainId:i,jsonRpcUrl:a},this.chainCallback&&this.chainCallback(a,Number.parseInt(i,10)))},this.accountUpdated=i=>{this.accountsCallback&&this.accountsCallback([i]),$e.accountRequestCallbackIds.size>0&&(Array.from($e.accountRequestCallbackIds.values()).forEach(a=>{this.invokeCallback(a,{method:"requestEthereumAccounts",result:[i]})}),$e.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.metadata=t.metadata,this.accountsCallback=t.accountsCallback,this.chainCallback=t.chainCallback;const{session:n,ui:r,connection:s}=this.subscribe();this._session=n,this.connection=s,this.relayEventManager=new Iy,this.ui=r,this.ui.attach()}subscribe(){const t=Ct.load(this.storage)||Ct.create(this.storage),{linkAPIUrl:n}=this,r=new Ay({session:t,linkAPIUrl:n,listener:this}),s=this.isMobileWeb?new mo:new om;return r.connect(),{session:t,ui:s,connection:r}}resetAndReload(){this.connection.destroy().then(()=>{const t=Ct.load(this.storage);(t==null?void 0:t.id)===this._session.id&&ke.clearAll(),document.location.reload()}).catch(t=>{})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:_e(t.weiValue),data:qt(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?_e(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?_e(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?_e(t.gasPriceInWei):null,gasLimit:t.gasLimit?_e(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:_e(t.weiValue),data:qt(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?_e(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?_e(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?_e(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?_e(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,n){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:qt(t,!0),chainId:n}})}getWalletLinkSession(){return this._session}sendRequest(t){let n=null;const r=st(8),s=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,i),n==null||n()};return new Promise((i,a)=>{n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:s,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,o=>{if(n==null||n(),X(o))return a(new Error(o.errorMessage));i(o)}),this.publishWeb3RequestEvent(r,t)})}publishWeb3RequestEvent(t,n){const r={type:"WEB3_REQUEST",id:t,request:n};this.publishEvent("Web3Request",r,!0).then(s=>{}).catch(s=>{this.handleWeb3ResponseMessage(r.id,{method:n.method,errorMessage:s.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(n.method)}openCoinbaseWalletDeeplink(t){if(this.ui instanceof mo)switch(t){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(t){const n={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",n,!1).then()}publishEvent(t,n,r){return this.connection.publishEvent(t,n,r)}handleWeb3ResponseMessage(t,n){if(n.method==="requestEthereumAccounts"){$e.accountRequestCallbackIds.forEach(r=>this.invokeCallback(r,n)),$e.accountRequestCallbackIds.clear();return}this.invokeCallback(t,n)}handleErrorResponse(t,n,r){var s;const i=(s=r==null?void 0:r.message)!==null&&s!==void 0?s:"Unspecified error message.";this.handleWeb3ResponseMessage(t,{method:n,errorMessage:i})}invokeCallback(t,n){const r=this.relayEventManager.callbacks.get(t);r&&(r(n),this.relayEventManager.callbacks.delete(t))}requestEthereumAccounts(){const{appName:t,appLogoUrl:n}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:t,appLogoUrl:n}},s=st(8);return new Promise((i,a)=>{this.relayEventManager.callbacks.set(s,o=>{if(X(o))return a(new Error(o.errorMessage));i(o)}),$e.accountRequestCallbackIds.add(s),this.publishWeb3RequestEvent(s,r)})}watchAsset(t,n,r,s,i,a){const o={method:"watchAsset",params:{type:t,options:{address:n,symbol:r,decimals:s,image:i},chainId:a}};let c=null;const u=st(8),l=d=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,d),c==null||c()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload}),new Promise((d,h)=>{this.relayEventManager.callbacks.set(u,f=>{if(c==null||c(),X(f))return h(new Error(f.errorMessage));d(f)}),this.publishWeb3RequestEvent(u,o)})}addEthereumChain(t,n,r,s,i,a){const o={method:"addEthereumChain",params:{chainId:t,rpcUrls:n,blockExplorerUrls:s,chainName:i,iconUrls:r,nativeCurrency:a}};let c=null;const u=st(8),l=d=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,d),c==null||c()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload}),new Promise((d,h)=>{this.relayEventManager.callbacks.set(u,f=>{if(c==null||c(),X(f))return h(new Error(f.errorMessage));d(f)}),this.publishWeb3RequestEvent(u,o)})}switchEthereumChain(t,n){const r={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:n})};let s=null;const i=st(8),a=o=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,o),s==null||s()};return s=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:a,onResetConnection:this.resetAndReload}),new Promise((o,c)=>{this.relayEventManager.callbacks.set(i,u=>{if(s==null||s(),X(u)&&u.errorCode)return c(O.provider.custom({code:u.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(X(u))return c(new Error(u.errorMessage));o(u)}),this.publishWeb3RequestEvent(i,r)})}}$e.accountRequestCallbackIds=new Set;var pm=["buffer","Buffer"];const bo="DefaultChainId",go="DefaultJsonRpcUrl";class Nd{constructor(t){this._relay=null,this._addresses=[],this.metadata=t.metadata,this._storage=new ke("walletlink",yo),this.callback=t.callback||null;const n=this._storage.getItem(Js);if(n){const r=n.split(" ");r[0]!==""&&(this._addresses=r.map(s=>We(s)))}this.initializeRelay()}getSession(){const t=this.initializeRelay(),{id:n,secret:r}=t.getWalletLinkSession();return{id:n,secret:r}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(go))!==null&&t!==void 0?t:void 0}set jsonRpcUrl(t){this._storage.setItem(go,t)}updateProviderInfo(t,n){var r;this.jsonRpcUrl=t;const s=this.getChainId();this._storage.setItem(bo,n.toString(10)),Kt(n)!==s&&((r=this.callback)===null||r===void 0||r.call(this,"chainChanged",wt(n)))}async watchAsset(t){const n=Array.isArray(t)?t[0]:t;if(!n.type)throw O.rpc.invalidParams("Type is required");if((n==null?void 0:n.type)!=="ERC20")throw O.rpc.invalidParams(`Asset of type '${n.type}' is not supported`);if(!(n!=null&&n.options))throw O.rpc.invalidParams("Options are required");if(!(n!=null&&n.options.address))throw O.rpc.invalidParams("Address is required");const r=this.getChainId(),{address:s,symbol:i,image:a,decimals:o}=n.options,u=await this.initializeRelay().watchAsset(n.type,s,i,o,a,r==null?void 0:r.toString());return X(u)?!1:!!u.result}async addEthereumChain(t){var n,r;const s=t[0];if(((n=s.rpcUrls)===null||n===void 0?void 0:n.length)===0)throw O.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!s.chainName||s.chainName.trim()==="")throw O.rpc.invalidParams("chainName is a required field");if(!s.nativeCurrency)throw O.rpc.invalidParams("nativeCurrency is a required field");const i=Number.parseInt(s.chainId,16);if(i===this.getChainId())return!1;const a=this.initializeRelay(),{rpcUrls:o=[],blockExplorerUrls:c=[],chainName:u,iconUrls:l=[],nativeCurrency:d}=s,h=await a.addEthereumChain(i.toString(),o,l,c,u,d);if(X(h))return!1;if(((r=h.result)===null||r===void 0?void 0:r.isApproved)===!0)return this.updateProviderInfo(o[0],i),null;throw O.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(t){const n=t[0],r=Number.parseInt(n.chainId,16),i=await this.initializeRelay().switchEthereumChain(r.toString(10),this.selectedAddress||void 0);if(X(i))throw i;const a=i.result;return a.isApproved&&a.rpcUrl.length>0&&this.updateProviderInfo(a.rpcUrl,r),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(t,n){var r;if(!Array.isArray(t))throw new Error("addresses is not an array");const s=t.map(i=>We(i));JSON.stringify(s)!==JSON.stringify(this._addresses)&&(this._addresses=s,(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",s),this._storage.setItem(Js,s.join(" ")))}async request(t){const n=t.params||[];switch(t.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return wt(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(t);case"personal_sign":return this.personalSign(t);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(t);case"wallet_addEthereumChain":return this.addEthereumChain(n);case"wallet_switchEthereumChain":return this.switchEthereumChain(n);case"wallet_watchAsset":return this.watchAsset(n);default:if(!this.jsonRpcUrl)throw O.rpc.internal("No RPC URL set for chain");return Fi(t,this.jsonRpcUrl)}}_ensureKnownAddress(t){const n=We(t);if(!this._addresses.map(s=>We(s)).includes(n))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const n=t.from?We(t.from):this.selectedAddress;if(!n)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(n);const r=t.to?We(t.to):null,s=t.value!=null?Ft(t.value):BigInt(0),i=t.data?Es(t.data):pm.alloc(0),a=t.nonce!=null?Kt(t.nonce):null,o=t.gasPrice!=null?Ft(t.gasPrice):null,c=t.maxFeePerGas!=null?Ft(t.maxFeePerGas):null,u=t.maxPriorityFeePerGas!=null?Ft(t.maxPriorityFeePerGas):null,l=t.gas!=null?Ft(t.gas):null,d=t.chainId?Kt(t.chainId):this.getChainId();return{fromAddress:n,toAddress:r,weiValue:s,data:i,nonce:a,gasPriceInWei:o,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:l,chainId:d}}async ecRecover(t){const{method:n,params:r}=t;if(!Array.isArray(r))throw O.rpc.invalidParams();const i=await this.initializeRelay().sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:Hr(r[0]),signature:Hr(r[1]),addPrefix:n==="personal_ecRecover"}});if(X(i))throw i;return i.result}getChainId(){var t;return Number.parseInt((t=this._storage.getItem(bo))!==null&&t!==void 0?t:"1",10)}async _eth_requestAccounts(){var t,n;if(this._addresses.length>0)return(t=this.callback)===null||t===void 0||t.call(this,"connect",{chainId:wt(this.getChainId())}),this._addresses;const s=await this.initializeRelay().requestEthereumAccounts();if(X(s))throw s;if(!s.result)throw new Error("accounts received is empty");return this._setAddresses(s.result),(n=this.callback)===null||n===void 0||n.call(this,"connect",{chainId:wt(this.getChainId())}),this._addresses}async personalSign({params:t}){if(!Array.isArray(t))throw O.rpc.invalidParams();const n=t[1],r=t[0];this._ensureKnownAddress(n);const i=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:We(n),message:Hr(r),addPrefix:!0,typedDataJson:null}});if(X(i))throw i;return i.result}async _eth_signTransaction(t){const n=this._prepareTransactionParams(t[0]||{}),s=await this.initializeRelay().signEthereumTransaction(n);if(X(s))throw s;return s.result}async _eth_sendRawTransaction(t){const n=Es(t[0]),s=await this.initializeRelay().submitEthereumTransaction(n,this.getChainId());if(X(s))throw s;return s.result}async _eth_sendTransaction(t){const n=this._prepareTransactionParams(t[0]||{}),s=await this.initializeRelay().signAndSubmitEthereumTransaction(n);if(X(s))throw s;return s.result}async signTypedData(t){const{method:n,params:r}=t;if(!Array.isArray(r))throw O.rpc.invalidParams();const s=u=>{const l={eth_signTypedData_v1:Mn.hashForSignTypedDataLegacy,eth_signTypedData_v3:Mn.hashForSignTypedData_v3,eth_signTypedData_v4:Mn.hashForSignTypedData_v4,eth_signTypedData:Mn.hashForSignTypedData_v4};return qt(l[n]({data:Sp(u)}),!0)},i=r[n==="eth_signTypedData_v1"?1:0],a=r[n==="eth_signTypedData_v1"?0:1];this._ensureKnownAddress(i);const c=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:We(i),message:s(a),typedDataJson:JSON.stringify(a,null,2),addPrefix:!1}});if(X(c))throw c;return c.result}initializeRelay(){return this._relay||(this._relay=new $e({linkAPIUrl:yo,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const Rd="SignerType",Dd=new ke("CBWSDK","SignerConfigurator");function ym(){return Dd.getItem(Rd)}function mm(e){Dd.setItem(Rd,e)}async function bm(e){const{communicator:t,metadata:n,handshakeRequest:r,callback:s}=e;wm(t,n,s).catch(()=>{});const i={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},e.preference),{handshakeRequest:r})},{data:a}=await t.postRequestAndWaitForResponse(i);return a}function gm(e){const{signerType:t,metadata:n,communicator:r,callback:s}=e;switch(t){case"scw":return new J1({metadata:n,callback:s,communicator:r});case"walletlink":return new Nd({metadata:n,callback:s})}}async function wm(e,t,n){await e.onMessage(({event:s})=>s==="WalletLinkSessionRequest");const r=new Nd({metadata:t,callback:n});e.postMessage({event:"WalletLinkUpdate",data:{session:r.getSession()}}),await r.handshake(),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}const vm=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,xm=()=>{let e;return{getCrossOriginOpenerPolicy:()=>e===void 0?"undefined":e,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){e="non-browser-env";return}try{const t=`${window.location.origin}${window.location.pathname}`,n=await fetch(t,{method:"HEAD"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=n.headers.get("Cross-Origin-Opener-Policy");e=r??"null",e==="same-origin"&&console.error(vm)}catch(t){console.error("Error checking Cross-Origin-Opener-Policy:",t.message),e="error"}}}},{checkCrossOriginOpenerPolicy:_m,getCrossOriginOpenerPolicy:Cm}=xm(),wo=420,vo=540,Em={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:$d,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},Pm="Popup was blocked. Try again.";let jn=null;function Sm(e){const t=(window.innerWidth-wo)/2+window.screenX,n=(window.innerHeight-vo)/2+window.screenY;Im(e);function r(){const i=`wallet_${crypto.randomUUID()}`,a=window.open(e,i,`width=${wo}, height=${vo}, left=${t}, top=${n}`);return a==null||a.focus(),a||null}let s=r();if(!s){const i=km();return new Promise((a,o)=>{i.presentItem({autoExpand:!0,message:Pm,menuItems:[Object.assign(Object.assign({},Em),{onClick:()=>{s=r(),s?a(s):o(O.rpc.internal("Popup window was blocked")),i.clear()}})]})})}return Promise.resolve(s)}function Am(e){e&&!e.closed&&e.close()}function Im(e){const t={sdkName:Ou,sdkVersion:xn,origin:window.location.origin,coop:Cm()};for(const[n,r]of Object.entries(t))e.searchParams.append(n,r.toString())}function km(){if(!jn){const e=document.createElement("div");e.className="-cbwsdk-css-reset",document.body.appendChild(e),jn=new jd,jn.attach(e)}return jn}class Om{constructor({url:t=lm,metadata:n,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async s=>{(await this.waitForPopupLoaded()).postMessage(s,this.url.origin)},this.postRequestAndWaitForResponse=async s=>{const i=this.onMessage(({requestId:a})=>a===s.id);return this.postMessage(s),await i},this.onMessage=async s=>new Promise((i,a)=>{const o=c=>{if(c.origin!==this.url.origin)return;const u=c.data;s(u)&&(i(u),window.removeEventListener("message",o),this.listeners.delete(o))};window.addEventListener("message",o),this.listeners.set(o,{reject:a})}),this.disconnect=()=>{Am(this.popup),this.popup=null,this.listeners.forEach(({reject:s},i)=>{s(O.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",i)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=await Sm(this.url),this.onMessage(({event:s})=>s==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:s})=>s==="PopupLoaded").then(s=>{this.postMessage({requestId:s.id,data:{version:xn,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw O.rpc.internal();return this.popup})),this.url=new URL(t),this.metadata=n,this.preference=r}}function Lm(e){const t=_p(Mm(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",xn),n.searchParams.set("code",t.code.toString()),n.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:n.href})}function Mm(e){var t;if(typeof e=="string")return{message:e,code:W.rpc.internal};if(X(e)){const n=e.errorMessage,r=(t=e.errorCode)!==null&&t!==void 0?t:n.match(/(denied|rejected)/i)?W.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:n,code:r,data:{method:e.method}})}return e}class Bm extends qd{}var jm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Tm extends Bm{constructor(t){var{metadata:n}=t,r=t.preference,{keysUrl:s}=r,i=jm(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=n,this.preference=i,this.communicator=new Om({url:s,metadata:n,preference:i});const a=ym();a&&(this.signer=this.initSigner(a))}async request(t){try{if(Y1(t),!this.signer)switch(t.method){case"eth_requestAccounts":{const n=await this.requestSignerSelection(t),r=this.initSigner(n);await r.handshake(t),this.signer=r,mm(n);break}case"wallet_connect":{const n=this.initSigner("scw");await n.handshake({method:"handshake"});const r=await n.request(t);return this.signer=n,r}case"wallet_sendCalls":{const n=this.initSigner("scw");await n.handshake({method:"handshake"});const r=await n.request(t);return await n.cleanup(),r}case"wallet_getCallsStatus":return Fi(t,fm);case"net_version":return 1;case"eth_chainId":return wt(1);default:throw O.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(t)}catch(n){const{code:r}=n;return r===W.provider.unauthorized&&this.disconnect(),Promise.reject(Lm(n))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var t;await((t=this.signer)===null||t===void 0?void 0:t.cleanup()),this.signer=null,ke.clearAll(),this.emit("disconnect",O.provider.disconnected("User initiated disconnection"))}requestSignerSelection(t){return bm({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:t,callback:this.emit.bind(this)})}initSigner(t){return gm({signerType:t,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}function $m(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw new Error(`Invalid options: ${e.options}`);if(e.attribution&&e.attribution.auto!==void 0&&e.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}function xo(e){if(typeof e!="function")throw new Error("getSigner is not a function")}function Nm(e){var t;const n={metadata:e.metadata,preference:e.preference};return(t=Z1(n))!==null&&t!==void 0?t:new Tm(n)}const Rm={options:"all"};function Dm(e){var t;new ke("CBWSDK").setItem("VERSION",xn),_m();const r={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(Rm,(t=e.preference)!==null&&t!==void 0?t:{})};$m(r.preference),e.subaccount&&(xo(e.subaccount.getSigner),ae.setState({getSigner:e.subaccount.getSigner}));let s=null;const i={getProvider(){return s||(s=Nm(r)),s.sdk=i,s},subaccount:{async create(a){var o;const c=ae.getState();if(!c.getSigner)throw new Error("no signer found");if(c.account)throw new Error("subaccount already exists");return await((o=i.getProvider())===null||o===void 0?void 0:o.request({method:"wallet_addSubAccount",params:[{version:"1",account:a}]}))},async get(){var a,o,c;const u=ae.getState();return u.account?u.account:(c=(o=(await((a=i.getProvider())===null||a===void 0?void 0:a.request({method:"wallet_connect",params:[{version:1,capabilities:{getAppAccounts:!0}}]}))).accounts[0].capabilities)===null||o===void 0?void 0:o.getSubAccounts)===null||c===void 0?void 0:c[0]},async addOwner({address:a,publicKey:o,chainId:c}){var u;const l=ae.getState();if(!l.getSigner)throw new Error("no signer found");if(!l.account)throw new Error("subaccount does not exist");const d=[];if(o){const[h,f]=jt([{type:"bytes32"},{type:"bytes32"}],o);d.push({to:l.account.address,data:se({abi:Je,functionName:"addOwnerPublicKey",args:[h,f]}),value:fe(0)})}return a&&d.push({to:l.account.address,data:se({abi:Je,functionName:"addOwnerAddress",args:[a]}),value:fe(0)}),await((u=i.getProvider())===null||u===void 0?void 0:u.request({method:"wallet_sendCalls",params:[{calls:d,chainId:fe(c),from:l.universalAccount,version:1}]}))},setSigner(a){xo(a),ae.setState({getSigner:a})}}};return i}function Um(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ud(e,...t){if(!Um(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function _o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fm(e,t){Ud(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function es(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ee(e,t){return e<<32-t|e>>>t}function Gm(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Fd(e){return typeof e=="string"&&(e=Gm(e)),Ud(e),e}class Hm{clone(){return this._cloneInto()}}function zm(e){const t=r=>e().update(Fd(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Vm(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}function Wm(e,t,n){return e&t^~e&n}function qm(e,t,n){return e&t^e&n^t&n}class Km extends Hm{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=es(this.buffer)}update(t){_o(this);const{view:n,buffer:r,blockLen:s}=this;t=Fd(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=es(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){_o(this),Fm(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;Vm(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=es(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)o.setUint32(4*d,l[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%n&&t.buffer.set(r),t}}const Zm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ye=new Uint32Array(64);class Ym extends Km{constructor(){super(64,32,8,!1),this.A=Ze[0]|0,this.B=Ze[1]|0,this.C=Ze[2]|0,this.D=Ze[3]|0,this.E=Ze[4]|0,this.F=Ze[5]|0,this.G=Ze[6]|0,this.H=Ze[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ye[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ye[d-15],f=Ye[d-2],y=Ee(h,7)^Ee(h,18)^h>>>3,m=Ee(f,17)^Ee(f,19)^f>>>10;Ye[d]=m+Ye[d-7]+y+Ye[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=Ee(o,6)^Ee(o,11)^Ee(o,25),f=l+h+Wm(o,c,u)+Zm[d]+Ye[d]|0,m=(Ee(r,2)^Ee(r,13)^Ee(r,22))+qm(r,s,i)|0;l=u,u=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,a,o,c,u,l)}roundClean(){Ye.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Jm=zm(()=>new Ym);function Gd(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Jm(Eu(e));return n==="Bytes"?r:kt(r)}function Hd(e,t={}){const{compressed:n}=t,{prefix:r,x:s,y:i}=e;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new Co({prefix:r,cause:new nb});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new Co({prefix:r,cause:new tb});return}throw new eb({publicKey:e})}function Xm(e){const t=(()=>{if(w1(e))return zd(e);if(E1(e))return Qm(e);const{prefix:n,x:r,y:s}=e;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return Hd(t),t}function Qm(e){return zd(kt(e))}function zd(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new rb({publicKey:e});if(e.length===130){const r=BigInt(le(e,0,32)),s=BigInt(le(e,32,64));return{prefix:4,x:r,y:s}}if(e.length===132){const r=Number(le(e,0,1)),s=BigInt(le(e,1,33)),i=BigInt(le(e,33,65));return{prefix:r,x:s,y:i}}const t=Number(le(e,0,1)),n=BigInt(le(e,1,33));return{prefix:t,x:n}}function Zi(e,t={}){Hd(e);const{prefix:n,x:r,y:s}=e,{includePrefix:i=!0}=t;return Ir(i?et(n,{size:1}):"0x",et(r,{size:32}),typeof s=="bigint"?et(s,{size:32}):"0x")}class eb extends z{constructor({publicKey:t}){super(`Value \`${Ar(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class Co extends z{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class tb extends z{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class nb extends z{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class rb extends z{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${tt(vu(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const sb=new TextDecoder,Tn=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))});function ib(e,t={}){const{pad:n=!0,url:r=!1}=t,s=new Uint8Array(Math.ceil(e.length/3)*4);for(let c=0,u=0;u<e.length;c+=4,u+=3){const l=(e[u]<<16)+(e[u+1]<<8)+(e[u+2]|0);s[c]=Tn[l>>18],s[c+1]=Tn[l>>12&63],s[c+2]=Tn[l>>6&63],s[c+3]=Tn[l&63]}const i=e.length%3,a=Math.floor(e.length/3)*4+(i&&i+1);let o=sb.decode(new Uint8Array(s.buffer,0,a));return n&&i===1&&(o+="=="),n&&i===2&&(o+="="),r&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function ab(e,t={}){return ib(Su(e),t)}Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function ob(e={}){const{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,s=Gd(xu(n)),i=et(t,{size:1}),a=et(r,{size:4});return Ir(s,i,a)}function cb(e){const{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:s=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:ab(t,{url:!0,pad:!1}),origin:s,crossOrigin:n,...r})}function ub(e){const{challenge:t,crossOrigin:n,extraClientData:r,flag:s,origin:i,rpId:a,signCount:o,userVerification:c="required"}=e,u=ob({flag:s,rpId:a,signCount:o}),l=cb({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),d=Gd(xu(l)),h=l.indexOf('"challenge"'),f=l.indexOf('"type"'),y={authenticatorData:u,clientDataJSON:l,challengeIndex:h,typeIndex:f,userVerificationRequired:c==="required"},m=Ir(u,d);return{metadata:y,payload:m}}async function db(e={}){const{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),s=Xm(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:s}}async function lb(e){const{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,Eu(t)),s=Pu(new Uint8Array(r)),i=Ua(Da(s,0,32));let a=Ua(Da(s,32,64));return a>ea.CURVE.n/2n&&(a=ea.CURVE.n-a),{r:i,s:a}}function Br(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Vd(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Br(n);return(s,i)=>r.then(a=>i(a.transaction(t,s).objectStore(t)))}let ts;function Yi(){return ts||(ts=Vd("keyval-store","keyval")),ts}function fb(e,t=Yi()){return t("readonly",n=>Br(n.get(e)))}function hb(e,t,n=Yi()){return n("readwrite",r=>(r.put(t,e),Br(r.transaction)))}function pb(e,t=Yi()){return t("readwrite",n=>(n.delete(e),Br(n.transaction)))}function yb(e,t){const n=typeof indexedDB<"u"?Vd(e,t):void 0;return{getItem:async r=>{const s=await fb(r,n);return s||null},removeItem:async r=>pb(r,n),setItem:async(r,s)=>hb(r,s,n)}}const mb="cbwsdk",bb="keys",Ji="activeId",Mt=yb(mb,bb);async function gb(){const e=await db({extractable:!1}),t=le(Zi(e.publicKey),1);return await Mt.setItem(t,e),await Mt.setItem(Ji,t),e}async function wb(){const e=await Mt.getItem(Ji);if(!e)return null;const t=await Mt.getItem(e);return t||null}async function vb(){const e=await wb();if(!e){const t=await gb(),n=le(Zi(t.publicKey),1);return await Mt.setItem(n,t),await Mt.setItem(Ji,n),t}return e}async function xb(){const e=await vb(),t=le(Zi(e.publicKey),1),n=async r=>{const{payload:s,metadata:i}=ub({challenge:r,origin:"https://keys.coinbase.com",userVerification:"preferred"}),a=await lb({payload:s,privateKey:e.privateKey});return{signature:I1(a),raw:{},webauthn:i}};return{id:t,publicKey:t,async sign({hash:r}){return n(r)},async signMessage({message:r}){return n(Er(r))},async signTypedData(r){return n(Cr(r))},type:"webAuthn"}}async function _b(){return{account:await xb()}}function Cb({universalAccount:e,subAccount:t,universalAccountSigning:n,subAccountSigning:r}){return p.jsxs("div",{className:"my-12 flex flex-col items-center",children:[p.jsx("div",{className:"relative w-full max-w-3xl",children:p.jsxs("svg",{viewBox:"0 0 800 550",className:"w-full",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"universalGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#1E40AF"}),p.jsx("stop",{offset:"100%",stopColor:"#3B82F6"})]}),p.jsxs("linearGradient",{id:"subAccountGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#0F766E"}),p.jsx("stop",{offset:"100%",stopColor:"#2DD4BF"})]}),p.jsxs("linearGradient",{id:"localSigningGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#0369A1"}),p.jsx("stop",{offset:"100%",stopColor:"#38BDF8"})]}),p.jsxs("linearGradient",{id:"coinbaseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#1E3A8A"}),p.jsx("stop",{offset:"100%",stopColor:"#2563EB"})]}),p.jsxs("linearGradient",{id:"appSignerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#6B21A8"}),p.jsx("stop",{offset:"100%",stopColor:"#A855F7"})]}),p.jsxs("filter",{id:"innerShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[p.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3",result:"blur"}),p.jsx("feOffset",{in:"blur",dx:"0",dy:"3",result:"offsetBlur"}),p.jsx("feComposite",{in:"SourceGraphic",in2:"offsetBlur",operator:"over"})]}),p.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[p.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),p.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),p.jsx("rect",{x:"70",y:"80",width:"260",height:"200",rx:"15",fill:"url(#coinbaseGradient)",filter:"url(#glow)"}),p.jsx("text",{x:"200",y:"115",fontSize:"18",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Coinbase Wallet"}),p.jsx("text",{x:"200",y:"140",fontSize:"13",fill:"white",textAnchor:"middle",opacity:"0.9",children:"keys.coinbase.com"}),p.jsx("rect",{x:"100",y:"155",width:"200",height:"90",rx:"10",fill:"url(#universalGradient)",filter:"url(#innerShadow)",opacity:"0.9"}),p.jsx("text",{x:"200",y:"185",fontSize:"16",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Universal Account"}),p.jsx("foreignObject",{x:"120",y:"195",width:"160",height:"40",children:p.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-white",children:e})}),p.jsx("rect",{x:"470",y:"80",width:"260",height:"200",rx:"15",fill:"url(#appSignerGradient)",filter:"url(#glow)"}),p.jsx("text",{x:"600",y:"115",fontSize:"18",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Your App"}),p.jsx("text",{x:"600",y:"140",fontSize:"13",fill:"white",textAnchor:"middle",opacity:"0.9",children:"Contains Sub Account Signer"}),p.jsx("rect",{x:"500",y:"155",width:"200",height:"90",rx:"10",fill:"url(#subAccountGradient)",filter:"url(#innerShadow)",opacity:"0.9"}),p.jsx("text",{x:"600",y:"185",fontSize:"16",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Sub Account"}),p.jsx("foreignObject",{x:"520",y:"195",width:"160",height:"40",children:p.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-white",children:t})}),p.jsx("rect",{x:"500",y:"350",width:"200",height:"90",rx:"12",fill:"url(#localSigningGradient)",filter:"url(#glow)"}),p.jsx("text",{x:"600",y:"380",fontSize:"16",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Local Signing"}),p.jsx("text",{x:"600",y:"405",fontSize:"13",fill:"white",textAnchor:"middle",opacity:"0.9",children:"Sign with Sub Account"}),p.jsx("foreignObject",{x:"560",y:"420",width:"80",height:"35",children:p.jsx("div",{className:"flex h-full w-full items-center justify-center",children:p.jsx("button",{onClick:r,type:"button",className:"rounded-md bg-white/90 px-4 py-1.5 text-xs font-medium text-blue-600 shadow-sm transition-colors hover:bg-blue-50",children:"Sign"})})}),p.jsx("rect",{x:"100",y:"350",width:"200",height:"90",rx:"12",fill:"url(#universalGradient)",filter:"url(#glow)"}),p.jsx("text",{x:"200",y:"380",fontSize:"16",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"0.5",children:"Universal Account Signing"}),p.jsx("text",{x:"200",y:"405",fontSize:"13",fill:"white",textAnchor:"middle",opacity:"0.9",children:"Sign with Universal Account"}),p.jsx("foreignObject",{x:"160",y:"420",width:"80",height:"35",children:p.jsx("div",{className:"flex h-full w-full items-center justify-center",children:p.jsx("button",{type:"button",onClick:n,className:"rounded-md bg-white/90 px-4 py-1.5 text-xs font-medium text-blue-600 shadow-sm transition-colors hover:bg-blue-50",children:"Sign"})})}),p.jsx("path",{d:"M300 200 L500 200",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2.5"}),p.jsx("polygon",{points:"490,195 500,200 490,205",fill:"rgba(255,255,255,0.7)"}),p.jsx("path",{d:"M200 245 L200 350",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2.5"}),p.jsx("polygon",{points:"195,340 200,350 205,340",fill:"rgba(255,255,255,0.7)"}),p.jsx("rect",{x:"360",y:"175",width:"80",height:"25",rx:"12",fill:"rgba(255,255,255,0.15)"}),p.jsx("text",{x:"400",y:"192",fontSize:"13",fill:"white",textAnchor:"middle",fontWeight:"500",children:"Creates"}),p.jsx("path",{d:"M600 245 L600 350",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2.5"}),p.jsx("polygon",{points:"595,340 600,350 605,340",fill:"rgba(255,255,255,0.7)"})]})}),p.jsxs("div",{className:"mt-8 max-w-lg rounded-xl border border-slate-700/30 bg-gradient-to-r from-slate-800/50 to-slate-900/50 p-6 text-center text-sm text-slate-300 shadow-sm",children:[p.jsx("h4",{className:"mb-3 text-base font-medium text-white",children:"Your Universal Smart Wallet Ecosystem"}),p.jsx("p",{className:"mb-3",children:"Your universal Smart Wallet creates (or imports) and owns this app-specific Sub Account with the following capabilities:"}),p.jsxs("ul",{className:"mt-4 list-none space-y-2 text-left",children:[p.jsxs("li",{className:"flex items-center",children:[p.jsx("span",{className:"mr-2 inline-block h-4 w-4 rounded-full bg-sky-500 opacity-80"}),p.jsx("span",{children:"Manage its own assets and sign transactions independently"})]}),p.jsxs("li",{className:"flex items-center",children:[p.jsx("span",{className:"mr-2 inline-block h-4 w-4 rounded-full bg-teal-400 opacity-80"}),p.jsx("span",{children:"Spend assets from universal account using user-approved Spend Permission"})]}),p.jsxs("li",{className:"flex items-center",children:[p.jsx("span",{className:"mr-2 inline-block h-4 w-4 rounded-full bg-blue-400 opacity-80"}),p.jsx("span",{children:"Be controlled by both your universal wallet and authorized app logic"})]})]})]})]})}const Eb=84532;function Pb(){const[e,t]=He.useState(null),[n,r]=He.useState(null),[s,i]=He.useState(null),[a,o]=He.useState(null);He.useEffect(()=>{const d=Dm({appName:"Smart Wallet Doc",appChainIds:[Eb],preference:{keysUrl:"https://keys-dev.coinbase.com/connect",options:"smartWalletOnly"}}).getProvider();t(d),(async()=>{const f=await _b();r(f)})()},[]);const c=He.useCallback(async()=>{if(!e||!(n!=null&&n.account))return;const d=await e.request({method:"wallet_connect",params:[{capabilities:{addSubAccount:{account:{type:"create",keys:[{type:"webauthn-p256",key:n.account.publicKey}]}}}}]});o(d.accounts[0].capabilities.addSubAccount.address),i(d.accounts[0].address)},[e,n==null?void 0:n.account]),u=He.useCallback(async()=>{if(!e||!(n!=null&&n.account))return;const d=await e.request({method:"personal_sign",params:["Hello, world!",s]});alert(`Sign was successful: ${d}`)},[e,n==null?void 0:n.account,s]),l=He.useCallback(async()=>{if(!e||!(n!=null&&n.account))return;const d=await e.request({method:"personal_sign",params:["Hello, world!",a]});alert(`Sign was successful: ${d}`)},[e,n==null?void 0:n.account,a]);return a?s&&a&&p.jsx(Cb,{universalAccount:p.jsx(Qi,{address:s,hasCopyAddressOnClick:!1}),subAccount:p.jsx(Qi,{address:a,hasCopyAddressOnClick:!1}),universalAccountSigning:u,subAccountSigning:l}):p.jsx(al,{className:"border-none bg-sky-600",onClick:c,disabled:!(n&&e),children:"Create Sub Account"})}const Sb={title:"Sub Accounts",description:"undefined"};function Eo(e){const t={a:"a",aside:"aside",div:"div",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...Ao(),...e.components};return p.jsxs(p.Fragment,{children:[p.jsx(t.header,{children:p.jsxs(t.h1,{id:"sub-accounts",children:["Sub Accounts",p.jsx(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#sub-accounts",children:p.jsx(t.div,{"data-autolink-icon":!0})})]})}),`
`,p.jsx(t.p,{children:"Sub Accounts are hierarchical, app-specific accounts that extend from a user's primary Smart Wallet. Each Sub Account operates as a distinct account that can:"}),`
`,p.jsxs(t.ul,{children:[`
`,p.jsx(t.li,{children:"Execute transactions and sign messages"}),`
`,p.jsx(t.li,{children:"Maintain separate asset management"}),`
`,p.jsx(t.li,{children:"Be fully controlled by both the universal Smart Wallet and authorized application logic"}),`
`]}),`
`,p.jsxs(t.h2,{id:"give-it-a-try",children:["Give it a try!",p.jsx(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#give-it-a-try",children:p.jsx(t.div,{"data-autolink-icon":!0})})]}),`
`,p.jsx(Pb,{}),`
`,p.jsxs(t.h2,{id:"technical-details",children:["Technical Details",p.jsx(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#technical-details",children:p.jsx(t.div,{"data-autolink-icon":!0})})]}),`
`,p.jsxs(t.ul,{children:[`
`,p.jsx(t.li,{children:"Smart Wallet Ownership: The user's Smart Wallet acts as an owner of the Sub Account, allowing it to manage assets on the Sub Account and make calls from it."}),`
`,p.jsx(t.li,{children:"App-Signer Agnostic: Sub Accounts are designed to be agnostic to whatever signing software an app wants to use: whether in-browser CryptoKey or server signers from teams like Privy or Turnkey."}),`
`,p.jsx(t.li,{children:"When an app requests a Sub Account creation and the user approves, all future signing and transaction requests will use the Sub Account."}),`
`]}),`
`,p.jsxs(t.p,{children:["Refer to the ",p.jsx(t.a,{href:"/identity/smart-wallet/guides/sub-accounts",children:"Implementation Guide"})," or the ",p.jsx(t.a,{href:"/identity/smart-wallet/technical-reference/sub-account-reference",children:"Technical Reference"})," for more details on how to create and manage Sub Accounts."]}),`
`,p.jsxs(t.aside,{"data-callout":"tip",children:[p.jsx(t.strong,{"data-callout-title":!0,children:"Development"}),p.jsx(t.p,{children:"Sub Accounts are currently only available in the Coinbase Smart Wallet development environment."}),p.jsxs(t.p,{children:["If you would like to use Sub Accounts with Coinbase Smart Wallet in our production environment, please ",p.jsx(t.a,{href:"https://discord.com/invite/buildonbase",children:"reach out"})," to the Base team."]})]})]})}function Ab(e={}){const{wrapper:t}={...Ao(),...e.components};return t?p.jsx(t,{...e,children:p.jsx(Eo,{...e})}):Eo(e)}const Jb=Object.freeze(Object.defineProperty({__proto__:null,default:Ab,frontmatter:Sb},Symbol.toStringTag,{value:"Module"}));export{w as B,Wt as H,re as a,be as b,wr as c,sc as d,me as e,Jb as f,hi as g,xi as i,J as s};
