import{u as N}from"./useTheme-DG4jZ5Gt.js";import{h as A,m as H,j as E,k as M,n as I,D as V,u as O,f as v,N as P,A as Z}from"./Name-BQXefeTI.js";import{Z as C,c as L,a0 as B,X as T,Y as h,_ as b,a1 as k,$ as R}from"./OnchainKitProvider-BMiQl1rP.js";import{j as n,r as w}from"./index-Dlxm52NL.js";import{A as $}from"./Address-Db7MZz8P.js";import{u as _,I as D}from"./attestations-CryG6VVa.js";import{g as U}from"./getSwapErrorCode-Rcq4QZsj.js";import{u as F}from"./useGetETHBalance-Be2rjpzo.js";import{_ as K}from"./waitForTransactionReceipt-DqmUmnvq.js";import{u as z}from"./useOnchainKit-BS9QuBF4.js";import{u as G}from"./useAccount-BLyN9GYK.js";function Y({address:e,className:r}){const t=_(),s=t.address;if(!s&&!e)return console.error("Address: an Ethereum address must be provided to the Identity or EthBalance component."),null;const o=F(e??s),d=o.convertedBalance,c=o.error;return!d||c?null:n.jsxs("span",{"data-testid":"ockEthBalance",className:C(B.label2,L.foregroundMuted,r),children:[U(d,4)," ETH"]})}function Q(e,r){return q(e)||J(e,r)||X(e,r)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(e,r){if(e){if(typeof e=="string")return y(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,r):void 0}}function y(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=Array(r);t<r;t++)s[t]=e[t];return s}function J(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s,o,d,c,a=[],i=!0,l=!1;try{if(d=(t=t.call(e)).next,r!==0)for(;!(i=(s=d.call(t)).done)&&(a.push(s.value),a.length!==r);i=!0);}catch(u){l=!0,o=u}finally{try{if(!i&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw o}}return a}}function q(e){if(Array.isArray(e))return e}const ee=async({ensName:e,chain:r=H})=>{const t=A({chainId:r.id});if(!(E({chainId:r.id})||t))return Promise.reject("ChainId not supported, socials resolution is only supported on Ethereum and Base.");const d=M(r),c=I(e),a=async f=>{try{return await d.getEnsText({name:c,key:f,universalResolverAddress:T[r.id]})||null}catch(g){return console.warn(`Failed to fetch ENS text record for ${f}:`,g),null}},i=await Promise.all([a("com.twitter"),a("com.github"),a("xyz.farcaster"),a("url")]),l=Q(i,4),u=l[0],m=l[1],p=l[2],x=l[3];return{twitter:u,github:m,farcaster:p,website:x}};function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,s)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(s){te(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function te(e,r,t){return(r=re(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function re(e){var r=se(e,"string");return typeof r=="symbol"?r:r+""}function se(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var s=t.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}const ne=({ensName:e,chain:r=H},t)=>{const s=["useSocials",e,r.id];return K(S(S({queryKey:s,queryFn:()=>ee({ensName:e,chain:r})},V),{},{gcTime:t==null?void 0:t.cacheTime},t))},ae=n.jsx("svg",{"data-testid":"ock-githubSvg",role:"img","aria-label":"ock-githubSvg",width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"h-full w-full",children:n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z",className:h.foreground})}),oe=n.jsxs("svg",{"data-testid":"ock-twitterSvg",role:"img","aria-label":"ock-twitterSvg",width:"100%",height:"100%",viewBox:"-1 -1 14 14",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"h-full w-full",children:[n.jsx("g",{clipPath:"url(#clip0_6998_47)",children:n.jsx("path",{d:"M7.14163 5.07857L11.6089 0H10.5503L6.67137 4.40965L3.57328 0H0L4.68492 6.66817L0 11.9938H1.05866L5.15491 7.33709L8.42672 11.9938H12L7.14137 5.07857H7.14163ZM5.69165 6.72692L5.21697 6.06292L1.44011 0.779407H3.06615L6.11412 5.04337L6.5888 5.70737L10.5508 11.2499H8.92476L5.69165 6.72718V6.72692Z",className:h.foreground})}),n.jsx("defs",{children:n.jsx("clipPath",{id:"clip0_6998_47",children:n.jsx("rect",{width:"12",height:"12",fill:"white"})})})]}),ie=n.jsxs("svg",{"data-testid":"ock-warpcastSvg",role:"img","aria-label":"ock-warpcastSvg",width:"100%",height:"100%",viewBox:"0 0 13 12",xmlns:"http://www.w3.org/2000/svg",className:`h-full w-full ${h.foreground}`,children:[n.jsx("path",{d:"M2.23071 0H10.6153V12H9.38451V6.50322H9.37245C9.23641 4.98404 7.96783 3.79353 6.42299 3.79353C4.87815 3.79353 3.60957 4.98404 3.47354 6.50322H3.46147V12H2.23071V0Z",className:h.foreground}),n.jsx("path",{d:"M0 1.70312L0.499999 3.40635H0.923066V10.2967C0.71065 10.2967 0.538456 10.47 0.538456 10.6838V11.1483H0.461541C0.249125 11.1483 0.0769147 11.3216 0.0769147 11.5354V11.9999H4.38458V11.5354C4.38458 11.3216 4.21239 11.1483 3.99998 11.1483H3.92306V10.6838C3.92306 10.47 3.75085 10.2967 3.53843 10.2967H3.07691V1.70312H0Z",className:h.foreground}),n.jsx("path",{d:"M9.46163 10.2967C9.24921 10.2967 9.077 10.47 9.077 10.6838V11.1483H9.00009C8.78767 11.1483 8.61548 11.3216 8.61548 11.5354V11.9999H12.9231V11.5354C12.9231 11.3216 12.7509 11.1483 12.5385 11.1483H12.4616V10.6838C12.4616 10.47 12.2894 10.2967 12.077 10.2967V3.40635H12.5001L13.0001 1.70312H9.92315V10.2967H9.46163Z",className:h.foreground})]}),ce=n.jsx("svg",{"data-testid":"ock-websiteSvg",role:"img","aria-label":"ock-websiteSvg",width:"100%",height:"100%",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:`h-full w-full ${h.foreground}`,children:n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 0C9.31356 0 12 2.68644 12 6C12 9.31356 9.31356 12 6 12C2.69689 12 0.0245556 9.35356 0 6C0.0244789 2.64689 2.69689 0 6 0ZM9.34844 9.97867C9.15053 9.88544 8.9422 9.80002 8.72553 9.72346C8.56251 10.0854 8.36772 10.4313 8.13856 10.7412C8.57762 10.5427 8.98439 10.2854 9.34844 9.97867ZM7.95156 9.49742C7.46353 9.38284 6.9427 9.30992 6.4 9.28597V11.1381C7.04791 10.9365 7.58233 10.2766 7.95156 9.49742ZM5.6 9.28597C5.05729 9.30993 4.53646 9.38284 4.04844 9.49742C4.41771 10.2766 4.95209 10.936 5.6 11.1375V9.28597ZM3.27456 9.72347C3.05737 9.80003 2.84956 9.88544 2.65164 9.97868C3.01571 10.2854 3.42248 10.5427 3.86153 10.7412C3.63237 10.4313 3.43758 10.0854 3.27456 9.72347ZM2.05267 9.38492C2.34486 9.2318 2.65736 9.09534 2.98809 8.97763C2.73913 8.21044 2.58288 7.33386 2.54799 6.40008H0.815211C0.901669 7.53597 1.35323 8.5703 2.05277 9.38497L2.05267 9.38492ZM3.75156 8.74742C4.33229 8.60263 4.95367 8.512 5.6 8.48545V6.4H3.34844C3.3823 7.25677 3.52553 8.05522 3.75157 8.74733L3.75156 8.74742ZM6.4 8.48545C7.04636 8.51201 7.66767 8.60263 8.24844 8.74794C8.47449 8.05523 8.61771 7.25728 8.65157 6.40061L6.40001 6.40009L6.4 8.48545ZM9.012 8.97763C9.34273 9.09534 9.65576 9.2318 9.94742 9.38492C10.6469 8.56982 11.0984 7.53603 11.185 6.40003H9.4522C9.4173 7.33389 9.26106 8.21048 9.0121 8.97759L9.012 8.97763ZM9.94742 2.61508C9.65523 2.7682 9.34273 2.90466 9.012 3.02237C9.26096 3.78956 9.41721 4.66614 9.4521 5.59992H11.1849C11.0984 4.46403 10.6469 3.4297 9.94732 2.61503L9.94742 2.61508ZM8.24853 3.25258C7.6678 3.39737 7.04642 3.488 6.40009 3.51456V5.6H8.65164C8.61779 4.74323 8.47456 3.94478 8.24852 3.25267L8.24853 3.25258ZM5.60009 3.51456C4.95373 3.48799 4.33242 3.39737 3.75164 3.25206C3.5256 3.94477 3.38238 4.74328 3.34852 5.59994H5.60008L5.60009 3.51456ZM2.98809 3.02237C2.65736 2.90466 2.34433 2.7682 2.05267 2.61508C1.35319 3.43018 0.901667 4.46397 0.815111 5.59997H2.54789C2.58278 4.66611 2.73903 3.78952 2.98799 3.02241L2.98809 3.02237ZM2.65163 2.02132C2.84954 2.11455 3.05788 2.19997 3.27454 2.27653C3.43757 1.91456 3.63236 1.56872 3.86152 1.25882C3.42246 1.45726 3.01569 1.71456 2.65163 2.02132ZM4.04852 2.50257C4.53654 2.61714 5.05738 2.69007 5.60008 2.71402V0.861911C4.95217 1.06348 4.41774 1.72337 4.04852 2.50258V2.50257ZM6.40008 2.71402C6.94279 2.69006 7.46362 2.61715 7.95163 2.50257C7.58237 1.7234 7.04747 1.06346 6.40008 0.8619V2.71402ZM8.72552 2.27652C8.94271 2.19996 9.15052 2.11454 9.34843 2.02131C8.98437 1.71454 8.5776 1.45724 8.13855 1.25881C8.36771 1.56923 8.5625 1.91454 8.72552 2.27652Z"})}),le={twitter:{href:e=>`https://x.com/${e}`,icon:oe},github:{href:e=>`https://github.com/${e}`,icon:ae},farcaster:{href:e=>`https://warpcast.com/${e.split("/").pop()}`,icon:ie},website:{href:e=>e,icon:ce}};function ue({platform:e,value:r}){const t=le[e];return n.jsxs("a",{href:t.href(r),target:"_blank",rel:"noopener noreferrer",className:C(k.default,b.radius,b.default,"flex items-center justify-center p-2"),"data-testid":`ockSocials_${e.charAt(0).toUpperCase()+e.slice(1)}`,children:[n.jsx("span",{className:"sr-only",children:e}),n.jsx("div",{className:C("flex h-4 w-4 items-center justify-center"),children:t.icon})]})}function de({address:e,chain:r,className:t}){const s=_(),o=s.address,d=s.chain,c=e??o,a=r??d;if(!c)return console.error("Socials: an Ethereum address must be provided to the Socials component."),null;const i=O({address:c,chain:a}),l=i.data,u=i.isLoading,m=ne({ensName:l??"",chain:a},{enabled:!!l}),p=m.data,x=m.isLoading;return u||x?n.jsx("span",{className:t}):!p||Object.values(p).every(f=>!f)?null:n.jsx("div",{className:C(b.default,"mt-2 w-full pl-1",t),children:n.jsx("div",{className:"left-4 flex space-x-2",children:Object.entries(p).map(([f,g])=>g&&n.jsx(ue,{platform:f,value:g},f))})})}function me({children:e,className:r,hasCopyAddressOnClick:t}){const s=N(),o=w.useMemo(()=>{const u=w.Children.toArray(e),m=u.find(v($));return{avatar:u.find(v(Z)),name:u.find(v(P)),address:m?w.cloneElement(m,{hasCopyAddressOnClick:t}):void 0,ethBalance:u.find(v(Y)),socials:u.find(v(de))}},[e,t]),d=o.avatar,c=o.name,a=o.address,i=o.ethBalance,l=o.socials;return n.jsxs("div",{className:C(s,R.default,"flex flex-col px-4 py-1",r),"data-testid":"ockIdentityLayout_container",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:d}),n.jsxs("div",{className:"flex flex-col",children:[c,a&&!i&&a,!a&&i&&i,a&&i&&n.jsxs("div",{className:"flex items-center gap-1",children:[a,n.jsx("span",{className:L.foregroundMuted,children:"·"}),i]})]})]}),l]})}function Se({address:e,chain:r,children:t,className:s,hasCopyAddressOnClick:o,schemaId:d}){const c=z(),a=c.chain,i=r??a,l=G(),u=l.address;return!u&&!e?null:n.jsx(D,{address:e||u,schemaId:d,chain:i,children:n.jsx(me,{className:s,hasCopyAddressOnClick:o,children:t})})}export{Y as E,Se as I,de as S};
