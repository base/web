import{u as n,j as s}from"./index-Dlxm52NL.js";const a={title:"Mappings",description:"Use the mapping data type to store key-value pairs.",hide_table_of_contents:!1};function r(i){const e={a:"a",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...n(),...i.components};return s.jsxs(s.Fragment,{children:[s.jsx(e.header,{children:s.jsxs(e.h1,{id:"mappings",children:["Mappings",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mappings",children:s.jsx(e.div,{"data-autolink-icon":!0})})]})}),`
`,s.jsxs(e.p,{children:["In Solidity, the hashtable/hashmap/dictionary-comparable type used to store key-value pairs is called a ",s.jsx(e.code,{children:"mapping"}),". ",s.jsx(e.code,{children:"mapping"}),"s are a powerful tool with many uses, but they also have some unexpected limitations. They also ",s.jsx(e.strong,{children:"aren't"})," actually hash tables!"]}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"objectives",children:["Objectives",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#objectives",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"By the end of this lesson you should be able to:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsx(e.li,{children:"Construct a Map (dictionary) data type"}),`
`,s.jsx(e.li,{children:"Recall that assignment of the Map data type is not as flexible as for other data types/in other languages"}),`
`,s.jsxs(e.li,{children:["Restrict function calls with the ",s.jsx(e.code,{children:"msg.sender"})," global variable"]}),`
`,s.jsx(e.li,{children:"Recall that there is no collision protection in the EVM and why this is (probably) ok"}),`
`]}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"mappings-in-solidity-vs-hash-tables",children:["Mappings in Solidity vs. Hash Tables",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mappings-in-solidity-vs-hash-tables",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["On the surface, the ",s.jsx(e.a,{href:"https://docs.soliditylang.org/en/v0.8.17/types.html#mapping-types",children:s.jsx(e.code,{children:"mapping"})})," data type appears to be just another hash table implementation that stores pairs of any hashable type as a key, to any other type as a value. The difference is in implementation."]}),`
`,s.jsxs(e.p,{children:["In a more traditional implementation, the data is stored in memory as an array, with a hash-to-index ",s.jsx(e.em,{children:"(hashmod)"})," function used to determine which spot in the array to store a given value, based on the key. Sometimes, the ",s.jsx(e.em,{children:"hashmod"})," function for two different keys results in the same index, causing a ",s.jsx(e.em,{children:"collision"}),"."]}),`
`,s.jsx(e.p,{children:"Collisions are resolved via additional solutions, such as linked list chaining; when the underlying array starts to get full, a bigger one is created, all the keys are re-hash-modded, and all the values moved over to the new array."}),`
`,s.jsxs(e.p,{children:["In the EVM, ",s.jsx(e.code,{children:"mappings"})," do ",s.jsx(e.strong,{children:"not"})," have an array as the underlying data structure. Instead, the ",s.jsx(e.code,{children:"keccak256"})," hash of the key plus the storage slot for the mapping itself is used to determine which storage slot out of all 2**256 will be used for the value."]}),`
`,s.jsxs(e.p,{children:["There is no collision-handling, for the same reason that makes wallets work at all - 2**256 is an unimaginably large number. One of the biggest numbers you might encounter regularly is the number of possible configurations for a ",s.jsx(e.a,{href:"https://czep.net/weblog/52cards.html",children:"shuffled deck of cards"}),", which is:"]}),`
`,s.jsx(e.p,{children:"80658175170943878571660636856403766975289505440883277824000000000000"}),`
`,s.jsxs(e.p,{children:["Meanwhile, the number of variations of a ",s.jsx(e.code,{children:"keccak256"})," hash are:"]}),`
`,s.jsx(e.p,{children:"115792089237316195423570985008687907853269984665640564039457584007913129639935"}),`
`,s.jsx(e.p,{children:"Collisions are very unlikely."}),`
`,s.jsxs(e.p,{children:["As a result, there are a few special characteristics and limitations to keep in mind with the ",s.jsx(e.code,{children:"mapping"})," data type:"]}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["Mappings can only have a data location of ",s.jsx(e.code,{children:"storage"})]}),`
`,s.jsx(e.li,{children:"They can't be used as parameters or returns of public functions"}),`
`,s.jsx(e.li,{children:"They are not iterable and you cannot retrieve a list of keys"}),`
`,s.jsx(e.li,{children:"All possible keys will return the default value, unless another value has been stored"}),`
`]}),`
`,s.jsxs(e.h3,{id:"creating-a-mapping",children:["Creating a Mapping",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-mapping",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["Create a contract called ",s.jsx(e.code,{children:"Mappings"}),". In it, add a ",s.jsx(e.code,{children:"mapping"})," from an ",s.jsx(e.code,{children:"address"})," to a ",s.jsx(e.code,{children:"uint"})," called ",s.jsx(e.code,{children:"favoriteNumbers"}),"."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"contract"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Mappings"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    mapping"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"address"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" =>"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") favoriteNumbers;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsxs(e.h3,{id:"writing-to-the-mapping",children:["Writing to the Mapping",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#writing-to-the-mapping",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["Add a function called ",s.jsx(e.code,{children:"saveFavoriteNumber"})," that takes an ",s.jsx(e.code,{children:"address"})," and ",s.jsx(e.code,{children:"uint"}),", then saves the ",s.jsx(e.code,{children:"uint"})," in the mapping, with the ",s.jsx(e.code,{children:"address"})," as the key."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" saveFavoriteNumber"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _address, "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    favoriteNumbers[_address] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsx(e.p,{children:"Deploy and test it out. Does it work? Probably..."}),`
`,s.jsxs(e.p,{children:["You don't have a way to read the data in ",s.jsx(e.code,{children:"favoriteNumber"}),", but this problem is easy to correct. Similar to arrays, if you mark a ",s.jsx(e.code,{children:"mapping"})," as public, the Solidity compiler will automatically create a getter for values in that ",s.jsx(e.code,{children:"mapping"}),"."]}),`
`,s.jsxs(e.p,{children:["Update the declaration of ",s.jsx(e.code,{children:"favoriteNumbers"})," and deploy to test again."]}),`
`,s.jsxs(e.h3,{id:"utilizing-msgsender",children:["Utilizing msg.sender",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#utilizing-msgsender",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["Another issue with this contract is that a ",s.jsx(e.code,{children:"public"})," function can be called by anyone and everyone with a wallet and funds to pay gas fees. As a result, anyone could go in after you and change your favorite number from lucky number ",s.jsx(e.strong,{children:"13"})," to anything, even ",s.jsx(e.strong,{children:"7"}),"!"]}),`
`,s.jsx(e.p,{children:"That won't do at all!"}),`
`,s.jsxs(e.p,{children:["Luckily, you can make use of a ",s.jsx(e.a,{href:"https://docs.soliditylang.org/en/v0.8.17/units-and-global-variables.html",children:"global variable"})," called ",s.jsx(e.code,{children:"msg.sender"})," to access the ",s.jsx(e.code,{children:"address"})," of the wallet that sent the transaction. Use this to make it so that only the owner of an ",s.jsx(e.code,{children:"address"})," can set their favorite number."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" saveFavoriteNumber"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsx(e.p,{children:"Deploy and test again. Success!"}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"retrieving-all-favorite-numbers",children:["Retrieving All Favorite Numbers",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#retrieving-all-favorite-numbers",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["One challenging limitation of the ",s.jsx(e.code,{children:"mapping"})," data type is that it is ",s.jsx(e.strong,{children:"not"})," iterable - you cannot loop through and manipulate or return ",s.jsx(e.strong,{children:"all"})," values in the ",s.jsx(e.code,{children:"mapping"}),"."]}),`
`,s.jsx(e.p,{children:"At least not with any built-in features, but you can solve this on your own. A common practice in Solidity with this and similar problems is to use multiple variables or data types to store the right combination needed to address the issue."}),`
`,s.jsxs(e.h3,{id:"using-a-helper-array",children:["Using a Helper Array",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-a-helper-array",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["For this problem, you can use a helper array to store a list of all the keys present in ",s.jsx(e.code,{children:"favoriteNumbers"}),". Simply add the array, and push new keys to it when saving a new favorite number."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"contract"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Mappings"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    mapping"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"address"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" =>"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumbers;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] addressesOfFavs;"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" saveFavoriteNumber"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"        // Imperfect solution, see below"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        addressesOfFavs."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsxs(e.p,{children:["To return all of the favorite numbers, you can then iterate through ",s.jsx(e.code,{children:"addressesOfFavs"}),", look up that addresses' favorite number, add it to a return array, and then return the array when you're done."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" returnAllFavorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"() "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" new"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[]("}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"addressesOfFavs"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"length"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    for"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" i "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"; i "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"<"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites.length; i"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"++"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        allFavorites[i] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumbers[addressesOfFavs[i]];"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsxs(e.p,{children:["On the surface, this solution works, but there is a problem: What happens if a user ",s.jsx(e.strong,{children:"updates"})," their favorite number? Their address will end up in the list twice, resulting in a doubled entry in the return."]}),`
`,s.jsxs(e.p,{children:["A solution here would be to check first if the ",s.jsx(e.code,{children:"address"})," already has a number as a value in ",s.jsx(e.code,{children:"favoriteNumbers"}),", and only push it to the array if not."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" saveFavoriteNumber"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"(favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"=="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        addressesOfFavs."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsx(e.p,{children:"You should end up with a contract similar to this:"}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"pragma"}),s.jsx(e.span,{style:{color:"#22863A","--shiki-dark":"#85E89D"},children:" solidity"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 0.8.17"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:";"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"contract"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Mappings"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    mapping"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"address"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" =>"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumbers;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] addressesOfFavs;"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" saveFavoriteNumber"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"        if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"(favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"=="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"            addressesOfFavs."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        }"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        favoriteNumbers["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"msg.sender"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" returnAllFavorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"() "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"        uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" new"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[]("}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"addressesOfFavs"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"length"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"        for"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" i "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"; i "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"<"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites.length; i"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"++"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"            allFavorites[i] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumbers[addressesOfFavs[i]];"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        }"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" allFavorites;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"conclusion",children:["Conclusion",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conclusion",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["In this lesson, you've learned how to use the ",s.jsx(e.code,{children:"mapping"})," data type to store key-value pairs in Solidity. You've also explored one strategy for solving some of the limitations found in the ",s.jsx(e.code,{children:"mapping"})," type when compared to similar types in other languages."]}),`
`,s.jsx(e.hr,{})]})}function d(i={}){const{wrapper:e}={...n(),...i.components};return e?s.jsx(e,{...i,children:s.jsx(r,{...i})}):r(i)}export{d as default,a as frontmatter};
