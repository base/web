import{u as n,j as s}from"./index-Dlxm52NL.js";const a={title:"Structs",description:"Practice using structs.",hide_table_of_contents:!1};function r(i){const e={a:"a",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...n(),...i.components};return s.jsxs(s.Fragment,{children:[s.jsx(e.header,{children:s.jsxs(e.h1,{id:"structs",children:["Structs",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#structs",children:s.jsx(e.div,{"data-autolink-icon":!0})})]})}),`
`,s.jsxs(e.p,{children:["The ",s.jsx(e.code,{children:"struct"})," type allows you to organize related data of different types."]}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"objectives",children:["Objectives",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#objectives",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"By the end of this lesson you should be able to:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["Construct a ",s.jsx(e.code,{children:"struct"})," (user-defined type) that contains several different data types"]}),`
`,s.jsxs(e.li,{children:["Declare members of the ",s.jsx(e.code,{children:"struct"})," to maximize storage efficiency"]}),`
`,s.jsxs(e.li,{children:["Describe constraints related to the assignment of ",s.jsx(e.code,{children:"struct"}),"s depending on the types they contain"]}),`
`]}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"creating-a-struct",children:["Creating a Struct",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-struct",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["In the last exercise, we used a ",s.jsx(e.code,{children:"mapping"})," to create a relationship between an ",s.jsx(e.code,{children:"address"})," and a ",s.jsx(e.code,{children:"uint"}),". But what if your users have favorite colors too? Or favorite cars? You ",s.jsx(e.strong,{children:"could"})," create a ",s.jsx(e.code,{children:"mapping"})," for each of these, but it would quickly get awkward. Instead, a ",s.jsx(e.a,{href:"https://docs.soliditylang.org/en/v0.8.17/types.html#structs",children:s.jsx(e.code,{children:"struct"})})," can be used to create a custom type that can store all of a user's favorites within one data type."]}),`
`,s.jsxs(e.p,{children:["Create a new contract called ",s.jsx(e.code,{children:"Structs"}),"."]}),`
`,s.jsxs(e.h3,{id:"setting-up-the-struct",children:["Setting up the Struct",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#setting-up-the-struct",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["Instantiate a ",s.jsx(e.code,{children:"struct"})," with the keyword, followed by a name for the type, curly brackets, and the variables that make up the type. Add a stub for ",s.jsx(e.code,{children:"Favorites"}),":"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsx(e.p,{children:"After consulting with the designers, we need to store the following for each address's favorites:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsx(e.li,{children:"Favorite number"}),`
`,s.jsx(e.li,{children:"Birth Day of Month"}),`
`,s.jsx(e.li,{children:"Favorite color"}),`
`,s.jsx(e.li,{children:"Lucky Lottery numbers"}),`
`]}),`
`,s.jsx(e.p,{children:"Let's pause for a moment and do some technical design around how to save our favorites."}),`
`,s.jsx(e.p,{children:"The product team has confirmed for us that we can safely expect that no users have a favorite number greater than 65,536, and of course, everyone is born on a day of the month between 1-31."}),`
`,s.jsxs(e.p,{children:["Variable ",s.jsx(e.a,{href:"https://docs.soliditylang.org/en/v0.8.17/internals/layout_in_storage.html",children:"packing"})," also works inside structs, so we could potentially save on storage by using smaller ",s.jsx(e.code,{children:"uint"}),"s for those variables. However, people don't change their favorite number very often, and the day of the month that they were born on never changes."]}),`
`,s.jsxs(e.p,{children:["Therefore, it's probably more gas-efficient and less cumbersome to write other parts of the code, if we just use ",s.jsx(e.code,{children:"uint"})," for both variables."]}),`
`,s.jsxs(e.p,{children:["Favorite color can be a ",s.jsx(e.code,{children:"string"}),"."]}),`
`,s.jsxs(e.p,{children:["For Lucky Lottery Numbers, we need a collection. We could use a dynamic array, since this will be in ",s.jsx(e.em,{children:"storage"}),", but we already know that the lottery has 5 numbers."]}),`
`,s.jsxs(e.p,{children:["Try to use this information to build the ",s.jsx(e.code,{children:"struct"})," on your own. You should end up with something similar to:"]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumber;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" birthDay;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    string"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteColor;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] lotteryNumbers;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsxs(e.h3,{id:"instantiating-a-struct-with-its-name",children:["Instantiating a Struct with Its Name",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#instantiating-a-struct-with-its-name",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"There are two ways to instantiate a struct using its name. The first is similar to instantiating a new object in JavaScript:"}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" myFavorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"({"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    favoriteNumber"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:":"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 29"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    birthDay"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:":"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 14"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    favoriteColor"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:":"}),s.jsx(e.span,{style:{color:"#032F62","--shiki-dark":"#9ECBFF"},children:' "red"'}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    lotteryNumbers"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:":"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"), "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"2"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"3"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"4"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"});"})})]})})}),`
`,s.jsxs(e.p,{children:["You can also use a shorthand method where you skip the member names and just list a value for each one. Note that the curly brackets are ",s.jsx(e.strong,{children:"not"})," included in this format:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" myFavorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    29"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    14"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#032F62","--shiki-dark":"#9ECBFF"},children:'    "red"'}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    ["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"), "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"2"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"3"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"4"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:");"})})]})})}),`
`,s.jsx(e.p,{children:"There's no difference in gas costs with either of these methods. Use the one that makes the most sense for the given situation."}),`
`,s.jsxs(e.h3,{id:"saving-multiple-instances-to-storage",children:["Saving Multiple Instances to Storage",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#saving-multiple-instances-to-storage",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["Next, we need to figure out the best way to organize the ",s.jsx(e.code,{children:"Favorites"})," in ",s.jsx(e.em,{children:"storage"}),". There are a few options, as always, each with tradeoffs. You could match the pattern you used for favorite numbers and utilize a ",s.jsx(e.code,{children:"mapping"})," to match ",s.jsx(e.code,{children:"addresses"})," to ",s.jsx(e.code,{children:"Favorites"}),"."]}),`
`,s.jsxs(e.p,{children:["Another popular method is to use an array, which takes advantage of ",s.jsx(e.code,{children:".push"})," returning a reference to the newly added element, and the fact that the concept of ",s.jsx(e.em,{children:"undefined"})," does not exist in Solidity."]}),`
`,s.jsxs(e.p,{children:["First, instantiate an array of ",s.jsx(e.code,{children:"Favorites"}),":"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsx(e.code,{children:s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"Favorites[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" userFavorites;"})]})})})}),`
`,s.jsxs(e.p,{children:["Next, add a ",s.jsx(e.code,{children:"public"})," function to add submitted favorites to the list. It should take each of the members as an argument. Then, assign each argument to the new element via the reference returned by ",s.jsx(e.code,{children:"push()"}),"."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" addFavorite"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteNumber,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _birthDay,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    string"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteColor,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _lotteryNumbers"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"    // .push() returns a reference to the new element"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"storage"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" newFavorite "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" userFavorites."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"();"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.favoriteNumber "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteNumber;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.birthDay "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _birthDay;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.favoriteColor "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteColor;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.lotteryNumbers "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _lotteryNumbers;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsxs(e.p,{children:["Alternatively, you can create an instance in memory, then ",s.jsx(e.code,{children:"push"})," it to storage."]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"Reveal code"}),s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" addFavorite"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteNumber,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _birthDay,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    string"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteColor,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _lotteryNumbers"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" myFavorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"        29"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"        14"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#032F62","--shiki-dark":"#9ECBFF"},children:'        "red"'}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"        ["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"), "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"2"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"3"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"4"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"5"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    );"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    userFavorites."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"(myFavorites);"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})})]}),`
`,s.jsx("br",{}),`
`,s.jsx(e.p,{children:"The gas cost is similar for each of these methods."}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"unexpected-behavior-in-structs",children:["Unexpected Behavior in Structs",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#unexpected-behavior-in-structs",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"Structs in Solidity exhibit some properties that are unexpected, or even frustrating. Working with them often includes untangling a set of mutually-exclusive properties and needs."}),`
`,s.jsxs(e.h3,{id:"dynamic-storage-arrays-in-structs",children:["Dynamic Storage Arrays in Structs",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#dynamic-storage-arrays-in-structs",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["The product team has contacted you to let you know that the beta testers are complaining about the ",s.jsx(e.code,{children:"lotteryNumbers"}),". As it turns out, not every locality has lotteries where 5 numbers are drawn. Some have 3, 4, or even 6!."]}),`
`,s.jsxs(e.p,{children:["You might think this is an easy enough change. After all, you can just remove the size from the array declaration inside ",s.jsx(e.code,{children:"Favorites"}),". Go ahead and try it:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" Favorites"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteNumber;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" birthDay;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    string"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" favoriteColor;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] lotteryNumbers; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"// Removed the '5'"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsxs(e.p,{children:["You'll get an error if you're using the ",s.jsx(e.code,{children:"memory"})," method shown above."]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"from solidity:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"TypeError: Invalid type for argument in function call. Invalid implicit conversion from uint256[5] memory to uint256[] memory requested."})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"  --> contracts/mappings_exercise.sol:70:13:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"70 |             [uint(1), 2, 3, 4, 5]"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |             ^^^^^^^^^^^^^^^^^^^^^"})})]})})}),`
`,s.jsxs(e.p,{children:["The simplest resolution here is to switch back to using ",s.jsx(e.code,{children:"push()"})," to create an empty instance of ",s.jsx(e.code,{children:"Favorites"}),", then assigning the values."]}),`
`,s.jsxs(e.p,{children:["The reason this works is a little obtuse. In the failing example, an unsized ",s.jsx(e.code,{children:"uint"})," array is the expected type for the argument, but a sized ",s.jsx(e.code,{children:"uint"})," array is provided. Solidity cannot perform implicit conversions like this most of the time and you'll get a compiler error if you provide the wrong type for an argument, even if it is convertible."]}),`
`,s.jsxs(e.p,{children:["One exception to this rule is that Solidity ",s.jsx(e.strong,{children:"can"})," perform an implicit conversion during ",s.jsx(e.em,{children:"assignment"}),' if the variable on the right side "fits" into the variable on the left side.']}),`
`,s.jsxs(e.p,{children:[s.jsx(e.code,{children:"uint[5]"})," fits in ",s.jsx(e.code,{children:"uint[]"}),", so Solidity will allow it to sit ðŸˆ."]}),`
`,s.jsxs(e.p,{children:["But what happens if you use the ",s.jsx(e.em,{children:"getter"})," for ",s.jsx(e.code,{children:"userFavorites"})," to retrieve your entry?"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"{"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"0": "uint256: favoriteNumber 29",'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"1": "uint256: birthDay 14",'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"2": "string: favoriteColor red"'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"}"})})]})})}),`
`,s.jsxs(e.p,{children:["What happened to the array? It's not there, and it turns out that this is ",s.jsx(e.a,{href:"https://github.com/ethereum/solidity/issues/1626",children:"on purpose"}),"."]}),`
`,s.jsxs(e.h3,{id:"mappings-inside-of-structs",children:["Mappings Inside of Structs",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mappings-inside-of-structs",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["You may add ",s.jsx(e.code,{children:"mappings"})," inside of ",s.jsx(e.code,{children:"struct"}),"s, subject to a few quirks and restrictions. Add ",s.jsx(e.code,{children:"mapping (uint => uint) numberPairs;"})," to ",s.jsx(e.code,{children:"Favorites"}),"."]}),`
`,s.jsxs(e.p,{children:["In ",s.jsx(e.code,{children:"addFavorites"}),", assign ",s.jsx(e.code,{children:"newFavorite.numberPairs[33] = 66;"})]}),`
`,s.jsx(e.p,{children:"Deploy and test. So far, so good!"}),`
`,s.jsxs(e.p,{children:[s.jsx(e.em,{children:"DÃ©jÃ  vu"})," ahead: But what happens if you use the ",s.jsx(e.em,{children:"getter"})," for ",s.jsx(e.code,{children:"userFavorites"})," to retrieve your entry?"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"{"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"0": "uint256: favoriteNumber 29",'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"1": "uint256: birthDay 14",'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:'	"2": "string: favoriteColor red"'})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"}"})})]})})}),`
`,s.jsxs(e.p,{children:["It's not there, and it turns out that this is ",s.jsx(e.a,{href:"https://github.com/ethereum/solidity/issues/1626",children:"on purpose"}),"."]}),`
`,s.jsxs(e.p,{children:["Another issue emerges if you try to return the struct from a public function. What if you wanted your ",s.jsx(e.code,{children:"addFavorite"})," function to return a reference to the new favorite?"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"// Bad code example, will not work"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" addFavorite"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteNumber,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _birthDay,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    string"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteColor,"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"[] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"calldata"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _lotteryNumbers"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#FFAB70"},children:"newFavorite"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"    // .push() returns a reference to the new element"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"storage"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" newFavorite "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" userFavorites."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:"push"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"();"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.favoriteNumber "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteNumber;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.birthDay "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _birthDay;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.favoriteColor "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _favoriteColor;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.lotteryNumbers "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" _lotteryNumbers;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"    newFavorite.numberPairs["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"33"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"] "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:" 66"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:";"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" newFavorite;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsxs(e.p,{children:["You'll get an error. The ",s.jsx(e.code,{children:"mapping"})," type cannot be returned by a ",s.jsx(e.code,{children:"public"})," or ",s.jsx(e.code,{children:"external"})," function, so neither can a ",s.jsx(e.code,{children:"struct"})," that contains one."]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"from solidity:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"TypeError: Types containing (nested) mappings can only be parameters or return variables of internal or library functions."})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"  --> contracts/mappings_exercise.sol:64:23:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"64 |     ) public returns (Favorites memory) {"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |                       ^^^^^^^^^^^^^^^^"})})]})})}),`
`,s.jsxs(e.p,{children:["Finally, what happens if you try to assign ",s.jsx(e.code,{children:"newFavorite"})," to a ",s.jsx(e.code,{children:"memory"})," variable? Again, an error occurs because ",s.jsx(e.code,{children:"mapping"}),"s can only be in ",s.jsx(e.code,{children:"storage"}),"."]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"// Bad code example, will not work"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"Favorites "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" secondFavorite "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" newFavorite;"})]})]})})}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"from solidity:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"TypeError: Type struct Structs.Favorites memory is only valid in storage because it contains a (nested) mapping."})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"  --> contracts/mappings_exercise.sol:82:9:"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"82 |         Favorites memory secondFavorite = newFavorite;"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{children:"   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"})})]})})}),`
`,s.jsxs(e.h3,{id:"automatic-getters-for-public-structs",children:["Automatic Getters for Public Structs",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#automatic-getters-for-public-structs",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["As with other types, if you put a ",s.jsx(e.code,{children:"public"})," ",s.jsx(e.code,{children:"struct"})," in storage at the contract level, the compiler will generate a getter automatically. However, these don't work quite the way you might expect. For example, imagine:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" MyStruct"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" first;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" second;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"    uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" third;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"MyStruct myStruct;"})})]})})}),`
`,s.jsxs(e.p,{children:["The automatic getter for ",s.jsx(e.code,{children:"myStruct"})," will ",s.jsx(e.strong,{children:"not"})," be:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"// Approximate example, not real code"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" myStruct"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"() "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"MyStruct"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" myStruct;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsx(e.p,{children:"Instead, it returns the members individually:"}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#6A737D"},children:"// Approximate example, not real code"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" myStruct"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"() "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#79B8FF"},children:"uint"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" (myStruct.first, myStruct.second, myStruct.third);"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsx(e.p,{children:"Create your own getter to return the data as a tuple, which will be interpreted as the appropriate type if it's called from another contract via an interface."}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark",style:{backgroundColor:"#fff","--shiki-dark-bg":"#24292e",color:"#24292e","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#B392F0"},children:" getMyStruct"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"() "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"MyStruct"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:" memory"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:" myStruct;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,s.jsx(e.hr,{}),`
`,s.jsxs(e.h2,{id:"conclusion",children:["Conclusion",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conclusion",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["In this lesson, you've learned how to use the ",s.jsx(e.code,{children:"struct"})," keyword to create a custom type that stores related data. You've also learned three methods of instantiating them and common patterns for storing ",s.jsx(e.code,{children:"struct"}),"s in storage. Finally, you've explored some of the constraints that emerge when working with more complex data types within a ",s.jsx(e.code,{children:"struct"}),"."]})]})}function c(i={}){const{wrapper:e}={...n(),...i.components};return e?s.jsx(e,{...i,children:s.jsx(r,{...i})}):r(i)}export{c as default,a as frontmatter};
