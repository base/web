import{B as k,Z as v}from"./OnchainKitProvider-BMiQl1rP.js";import{u as B}from"./useTheme-DG4jZ5Gt.js";import{z as I}from"./constants-cvMn9d8Y.js";import{r as m,j as f,m as y}from"./index-Dlxm52NL.js";import{F as P,D as j}from"./FocusTrap-C4EZ6vry.js";class N extends k{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function A(r,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new N({value:r});let[n,e="0"]=r.split(".");const i=n.startsWith("-");if(i&&(n=n.slice(1)),e=e.replace(/(0+)$/,""),t===0)Math.round(+`.${e}`)===1&&(n=`${BigInt(n)+1n}`),e="";else if(e.length>t){const[o,l,a]=[e.slice(0,t-1),e.slice(t-1,t),e.slice(t)],s=Math.round(+`${l}.${a}`);s>9?e=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):e=`${o}${s}`,e.length>t&&(e=e.slice(1),n=`${BigInt(n)+1n}`),e=e.slice(0,t)}else e=e.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${e}`)}function D(r,t,n,e){let i=0,o=0;switch(n){case"top":i=r.top-t.height-e;break;case"bottom":i=r.bottom+e;break;case"left":o=r.left-t.width-e;break;case"right":o=r.right+e;break}return{top:i,left:o}}function L(r,t,n,e,i){const o=n.top,l=n.left;let a=o,s=l;const d=i==="top"||i==="bottom";switch(e){case"start":d?s=r.left:a=r.top;break;case"center":d?s=r.left+(r.width-t.width)/2:a=r.top+(r.height-t.height)/2;break;case"end":d?s=r.right-t.width:a=r.bottom-t.height;break}return{top:a,left:s}}function S({children:r,anchor:t,isOpen:n,onClose:e,position:i="bottom",align:o="center",offset:l=8,trigger:a,"aria-label":s,"aria-labelledby":d,"aria-describedby":$}){const u=m.useRef(null),x=B(),c=m.useCallback(()=>{var w;if(!t||!u.current)return;const p=t.getBoundingClientRect(),b=(w=u.current)==null?void 0:w.getBoundingClientRect();if(!p||!b)return;const g=D(p,b,i,l),h=L(p,b,g,o,i);u.current.style.top=`${h.top}px`,u.current.style.left=`${h.left}px`},[t,i,l,o]);if(m.useEffect(()=>{if(n)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[n,c]),!n)return null;const E=f.jsx("div",{className:v(x,I.dropdown,"pointer-events-none fixed"),"data-portal-origin":"true",children:f.jsx(P,{active:n,children:f.jsx(j,{onDismiss:e,triggerRef:a,children:f.jsx("div",{"aria-label":s,"aria-labelledby":d,"aria-describedby":$,className:v("pointer-events-auto fixed"),"data-testid":"ockPopover",ref:u,role:"dialog",children:r})})})});return y.createPortal(E,document.body)}export{S as P,A as p};
