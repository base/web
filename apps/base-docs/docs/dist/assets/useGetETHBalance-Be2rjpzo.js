import{r as w}from"./index-Dlxm52NL.js";import{l as O,D as j}from"./Name-BQXefeTI.js";import{r as P,b as h,g as E}from"./getSwapErrorCode-Rcq4QZsj.js";import{f as T,a as A,u as C}from"./useChainId-d5iqIE3x.js";import{bB as S,ah as I,z as _,au as f,ai as k}from"./OnchainKitProvider-BMiQl1rP.js";import{g as D}from"./useAccount-BLyN9GYK.js";function g(e){return typeof e=="number"?e:e==="wei"?0:Math.abs(S[e])}async function M(e,t){const{address:r,blockNumber:n,blockTag:i,chainId:a,token:o,unit:c="ether"}=t;if(o)try{return await m(e,{balanceAddress:r,chainId:a,symbolType:"string",tokenAddress:o})}catch(y){if(y.name==="ContractFunctionExecutionError"){const b=await m(e,{balanceAddress:r,chainId:a,symbolType:"bytes32",tokenAddress:o}),v=I(_(b.symbol,{dir:"right"}));return{...b,symbol:v}}throw y}const s=e.getClient({chainId:a}),u=await D(s,O,"getBalance")(n?{address:r,blockNumber:n}:{address:r,blockTag:i}),l=e.chains.find(y=>y.id===a)??s.chain;return{decimals:l.nativeCurrency.decimals,formatted:f(u,g(c)),symbol:l.nativeCurrency.symbol,value:u}}async function m(e,t){const{balanceAddress:r,chainId:n,symbolType:i,tokenAddress:a,unit:o}=t,c={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:a},[s,d,u]=await P(e,{allowFailure:!1,contracts:[{...c,functionName:"balanceOf",args:[r],chainId:n},{...c,functionName:"decimals",chainId:n},{...c,functionName:"symbol",chainId:n}]}),l=f(s??"0",g(o??d));return{decimals:d,formatted:l,symbol:u,value:s}}function N(e,t={}){return{async queryFn({queryKey:r}){const{address:n,scopeKey:i,...a}=r[1];if(!n)throw new Error("address is required");return await M(e,{...a,address:n})??null},queryKey:q(t)}}function q(e={}){return["balance",T(e)]}function B(e={}){const{address:t,query:r={}}=e,n=k(e),i=A({config:n}),a=N(n,{...e,chainId:e.chainId??i}),o=!!(t&&(r.enabled??!0));return C({...r,...a,enabled:o})}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(n){Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q(e,t,r){return(t=U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){var t=x(e,"string");return typeof t=="symbol"?t:t+""}function x(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const F=18;function J(e){const t=B({address:e,query:K({},j)});return w.useMemo(()=>{var a,o,c,s;let r;if(t!=null&&t.error&&(r={code:h("balance"),error:(a=t==null?void 0:t.error)==null?void 0:a.message,message:""}),!((o=t==null?void 0:t.data)!=null&&o.value)&&((c=t==null?void 0:t.data)==null?void 0:c.value)!==0n)return{convertedBalance:"",roundedBalance:"",error:r,response:t};const n=f((s=t==null?void 0:t.data)==null?void 0:s.value,F),i=E(n,8);return{convertedBalance:n,error:r,response:t,roundedBalance:i}},[t])}export{J as u};
