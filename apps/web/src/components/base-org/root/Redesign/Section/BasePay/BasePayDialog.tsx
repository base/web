'use client';

import { useCallback, useEffect, useRef, useState } from 'react';
import { useMotionValueEvent, useSpring } from 'framer-motion';
import SlideButton from './SlideButton';

const MIN_WIDTH_PX = 71;

function clamp(value: number, min: number, max: number): number {
  return Math.max(min, Math.min(value, max));
}

export function BasePayDialog() {
  const trackRef = useRef<HTMLDivElement>(null);
  const [trackWidth, setTrackWidth] = useState(0);
  const [progress, setProgress] = useState(0);
  const [isDragging, setIsDragging] = useState(false);

  const progressSpring = useSpring(0, { stiffness: 650, damping: 48 });
  const [springProgress, setSpringProgress] = useState(0);

  useEffect(() => {
    progressSpring.set(progress);
  }, [progress, progressSpring]);

  useMotionValueEvent(progressSpring, 'change', (v) => {
    setSpringProgress(v as number);
  });

  useEffect(() => {
    const el = trackRef.current;
    if (!el) return;
    const ro = new ResizeObserver(() => setTrackWidth(el.clientWidth));
    ro.observe(el);
    setTrackWidth(el.clientWidth);
    return () => ro.disconnect();
  }, []);

  const blueWidth =
    trackWidth <= 0
      ? MIN_WIDTH_PX
      : clamp(
          MIN_WIDTH_PX + springProgress * (trackWidth - MIN_WIDTH_PX),
          MIN_WIDTH_PX,
          trackWidth,
        );

  const handlePointerDown = useCallback((e: React.PointerEvent) => {
    e.preventDefault();
    setIsDragging(true);
    (e.currentTarget as HTMLElement).setPointerCapture(e.pointerId);
  }, []);

  const handlePointerMove = useCallback((e: React.PointerEvent) => {
    if (e.buttons !== 1) return;
    const track = trackRef.current;
    if (!track) return;
    const { left, width } = track.getBoundingClientRect();
    const p = (e.clientX - left) / width;
    setProgress(clamp(p, 0, 1));
  }, []);

  const handlePointerUp = useCallback((e: React.PointerEvent) => {
    (e.currentTarget as HTMLElement).releasePointerCapture(e.pointerId);
    setIsDragging(false);
    setProgress((p) => (p >= 0.5 ? 1 : 0));
  }, []);

  return (
    <div
      className="flex aspect-square w-full flex-col items-center justify-between rounded-[46px] bg-white p-[24px] pt-[48px]"
      style={{ boxShadow: '0 8px 12px 0 rgba(91, 97, 110, 0.22)' }}
    >
      <div className="flex flex-col items-center justify-center gap-4">
        <svg
          width="238"
          height="165"
          viewBox="0 0 238 165"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1275_1238)">
            <path
              d="M119 96C145.51 96 167 74.5097 167 48C167 21.4903 145.51 0 119 0C92.4903 0 71 21.4903 71 48C71 74.5097 92.4903 96 119 96Z"
              fill="#0B53BF"
            />
            <path
              d="M127.641 13.0497V19.2297C139.971 22.9497 149.001 34.4097 149.001 47.9997C149.001 61.5897 139.971 73.0497 127.641 76.7697V82.9497C143.361 79.1097 155.001 64.9197 155.001 47.9997C155.001 31.0797 143.361 16.8897 127.641 13.0497Z"
              fill="white"
            />
            <path
              d="M89 47.9997C89 34.4097 98.03 22.9497 110.36 19.2297V13.0497C94.64 16.8897 83 31.0797 83 47.9997C83 64.9197 94.64 79.1097 110.36 82.9497V76.7697C98.03 73.0797 89 61.5897 89 47.9997Z"
              fill="white"
            />
            <path
              d="M131.901 54.69C131.901 42.4199 112.671 47.4601 112.671 40.68C112.671 38.25 114.621 36.69 118.341 36.69C122.781 36.69 124.311 38.85 124.791 41.76H130.911C130.365 36.2988 127.23 32.8506 122.001 31.8234V27H116.001V31.6512C110.272 32.3808 106.671 35.7171 106.671 40.68C106.671 53.01 125.931 48.39 125.931 55.05C125.931 57.57 123.501 59.25 119.391 59.25C114.021 59.25 112.251 56.88 111.591 53.61H105.621C106.007 59.5917 109.696 63.3354 116.001 64.2696V69H122.001V64.3326C128.154 63.5376 131.901 59.958 131.901 54.69Z"
              fill="white"
            />
          </g>
          <path
            d="M23.2562 133V112.3H32.9762C36.7862 112.3 39.5162 114.67 39.5162 118.39C39.5162 122.11 36.7562 124.63 32.9762 124.63H27.1562V133H23.2562ZM27.0962 121.15H32.7062C34.4462 121.15 35.5562 120.1 35.5562 118.51C35.5562 116.86 34.4462 115.78 32.7062 115.78H27.0962V121.15Z"
            fill="#0A0B0D"
          />
          <path
            d="M45.9655 133.45C43.0855 133.45 40.7455 131.71 40.7455 128.86C40.7455 125.5 43.3255 124.42 46.4455 124.09L50.8555 123.64V122.8C50.8555 121.51 49.8055 120.61 47.9455 120.61C46.1755 120.61 45.1555 121.39 44.8255 122.56H41.2255C41.5855 119.71 43.9555 117.55 47.9455 117.55C51.7855 117.55 54.3355 119.41 54.3355 123.04V130.36C54.3355 131.29 54.4255 132.58 54.4855 132.94V133H50.8855C50.8555 132.49 50.8555 132.01 50.8555 131.5H50.3155C49.3855 133 47.7655 133.45 45.9655 133.45ZM44.5255 128.68C44.5255 129.91 45.5455 130.63 46.9855 130.63C49.4455 130.63 50.8555 128.77 50.8555 126.88V126.13L47.5555 126.52C45.5155 126.76 44.5255 127.36 44.5255 128.68Z"
            fill="#0A0B0D"
          />
          <path
            d="M57.0904 138.7V135.7H59.8204C60.7804 135.7 61.3204 135.28 61.6504 134.29L61.9504 133.42L56.2204 118H60.1204L63.4804 128.44H64.0204L67.3204 118H71.2204L64.4704 135.88C63.7504 137.83 62.6704 138.7 60.3604 138.7H57.0904Z"
            fill="#0A0B0D"
          />
          <path
            d="M82.6171 133V117.13H82.0771L78.1471 119.38V115.72L83.2171 112.75H86.4871V133H82.6171Z"
            fill="#0A0B0D"
          />
          <path
            d="M98.3308 133.45C93.2308 133.45 90.3808 129.01 90.3808 122.86C90.3808 116.71 93.2308 112.3 98.3308 112.3C103.401 112.3 106.221 116.71 106.221 122.86C106.221 129.01 103.401 133.45 98.3308 133.45ZM98.3308 130C100.971 130 102.201 127.39 102.201 122.86C102.201 118.33 100.971 115.75 98.3308 115.75C95.6608 115.75 94.4008 118.33 94.4008 122.86C94.4008 127.39 95.6608 130 98.3308 130Z"
            fill="#0A0B0D"
          />
          <path
            d="M116.993 133.45C111.893 133.45 109.043 129.01 109.043 122.86C109.043 116.71 111.893 112.3 116.993 112.3C122.063 112.3 124.883 116.71 124.883 122.86C124.883 129.01 122.063 133.45 116.993 133.45ZM116.993 130C119.633 130 120.863 127.39 120.863 122.86C120.863 118.33 119.633 115.75 116.993 115.75C114.323 115.75 113.063 118.33 113.063 122.86C113.063 127.39 114.323 130 116.993 130Z"
            fill="#0A0B0D"
          />
          <path
            d="M143.595 133.45C138.405 133.45 135.165 130.33 135.165 124.9V112.3H139.095V124.6C139.095 127.54 140.475 129.85 143.565 129.85C146.625 129.85 148.035 127.54 148.035 124.6V112.3H151.965V124.9C151.965 130.33 148.785 133.45 143.595 133.45Z"
            fill="#0A0B0D"
          />
          <path
            d="M163.576 133.45C158.836 133.45 155.686 130.96 155.086 127.18H159.076C159.766 129.25 161.566 130.03 163.576 130.03C165.736 130.03 167.236 128.92 167.236 127.36C167.236 125.65 166.036 124.93 163.336 124.36L161.506 123.97C158.506 123.34 155.776 121.72 155.776 118.12C155.776 114.55 158.806 111.85 163.186 111.85C167.566 111.85 170.206 114.16 170.986 117.85H167.056C166.516 116.14 165.226 115.24 163.186 115.24C161.056 115.24 159.736 116.35 159.736 117.82C159.736 119.32 160.936 119.95 163.276 120.49L165.106 120.91C168.376 121.66 171.286 123.13 171.286 127C171.286 130.75 168.226 133.45 163.576 133.45Z"
            fill="#0A0B0D"
          />
          <path
            d="M174.897 133V112.3H182.907C189.387 112.3 193.137 116.59 193.137 122.47C193.137 128.35 189.387 133 182.907 133H174.897ZM182.247 129.52C186.597 129.52 189.027 126.73 189.027 122.5C189.027 118.24 186.597 115.78 182.247 115.78H178.827V129.52H182.247Z"
            fill="#0A0B0D"
          />
          <path
            d="M206.11 133.45C200.17 133.45 195.64 128.98 195.64 122.68C195.64 116.41 200.17 111.85 206.11 111.85C211.24 111.85 215.23 115 216.19 119.68H212.05C211.24 117.16 209.05 115.45 206.11 115.45C202.27 115.45 199.78 118.51 199.78 122.65C199.78 126.73 202.27 129.85 206.11 129.85C208.93 129.85 211.12 128.29 211.96 125.92H216.16C215.14 130.39 211.21 133.45 206.11 133.45Z"
            fill="#0A0B0D"
          />
          <path
            d="M52.7338 150.748V149.091H61.4376V150.748H58.0658V160H56.1056V150.748H52.7338Z"
            fill="#89909E"
          />
          <path
            d="M65.4127 160.16C64.6136 160.16 63.9212 159.984 63.3352 159.633C62.7493 159.281 62.2948 158.789 61.9716 158.157C61.652 157.525 61.4922 156.786 61.4922 155.941C61.4922 155.096 61.652 154.356 61.9716 153.72C62.2948 153.084 62.7493 152.591 63.3352 152.239C63.9212 151.888 64.6136 151.712 65.4127 151.712C66.2117 151.712 66.9041 151.888 67.4901 152.239C68.076 152.591 68.5288 153.084 68.8484 153.72C69.1715 154.356 69.3331 155.096 69.3331 155.941C69.3331 156.786 69.1715 157.525 68.8484 158.157C68.5288 158.789 68.076 159.281 67.4901 159.633C66.9041 159.984 66.2117 160.16 65.4127 160.16ZM65.4233 158.615C65.8565 158.615 66.2188 158.496 66.51 158.258C66.8011 158.017 67.0178 157.694 67.1598 157.289C67.3054 156.884 67.3782 156.433 67.3782 155.936C67.3782 155.435 67.3054 154.982 67.1598 154.578C67.0178 154.169 66.8011 153.844 66.51 153.603C66.2188 153.361 65.8565 153.241 65.4233 153.241C64.9794 153.241 64.6101 153.361 64.3154 153.603C64.0242 153.844 63.8058 154.169 63.6602 154.578C63.5181 154.982 63.4471 155.435 63.4471 155.936C63.4471 156.433 63.5181 156.884 63.6602 157.289C63.8058 157.694 64.0242 158.017 64.3154 158.258C64.6101 158.496 64.9794 158.615 65.4233 158.615Z"
            fill="#89909E"
          />
          <path
            d="M84.5235 154.546C84.5235 155.721 84.3034 156.728 83.863 157.566C83.4262 158.4 82.8296 159.04 82.0733 159.483C81.3204 159.927 80.4664 160.149 79.5111 160.149C78.5559 160.149 77.7 159.927 76.9436 159.483C76.1908 159.036 75.5942 158.395 75.1539 157.561C74.7171 156.722 74.4987 155.717 74.4987 154.546C74.4987 153.37 74.7171 152.365 75.1539 151.531C75.5942 150.693 76.1908 150.052 76.9436 149.608C77.7 149.164 78.5559 148.942 79.5111 148.942C80.4664 148.942 81.3204 149.164 82.0733 149.608C82.8296 150.052 83.4262 150.693 83.863 151.531C84.3034 152.365 84.5235 153.37 84.5235 154.546ZM82.5367 154.546C82.5367 153.718 82.4071 153.02 82.1478 152.452C81.8921 151.88 81.537 151.449 81.0825 151.158C80.6279 150.863 80.1041 150.716 79.5111 150.716C78.9181 150.716 78.3943 150.863 77.9397 151.158C77.4852 151.449 77.1283 151.88 76.8691 152.452C76.6134 153.02 76.4855 153.718 76.4855 154.546C76.4855 155.373 76.6134 156.073 76.8691 156.644C77.1283 157.212 77.4852 157.644 77.9397 157.939C78.3943 158.23 78.9181 158.375 79.5111 158.375C80.1041 158.375 80.6279 158.23 81.0825 157.939C81.537 157.644 81.8921 157.212 82.1478 156.644C82.4071 156.073 82.5367 155.373 82.5367 154.546Z"
            fill="#89909E"
          />
          <path
            d="M91.5215 156.559V151.818H93.4498V160H91.5801V158.546H91.4949C91.3102 159.004 91.0066 159.379 90.584 159.67C90.165 159.961 89.6483 160.107 89.0339 160.107C88.4977 160.107 88.0236 159.988 87.6117 159.75C87.2033 159.508 86.8837 159.159 86.6529 158.7C86.4221 158.239 86.3067 157.681 86.3067 157.028V151.818H88.2349V156.73C88.2349 157.248 88.377 157.66 88.6611 157.965C88.9451 158.271 89.318 158.423 89.7797 158.423C90.0638 158.423 90.339 158.354 90.6053 158.216C90.8716 158.077 91.09 157.871 91.2605 157.598C91.4345 157.321 91.5215 156.975 91.5215 156.559Z"
            fill="#89909E"
          />
          <path
            d="M99.5182 151.818V153.31H94.8147V151.818H99.5182ZM95.976 149.858H97.9042V157.539C97.9042 157.798 97.9433 157.997 98.0214 158.136C98.1031 158.271 98.2096 158.363 98.341 158.413C98.4724 158.462 98.618 158.487 98.7778 158.487C98.8985 158.487 99.0086 158.478 99.1081 158.461C99.211 158.443 99.2892 158.427 99.3424 158.413L99.6674 159.92C99.5644 159.956 99.417 159.995 99.2252 160.037C99.037 160.08 98.8062 160.105 98.5328 160.112C98.0498 160.126 97.6148 160.053 97.2277 159.894C96.8407 159.73 96.5335 159.478 96.3062 159.137C96.0825 158.796 95.9724 158.37 95.976 157.859V149.858Z"
            fill="#89909E"
          />
          <path
            d="M104.079 160.144C103.436 160.144 102.861 159.979 102.353 159.649C101.846 159.318 101.444 158.839 101.15 158.21C100.855 157.582 100.707 156.818 100.707 155.92C100.707 155.011 100.857 154.244 101.155 153.619C101.457 152.99 101.863 152.516 102.375 152.197C102.886 151.873 103.456 151.712 104.085 151.712C104.564 151.712 104.958 151.793 105.267 151.957C105.576 152.117 105.821 152.31 106.002 152.537C106.183 152.761 106.324 152.972 106.423 153.171H106.503V149.091H108.436V160H106.54V158.711H106.423C106.324 158.91 106.18 159.121 105.991 159.345C105.803 159.565 105.555 159.753 105.246 159.91C104.937 160.066 104.548 160.144 104.079 160.144ZM104.617 158.562C105.026 158.562 105.374 158.452 105.661 158.232C105.949 158.008 106.167 157.697 106.316 157.299C106.466 156.902 106.54 156.438 106.54 155.909C106.54 155.38 106.466 154.92 106.316 154.53C106.171 154.139 105.954 153.835 105.667 153.619C105.382 153.402 105.033 153.294 104.617 153.294C104.188 153.294 103.829 153.406 103.541 153.629C103.254 153.853 103.037 154.162 102.891 154.556C102.746 154.95 102.673 155.401 102.673 155.909C102.673 156.421 102.746 156.877 102.891 157.278C103.04 157.676 103.259 157.99 103.547 158.221C103.838 158.448 104.195 158.562 104.617 158.562Z"
            fill="#89909E"
          />
          <path
            d="M114.06 160.16C113.261 160.16 112.569 159.984 111.983 159.633C111.397 159.281 110.942 158.789 110.619 158.157C110.299 157.525 110.14 156.786 110.14 155.941C110.14 155.096 110.299 154.356 110.619 153.72C110.942 153.084 111.397 152.591 111.983 152.239C112.569 151.888 113.261 151.712 114.06 151.712C114.859 151.712 115.552 151.888 116.138 152.239C116.723 152.591 117.176 153.084 117.496 153.72C117.819 154.356 117.981 155.096 117.981 155.941C117.981 156.786 117.819 157.525 117.496 158.157C117.176 158.789 116.723 159.281 116.138 159.633C115.552 159.984 114.859 160.16 114.06 160.16ZM114.071 158.615C114.504 158.615 114.866 158.496 115.157 158.258C115.449 158.017 115.665 157.694 115.807 157.289C115.953 156.884 116.026 156.433 116.026 155.936C116.026 155.435 115.953 154.982 115.807 154.578C115.665 154.169 115.449 153.844 115.157 153.603C114.866 153.361 114.504 153.241 114.071 153.241C113.627 153.241 113.258 153.361 112.963 153.603C112.672 153.844 112.453 154.169 112.308 154.578C112.166 154.982 112.095 155.435 112.095 155.936C112.095 156.433 112.166 156.884 112.308 157.289C112.453 157.694 112.672 158.017 112.963 158.258C113.258 158.496 113.627 158.615 114.071 158.615Z"
            fill="#89909E"
          />
          <path
            d="M123.186 160.16C122.387 160.16 121.695 159.984 121.109 159.633C120.523 159.281 120.068 158.789 119.745 158.157C119.425 157.525 119.266 156.786 119.266 155.941C119.266 155.096 119.425 154.356 119.745 153.72C120.068 153.084 120.523 152.591 121.109 152.239C121.695 151.888 122.387 151.712 123.186 151.712C123.985 151.712 124.678 151.888 125.264 152.239C125.849 152.591 126.302 153.084 126.622 153.72C126.945 154.356 127.107 155.096 127.107 155.941C127.107 156.786 126.945 157.525 126.622 158.157C126.302 158.789 125.849 159.281 125.264 159.633C124.678 159.984 123.985 160.16 123.186 160.16ZM123.197 158.615C123.63 158.615 123.992 158.496 124.283 158.258C124.575 158.017 124.791 157.694 124.933 157.289C125.079 156.884 125.152 156.433 125.152 155.936C125.152 155.435 125.079 154.982 124.933 154.578C124.791 154.169 124.575 153.844 124.283 153.603C123.992 153.361 123.63 153.241 123.197 153.241C122.753 153.241 122.384 153.361 122.089 153.603C121.798 153.844 121.579 154.169 121.434 154.578C121.292 154.982 121.221 155.435 121.221 155.936C121.221 156.433 121.292 156.884 121.434 157.289C121.579 157.694 121.798 158.017 122.089 158.258C122.384 158.496 122.753 158.615 123.197 158.615Z"
            fill="#89909E"
          />
          <path
            d="M128.743 160V151.818H130.613V153.182H130.698C130.847 152.71 131.103 152.346 131.465 152.09C131.831 151.831 132.248 151.701 132.717 151.701C132.823 151.701 132.942 151.706 133.074 151.717C133.209 151.724 133.321 151.737 133.409 151.754V153.528C133.328 153.5 133.198 153.475 133.021 153.454C132.847 153.429 132.678 153.416 132.514 153.416C132.163 153.416 131.847 153.493 131.566 153.645C131.289 153.795 131.071 154.002 130.911 154.269C130.751 154.535 130.671 154.842 130.671 155.19V160H128.743Z"
            fill="#89909E"
          />
          <path
            d="M144.425 152.09C144.375 151.625 144.166 151.263 143.796 151.003C143.431 150.744 142.955 150.614 142.369 150.614C141.957 150.614 141.604 150.677 141.309 150.801C141.014 150.925 140.789 151.094 140.632 151.307C140.476 151.52 140.396 151.763 140.393 152.037C140.393 152.264 140.444 152.461 140.547 152.628C140.654 152.795 140.798 152.937 140.979 153.054C141.16 153.168 141.36 153.264 141.581 153.342C141.801 153.42 142.023 153.486 142.246 153.539L143.269 153.795C143.681 153.89 144.077 154.02 144.457 154.183C144.84 154.347 145.183 154.553 145.485 154.801C145.79 155.05 146.032 155.35 146.209 155.701C146.387 156.053 146.476 156.465 146.476 156.937C146.476 157.576 146.312 158.139 145.986 158.626C145.659 159.109 145.187 159.487 144.569 159.76C143.954 160.03 143.211 160.165 142.337 160.165C141.488 160.165 140.751 160.034 140.126 159.771C139.505 159.508 139.018 159.125 138.667 158.621C138.319 158.116 138.131 157.502 138.102 156.777H140.046C140.075 157.157 140.192 157.474 140.398 157.726C140.604 157.978 140.872 158.166 141.202 158.29C141.536 158.415 141.909 158.477 142.321 158.477C142.751 158.477 143.127 158.413 143.45 158.285C143.777 158.154 144.033 157.972 144.217 157.742C144.402 157.507 144.496 157.234 144.5 156.921C144.496 156.637 144.413 156.403 144.249 156.218C144.086 156.03 143.857 155.874 143.562 155.749C143.271 155.622 142.93 155.508 142.539 155.409L141.298 155.089C140.4 154.858 139.69 154.508 139.168 154.04C138.649 153.567 138.39 152.94 138.39 152.159C138.39 151.516 138.564 150.954 138.912 150.471C139.263 149.988 139.741 149.613 140.345 149.347C140.948 149.077 141.632 148.942 142.396 148.942C143.17 148.942 143.848 149.077 144.43 149.347C145.016 149.613 145.476 149.984 145.81 150.46C146.144 150.932 146.316 151.476 146.327 152.09H144.425Z"
            fill="#89909E"
          />
          <path
            d="M148.152 163.068V151.818H150.049V153.171H150.161C150.26 152.972 150.4 152.761 150.581 152.537C150.762 152.31 151.007 152.117 151.316 151.957C151.625 151.793 152.02 151.712 152.499 151.712C153.131 151.712 153.701 151.873 154.209 152.197C154.72 152.516 155.125 152.99 155.423 153.619C155.725 154.244 155.876 155.011 155.876 155.92C155.876 156.818 155.729 157.582 155.434 158.21C155.139 158.839 154.738 159.318 154.23 159.649C153.722 159.979 153.147 160.144 152.504 160.144C152.036 160.144 151.647 160.066 151.338 159.91C151.029 159.753 150.78 159.565 150.592 159.345C150.407 159.121 150.264 158.91 150.161 158.711H150.081V163.068H148.152ZM150.043 155.909C150.043 156.438 150.118 156.902 150.267 157.299C150.42 157.697 150.638 158.008 150.922 158.232C151.21 158.452 151.558 158.562 151.966 158.562C152.392 158.562 152.749 158.448 153.037 158.221C153.325 157.99 153.541 157.676 153.687 157.278C153.836 156.877 153.911 156.421 153.911 155.909C153.911 155.401 153.838 154.95 153.692 154.556C153.547 154.162 153.33 153.853 153.042 153.629C152.755 153.406 152.396 153.294 151.966 153.294C151.554 153.294 151.205 153.402 150.917 153.619C150.629 153.835 150.411 154.139 150.262 154.53C150.116 154.92 150.043 155.38 150.043 155.909Z"
            fill="#89909E"
          />
          <path
            d="M161.096 160.16C160.297 160.16 159.605 159.984 159.019 159.633C158.433 159.281 157.978 158.789 157.655 158.157C157.336 157.525 157.176 156.786 157.176 155.941C157.176 155.096 157.336 154.356 157.655 153.72C157.978 153.084 158.433 152.591 159.019 152.239C159.605 151.888 160.297 151.712 161.096 151.712C161.895 151.712 162.588 151.888 163.174 152.239C163.76 152.591 164.212 153.084 164.532 153.72C164.855 154.356 165.017 155.096 165.017 155.941C165.017 156.786 164.855 157.525 164.532 158.157C164.212 158.789 163.76 159.281 163.174 159.633C162.588 159.984 161.895 160.16 161.096 160.16ZM161.107 158.615C161.54 158.615 161.902 158.496 162.194 158.258C162.485 158.017 162.701 157.694 162.843 157.289C162.989 156.884 163.062 156.433 163.062 155.936C163.062 155.435 162.989 154.982 162.843 154.578C162.701 154.169 162.485 153.844 162.194 153.603C161.902 153.361 161.54 153.241 161.107 153.241C160.663 153.241 160.294 153.361 159.999 153.603C159.708 153.844 159.489 154.169 159.344 154.578C159.202 154.982 159.131 155.435 159.131 155.936C159.131 156.433 159.202 156.884 159.344 157.289C159.489 157.694 159.708 158.017 159.999 158.258C160.294 158.496 160.663 158.615 161.107 158.615Z"
            fill="#89909E"
          />
          <path
            d="M166.653 160V151.818H168.523V153.182H168.608C168.757 152.71 169.013 152.346 169.375 152.09C169.741 151.831 170.158 151.701 170.627 151.701C170.734 151.701 170.853 151.706 170.984 151.717C171.119 151.724 171.231 151.737 171.32 151.754V153.528C171.238 153.5 171.108 153.475 170.931 153.454C170.757 153.429 170.588 153.416 170.425 153.416C170.073 153.416 169.757 153.493 169.476 153.645C169.199 153.795 168.981 154.002 168.821 154.269C168.661 154.535 168.582 154.842 168.582 155.19V160H166.653Z"
            fill="#89909E"
          />
          <path
            d="M177.126 151.818V153.31H172.422V151.818H177.126ZM173.583 149.858H175.512V157.539C175.512 157.798 175.551 157.997 175.629 158.136C175.711 158.271 175.817 158.363 175.948 158.413C176.08 158.462 176.225 158.487 176.385 158.487C176.506 158.487 176.616 158.478 176.715 158.461C176.818 158.443 176.897 158.427 176.95 158.413L177.275 159.92C177.172 159.956 177.024 159.995 176.833 160.037C176.644 160.08 176.414 160.105 176.14 160.112C175.657 160.126 175.222 160.053 174.835 159.894C174.448 159.73 174.141 159.478 173.914 159.137C173.69 158.796 173.58 158.37 173.583 157.859V149.858Z"
            fill="#89909E"
          />
          <path
            d="M185.088 153.981L183.33 154.173C183.28 153.995 183.193 153.828 183.069 153.672C182.948 153.516 182.785 153.39 182.579 153.294C182.373 153.198 182.121 153.15 181.822 153.15C181.421 153.15 181.084 153.237 180.81 153.411C180.54 153.585 180.407 153.811 180.411 154.087C180.407 154.325 180.494 154.519 180.672 154.668C180.853 154.817 181.151 154.94 181.567 155.036L182.962 155.334C183.737 155.501 184.312 155.765 184.688 156.128C185.068 156.49 185.26 156.964 185.264 157.55C185.26 158.065 185.109 158.519 184.811 158.913C184.516 159.304 184.106 159.61 183.58 159.83C183.055 160.05 182.451 160.16 181.769 160.16C180.768 160.16 179.962 159.95 179.351 159.531C178.74 159.109 178.376 158.521 178.259 157.768L180.139 157.587C180.224 157.956 180.406 158.235 180.683 158.423C180.96 158.612 181.32 158.706 181.764 158.706C182.222 158.706 182.589 158.612 182.866 158.423C183.147 158.235 183.287 158.003 183.287 157.726C183.287 157.491 183.197 157.298 183.016 157.145C182.838 156.992 182.561 156.875 182.185 156.793L180.789 156.5C180.004 156.337 179.424 156.062 179.047 155.675C178.671 155.284 178.484 154.791 178.488 154.194C178.484 153.69 178.621 153.253 178.898 152.884C179.179 152.511 179.567 152.223 180.065 152.021C180.565 151.815 181.142 151.712 181.796 151.712C182.755 151.712 183.509 151.916 184.06 152.324C184.614 152.733 184.956 153.285 185.088 153.981Z"
            fill="#89909E"
          />
          <defs>
            <clipPath id="clip0_1275_1238">
              <rect width="96" height="96" fill="white" transform="translate(71)" />
            </clipPath>
          </defs>
        </svg>
      </div>
      <div className="w-full rounded-full bg-[#EEF0F3] p-1">
        <SlideButton />
      </div>
      <div className="relative hidden w-full">
        <div className="pointer-events-none absolute inset-0 flex h-full w-full items-center justify-center font-sans">
          <p>Slide to Buy</p>
        </div>
        <div className="h-fit w-full rounded-full bg-[#EEF0F3] p-1">
          <div ref={trackRef} className="relative h-[52px] w-full bg-black/0">
            <div
              style={{ width: blueWidth }}
              className="relative flex h-[52px] min-w-[71px] cursor-grab items-end justify-end overflow-hidden rounded-full bg-base-blue active:cursor-grabbing"
              onPointerDown={handlePointerDown}
              onPointerMove={handlePointerMove}
              onPointerUp={handlePointerUp}
              role="slider"
              aria-valuemin={0}
              aria-valuemax={100}
              aria-valuenow={Math.round(progress * 100)}
              tabIndex={0}
            >
              {/* <div className="absolute inset-0 flex h-full w-full items-center justify-center font-sans">
                <p>Release to Buy</p>
              </div> */}
              <div className="flex h-[52px] w-[71px] items-center justify-center">
                <svg
                  width="20"
                  height="17"
                  viewBox="0 0 20 17"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.5 1.5L8.5 8.25862L1.5 15.0172M11.5 1.98276L18.5 8.74138L11.5 15.5"
                    stroke="white"
                    stroke-width="3"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
